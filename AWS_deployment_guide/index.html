
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Internal Developer Platform for Elite Performance">
      
      
      
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Fawkes AWS Production Deployment Guide - Fawkes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fawkes-aws-production-deployment-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Fawkes" class="md-header__button md-logo" aria-label="Fawkes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Fawkes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Fawkes AWS Production Deployment Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../getting-started/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../tutorials/" class="md-tabs__link">
          
  
  
    
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../how-to/" class="md-tabs__link">
          
  
  
    
  
  How-To Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../explanation/" class="md-tabs__link">
          
  
  
    
  
  Explanation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../reference/" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../playbooks/" class="md-tabs__link">
          
  
  
    
  
  Playbooks

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Fawkes" class="md-nav__button md-logo" aria-label="Fawkes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Fawkes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../tutorials/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/1-deploy-first-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Deploy Your First Service
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/2-add-tracing-tempo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Add Distributed Tracing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/3-consume-vault-secret/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. Consume Vault Secrets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/4-buildpack-migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Migrate to Buildpacks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/5-create-golden-path-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. Create a Golden Path Template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/6-measure-dora-metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6. Measure DORA Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Dojo Learning
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Dojo Learning
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dojo/modules/white-belt/module-01-what-is-idp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    White Belt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dojo/modules/yellow-belt/module-05-ci-fundamentals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Yellow Belt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dojo/modules/green-belt/module-09-gitops-argocd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Green Belt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dojo/modules/brown-belt/module-13-observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Brown Belt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dojo/modules/black-belt/module-17-platform-product/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Black Belt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../how-to/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    How-To Guides
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    How-To Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    GitOps
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    GitOps
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to/gitops/onboard-service-argocd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Onboard Service to ArgoCD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to/gitops/sync-argocd-app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sync ArgoCD Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Observability
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to/observability/trace-request-tempo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trace Requests with Tempo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to/observability/view-dora-metrics-devlake/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    View DORA Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to/security/rotate-vault-secrets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rotate Vault Secrets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to/development/debug-buildpack-failure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debug Buildpack Failures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to/techdocs-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using TechDocs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Networking
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Networking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to/networking/configure-ingress-tls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configure Ingress with TLS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Policy
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Policy
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to/policy/troubleshoot-kyverno-violation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshoot Kyverno Violations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../patterns/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Patterns
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Patterns
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../patterns/continuous-delivery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Continuous Delivery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../patterns/infrastructure-as-code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Infrastructure as Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../patterns/test-automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Automation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../explanation/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Explanation
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Explanation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanation/architecture/gitops-strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitOps Strategy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Containers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Containers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanation/containers/buildpacks-philosophy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Buildpacks Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanation/security/zero-trust-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zero Trust Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Observability
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanation/observability/unified-telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unified Telemetry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IDP
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    IDP
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanation/idp/product-discovery-delivery-flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Product Discovery & Delivery Flow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Governance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Governance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanation/governance/policy-as-code-tiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policy as Code Tiers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Platform Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../business_case/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Business Case
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capabilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Capabilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/backstage-plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backstage Plugins API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/jenkins-webhook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Jenkins Webhook API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CRDs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    CRDs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/crds/golden-path-crd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Golden Path Devfile
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configuration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/config/jenkins-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Jenkins Helm Values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/config/prometheus-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prometheus Helm Values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Platform Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_5" >
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Policies
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Policies
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/policies/kyverno-policy-list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kyverno Policy List
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Catalog
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Catalog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/catalogue/service-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../tools/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/spinnaker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spinnaker (Deprecated)
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--deprecated"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/jenkins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Jenkins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/prometheus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prometheus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/focalboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Focalboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_9" >
        
          
          <label class="md-nav__link" for="__nav_6_9" id="__nav_6_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI & Machine Learning
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI & Machine Learning
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ai/usage-policy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Usage Policy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ai/copilot-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitHub Copilot Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ai/vector-database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vector Database
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ai/training-quiz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training Quiz
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../playbooks/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Playbooks
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Playbooks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playbooks/TEMPLATE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playbooks/dora-metrics-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DORA Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        Required Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-account-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        AWS Account Requirements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domain-and-ssl-optional-but-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Domain and SSL (Optional but Recommended)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#budget-and-cost-awareness" class="md-nav__link">
    <span class="md-ellipsis">
      
        Budget and Cost Awareness
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-level-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        High-Level Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#component-placement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Component Placement
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-deployment-planning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pre-Deployment Planning
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pre-Deployment Planning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secrets Management
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-flight-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pre-Flight Checklist
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phase-1-aws-foundation-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 1: AWS Foundation Setup
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Phase 1: AWS Foundation Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-11-initialize-terraform" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1.1: Initialize Terraform
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-12-deploy-vpc-and-networking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1.2: Deploy VPC and Networking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-13-create-s3-buckets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1.3: Create S3 Buckets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-14-store-secrets-in-aws-secrets-manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1.4: Store Secrets in AWS Secrets Manager
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-15-create-ssl-certificate-if-using-custom-domain" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1.5: Create SSL Certificate (if using custom domain)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phase-2-eks-cluster-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 2: EKS Cluster Deployment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Phase 2: EKS Cluster Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-21-create-eks-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2.1: Create EKS Cluster
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-22-configure-kubectl-access" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2.2: Configure kubectl Access
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-23-install-aws-load-balancer-controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2.3: Install AWS Load Balancer Controller
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-24-install-external-secrets-operator" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2.4: Install External Secrets Operator
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-25-configure-cluster-autoscaler" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2.5: Configure Cluster Autoscaler
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phase-3-database-and-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 3: Database and Storage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Phase 3: Database and Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-31-create-rds-postgresql-instance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3.1: Create RDS PostgreSQL Instance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-32-configure-kubernetes-storage-classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3.2: Configure Kubernetes Storage Classes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-33-wait-for-rds-instance-and-get-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3.3: Wait for RDS Instance and Get Endpoint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-34-initialize-database-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3.4: Initialize Database Schema
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phase-4-platform-services" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 4: Platform Services
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Phase 4: Platform Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-41-create-namespaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.1: Create Namespaces
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-42-deploy-argocd-gitops-engine" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.2: Deploy ArgoCD (GitOps Engine)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-43-deploy-harbor-container-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.3: Deploy Harbor (Container Registry)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-44-deploy-jenkins-cicd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.4: Deploy Jenkins (CI/CD)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-45-deploy-backstage-developer-portal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.5: Deploy Backstage (Developer Portal)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-46-deploy-mattermost-team-collaboration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.6: Deploy Mattermost (Team Collaboration)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-47-deploy-focalboard-project-tracking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.7: Deploy Focalboard (Project Tracking)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phase-5-observability-stack" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 5: Observability Stack
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Phase 5: Observability Stack">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-51-deploy-prometheus-stack" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5.1: Deploy Prometheus Stack
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-52-deploy-dora-metrics-exporter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5.2: Deploy DORA Metrics Exporter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-53-import-dora-metrics-dashboards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5.3: Import DORA Metrics Dashboards
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phase-6-security-hardening" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 6: Security Hardening
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Phase 6: Security Hardening">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-61-deploy-trivy-operator-vulnerability-scanning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 6.1: Deploy Trivy Operator (Vulnerability Scanning)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-62-deploy-kyverno-policy-enforcement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 6.2: Deploy Kyverno (Policy Enforcement)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-63-configure-network-policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 6.3: Configure Network Policies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-64-enable-pod-security-standards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 6.4: Enable Pod Security Standards
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-65-configure-rbac" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 6.5: Configure RBAC
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phase-7-validation-and-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 7: Validation and Testing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Phase 7: Validation and Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-71-component-health-checks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 7.1: Component Health Checks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-72-connectivity-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 7.2: Connectivity Tests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-73-deploy-test-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 7.3: Deploy Test Application
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-74-verify-dora-metrics-collection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 7.4: Verify DORA Metrics Collection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-75-security-scan" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 7.5: Security Scan
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#post-deployment-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Post-Deployment Operations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post-Deployment Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dns-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        DNS Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-backups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure Backups
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-monitoring-and-alerting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure Monitoring and Alerting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-up-cost-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Set Up Cost Monitoring
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Documentation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues-and-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Issues and Solutions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues and Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#issue-pods-stuck-in-pending-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Pods stuck in Pending state
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-cannot-access-services-via-ingress" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Cannot access services via ingress
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-database-connection-failures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Database connection failures
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-high-aws-costs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: High AWS costs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-certificate-validation-pending" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Certificate validation pending
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cost-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cost Optimization
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cost Optimization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#immediate-optimizations-week-1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Immediate Optimizations (Week 1)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#long-term-optimizations-month-2-3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Long-term Optimizations (Month 2-3)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-costs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Monitoring Costs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-a-complete-deployment-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix A: Complete Deployment Checklist
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix A: Complete Deployment Checklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pre-Deployment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-1-foundation-30-min" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 1: Foundation (30 min)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-eks-cluster-30-min" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 2: EKS Cluster (30 min)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-database-storage-20-min" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 3: Database &amp; Storage (20 min)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4-platform-services-60-min" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 4: Platform Services (60 min)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-5-observability-30-min" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 5: Observability (30 min)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-6-security-20-min" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 6: Security (20 min)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-7-validation-30-min" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 7: Validation (30 min)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Post-Deployment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-b-useful-commands-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix B: Useful Commands Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix B: Useful Commands Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cluster Management
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debugging
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup-and-restore" class="md-nav__link">
    <span class="md-ellipsis">
      
        Backup and Restore
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificate-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Certificate Management
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Database Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets-management_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secrets Management
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-c-disaster-recovery-procedures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix C: Disaster Recovery Procedures
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix C: Disaster Recovery Procedures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rds-failure" class="md-nav__link">
    <span class="md-ellipsis">
      
        RDS Failure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eks-cluster-failure" class="md-nav__link">
    <span class="md-ellipsis">
      
        EKS Cluster Failure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-region-failure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete Region Failure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-d-maintenance-procedures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix D: Maintenance Procedures
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix D: Maintenance Procedures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#monthly-maintenance-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Monthly Maintenance Tasks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quarterly-maintenance-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quarterly Maintenance Tasks
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-e-additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix E: Additional Resources
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix E: Additional Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#official-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Official Documentation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices-guides" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices Guides
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#training-and-certification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Training and Certification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#community-and-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Community and Support
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conclusion
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="fawkes-aws-production-deployment-guide">Fawkes AWS Production Deployment Guide</h1>
<p><strong>Document Purpose</strong>: Complete step-by-step guide for deploying Fawkes on AWS in production
<strong>Target Audience</strong>: DevOps engineers, Platform engineers, System administrators
<strong>Estimated Time</strong>: 3-4 hours for full deployment
<strong>Last Updated</strong>: October 7, 2025</p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#architecture-overview">Architecture Overview</a></li>
<li><a href="#pre-deployment-planning">Pre-Deployment Planning</a></li>
<li><a href="#phase-1-aws-foundation-setup">Phase 1: AWS Foundation Setup</a></li>
<li><a href="#phase-2-eks-cluster-deployment">Phase 2: EKS Cluster Deployment</a></li>
<li><a href="#phase-3-database-and-storage">Phase 3: Database and Storage</a></li>
<li><a href="#phase-4-platform-services">Phase 4: Platform Services</a></li>
<li><a href="#phase-5-observability-stack">Phase 5: Observability Stack</a></li>
<li><a href="#phase-6-security-hardening">Phase 6: Security Hardening</a></li>
<li><a href="#phase-7-validation-and-testing">Phase 7: Validation and Testing</a></li>
<li><a href="#post-deployment-operations">Post-Deployment Operations</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#cost-optimization">Cost Optimization</a></li>
</ol>
<hr />
<h2 id="prerequisites">Prerequisites</h2>
<h3 id="required-tools">Required Tools</h3>
<p>Install these tools on your local machine before beginning:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># AWS CLI (version 2.x)</span>
curl<span class="w"> </span><span class="s2">&quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot;</span><span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;awscliv2.zip&quot;</span>
unzip<span class="w"> </span>awscliv2.zip
sudo<span class="w"> </span>./aws/install
aws<span class="w"> </span>--version<span class="w">  </span><span class="c1"># Should be 2.x</span>

<span class="c1"># kubectl (Kubernetes CLI)</span>
curl<span class="w"> </span>-LO<span class="w"> </span><span class="s2">&quot;https://dl.k8s.io/release/</span><span class="k">$(</span>curl<span class="w"> </span>-L<span class="w"> </span>-s<span class="w"> </span>https://dl.k8s.io/release/stable.txt<span class="k">)</span><span class="s2">/bin/linux/amd64/kubectl&quot;</span>
chmod<span class="w"> </span>+x<span class="w"> </span>kubectl
sudo<span class="w"> </span>mv<span class="w"> </span>kubectl<span class="w"> </span>/usr/local/bin/
kubectl<span class="w"> </span>version<span class="w"> </span>--client

<span class="c1"># Terraform (1.5.0 or later)</span>
wget<span class="w"> </span>https://releases.hashicorp.com/terraform/1.6.0/terraform_1.6.0_linux_amd64.zip
unzip<span class="w"> </span>terraform_1.6.0_linux_amd64.zip
sudo<span class="w"> </span>mv<span class="w"> </span>terraform<span class="w"> </span>/usr/local/bin/
terraform<span class="w"> </span>version

<span class="c1"># Helm (Kubernetes package manager)</span>
curl<span class="w"> </span>https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3<span class="w"> </span><span class="p">|</span><span class="w"> </span>bash
helm<span class="w"> </span>version

<span class="c1"># eksctl (EKS cluster management)</span>
curl<span class="w"> </span>--silent<span class="w"> </span>--location<span class="w"> </span><span class="s2">&quot;https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_</span><span class="k">$(</span>uname<span class="w"> </span>-s<span class="k">)</span><span class="s2">_amd64.tar.gz&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tar<span class="w"> </span>xz<span class="w"> </span>-C<span class="w"> </span>/tmp
sudo<span class="w"> </span>mv<span class="w"> </span>/tmp/eksctl<span class="w"> </span>/usr/local/bin
eksctl<span class="w"> </span>version

<span class="c1"># jq (JSON processor - for scripts)</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>jq<span class="w"> </span>-y<span class="w">  </span><span class="c1"># Ubuntu/Debian</span>
<span class="c1"># or</span>
sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>jq<span class="w"> </span>-y<span class="w">      </span><span class="c1"># RHEL/CentOS</span>
</code></pre></div>
<h3 id="aws-account-requirements">AWS Account Requirements</h3>
<p><strong>IAM Permissions Needed</strong>:
- EC2 (VPC, Security Groups, EBS)
- EKS (Cluster creation and management)
- RDS (PostgreSQL instances)
- S3 (Bucket creation and management)
- IAM (Role and policy creation)
- CloudWatch (Logs and metrics)
- Certificate Manager (SSL/TLS certificates)
- Secrets Manager (Secret storage)
- Application Load Balancer
- Route53 (DNS management - optional)</p>
<p><strong>Recommended</strong>: Use an IAM user with <code>AdministratorAccess</code> for initial setup, then lock down to least-privilege after deployment.</p>
<p><strong>Service Limits Check</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check EKS cluster limit (default: 100 per region)</span>
aws<span class="w"> </span>service-quotas<span class="w"> </span>get-service-quota<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--service-code<span class="w"> </span>eks<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--quota-code<span class="w"> </span>L-1194D53C<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Check EIP limit (need at least 3 for NAT gateways)</span>
aws<span class="w"> </span>service-quotas<span class="w"> </span>get-service-quota<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--service-code<span class="w"> </span>ec2<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--quota-code<span class="w"> </span>L-0263D0A3<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span>us-east-1
</code></pre></div></p>
<h3 id="domain-and-ssl-optional-but-recommended">Domain and SSL (Optional but Recommended)</h3>
<p><strong>For production deployments</strong>:
- Domain name (e.g., <code>fawkes.yourdomain.com</code>)
- Access to DNS management (Route53 or external DNS provider)
- SSL certificate via AWS Certificate Manager (we'll create this)</p>
<p><strong>Without domain</strong>:
- Can use AWS-provided Load Balancer DNS names
- Self-signed certificates (development only)</p>
<h3 id="budget-and-cost-awareness">Budget and Cost Awareness</h3>
<p><strong>Expected Monthly Costs</strong>:
- <strong>Development</strong>: ~$379/month
- <strong>Staging</strong>: ~$762/month
- <strong>Production</strong>: ~$2,084/month</p>
<p>See <a href="./AWS_COST_ESTIMATION.md">AWS Cost Estimation</a> for detailed breakdown.</p>
<p><strong>Set up billing alerts</strong>:
<div class="highlight"><pre><span></span><code>aws<span class="w"> </span>budgets<span class="w"> </span>create-budget<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--account-id<span class="w"> </span>YOUR_ACCOUNT_ID<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--budget<span class="w"> </span>file://budget.json<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--notifications-with-subscribers<span class="w"> </span>file://notifications.json
</code></pre></div></p>
<hr />
<h2 id="architecture-overview">Architecture Overview</h2>
<h3 id="high-level-architecture">High-Level Architecture</h3>
<div class="highlight"><pre><span></span><code>
                         AWS Region (us-east-1)               
                                                              
   
                     VPC (10.0.0.0/16)                     
                                                           
          
       Public          Public          Public      
      Subnet AZ1      Subnet AZ2     Subnet AZ3    
     10.0.1.0/24     10.0.2.0/24    10.0.3.0/24    
                                                   
      NAT GW          NAT GW          NAT GW       
      ALB             ALB                          
          
                                                       
          
       Private         Private         Private     
      Subnet AZ1      Subnet AZ2     Subnet AZ3    
     10.0.11.0/24    10.0.12.0/24   10.0.13.0/24   
                                                   
     EKS Nodes       EKS Nodes       EKS Nodes     
     RDS Primary     RDS Standby                   
          
                                                           
   
                                                              
   
    EKS Cluster (fawkes-production)                        
    - Backstage Portal                                     
    - Jenkins CI/CD                                        
    - ArgoCD (GitOps)                                      
    - Harbor (Registry)                                    
    - Prometheus + Grafana                                 
    - Mattermost                                           
    - Focalboard                                           
   
                                                              
   
    RDS PostgreSQL (Multi-AZ)                              
   
                                                              
   
    S3 Buckets                                             
    - Artifacts (fawkes-artifacts-prod)                    
    - Backups (fawkes-backups-prod)                        
    - Logs (fawkes-logs-prod)                              
   

</code></pre></div>
<h3 id="network-design">Network Design</h3>
<p><strong>VPC CIDR</strong>: <code>10.0.0.0/16</code> (65,536 IPs)</p>
<p><strong>Subnets</strong>:
- <strong>Public Subnets</strong> (3 AZs): <code>10.0.1.0/24</code>, <code>10.0.2.0/24</code>, <code>10.0.3.0/24</code>
  - Internet Gateway attached
  - NAT Gateways deployed here
  - Application Load Balancers</p>
<ul>
<li><strong>Private Subnets</strong> (3 AZs): <code>10.0.11.0/24</code>, <code>10.0.12.0/24</code>, <code>10.0.13.0/24</code></li>
<li>No direct internet access</li>
<li>EKS worker nodes</li>
<li>RDS instances</li>
<li>Egress via NAT Gateways</li>
</ul>
<p><strong>Why 3 Availability Zones?</strong>
- High availability and fault tolerance
- EKS best practice (distribute nodes across AZs)
- RDS Multi-AZ automatic failover</p>
<h3 id="component-placement">Component Placement</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Subnet Type</th>
<th>Availability Zones</th>
<th>Accessibility</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Internet Gateway</strong></td>
<td>N/A</td>
<td>Region-level</td>
<td>Public</td>
</tr>
<tr>
<td><strong>NAT Gateways</strong></td>
<td>Public</td>
<td>3 (one per AZ)</td>
<td>Public IPs</td>
</tr>
<tr>
<td><strong>Application Load Balancers</strong></td>
<td>Public</td>
<td>3</td>
<td>Internet-facing</td>
</tr>
<tr>
<td><strong>EKS Worker Nodes</strong></td>
<td>Private</td>
<td>3</td>
<td>Internal only</td>
</tr>
<tr>
<td><strong>RDS PostgreSQL</strong></td>
<td>Private</td>
<td>2 (Multi-AZ)</td>
<td>Internal only</td>
</tr>
<tr>
<td><strong>S3 Buckets</strong></td>
<td>N/A</td>
<td>Region-level</td>
<td>VPC Endpoint</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="pre-deployment-planning">Pre-Deployment Planning</h2>
<h3 id="environment-configuration">Environment Configuration</h3>
<p>Create a <code>production.tfvars</code> file with your specific configuration:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># production.tfvars</span>

<span class="c1"># General Settings</span>
<span class="na">environment</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;production&quot;</span>
<span class="na">project_name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fawkes&quot;</span>
<span class="na">aws_region</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span>
<span class="na">availability_zones</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;us-east-1a&quot;, &quot;us-east-1b&quot;, &quot;us-east-1c&quot;</span><span class="p">]</span>

<span class="c1"># VPC Configuration</span>
<span class="na">vpc_cidr</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;10.0.0.0/16&quot;</span>
<span class="na">public_subnet_cidrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;10.0.1.0/24&quot;, &quot;10.0.2.0/24&quot;, &quot;10.0.3.0/24&quot;</span><span class="p">]</span>
<span class="na">private_subnet_cidrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;10.0.11.0/24&quot;, &quot;10.0.12.0/24&quot;, &quot;10.0.13.0/24&quot;</span><span class="p">]</span>

<span class="c1"># EKS Cluster Configuration</span>
<span class="na">cluster_name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fawkes-production&quot;</span>
<span class="na">cluster_version</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.28&quot;</span>
<span class="na">node_instance_type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;t3.xlarge&quot;</span>
<span class="na">node_desired_size</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="m">6</span>
<span class="na">node_min_size</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="na">node_max_size</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">12</span>

<span class="c1"># RDS Configuration</span>
<span class="na">db_instance_class</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;db.m5.large&quot;</span>
<span class="na">db_engine_version</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;15.4&quot;</span>
<span class="na">db_name</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fawkes&quot;</span>
<span class="na">db_username</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fawkesadmin&quot;</span>
<span class="na">db_multi_az</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="na">db_allocated_storage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">500</span>
<span class="na">db_backup_retention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">7</span>

<span class="c1"># S3 Bucket Names (must be globally unique)</span>
<span class="na">artifacts_bucket</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fawkes-artifacts-prod-YOUR-UNIQUE-ID&quot;</span>
<span class="na">backups_bucket</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fawkes-backups-prod-YOUR-UNIQUE-ID&quot;</span>
<span class="na">logs_bucket</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fawkes-logs-prod-YOUR-UNIQUE-ID&quot;</span>

<span class="c1"># Domain Configuration (optional)</span>
<span class="na">domain_name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fawkes.yourdomain.com&quot;</span>
<span class="na">create_route53_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="c1">  # Set to true if you want Terraform to manage DNS</span>

<span class="c1"># Tags</span>
<span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">Environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;production&quot;</span>
<span class="w">  </span><span class="na">Project</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fawkes&quot;</span>
<span class="w">  </span><span class="na">ManagedBy</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;terraform&quot;</span>
<span class="w">  </span><span class="na">Owner</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;platform-team&quot;</span>
<span class="w">  </span><span class="na">CostCenter</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;engineering&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="secrets-management">Secrets Management</h3>
<p><strong>Generate secure passwords BEFORE deployment</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Generate database password</span>
<span class="nv">DB_PASSWORD</span><span class="o">=</span><span class="k">$(</span>openssl<span class="w"> </span>rand<span class="w"> </span>-base64<span class="w"> </span><span class="m">32</span><span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Database Password: </span><span class="nv">$DB_PASSWORD</span><span class="s2">&quot;</span><span class="w">  </span><span class="c1"># Save this securely!</span>

<span class="c1"># Generate ArgoCD admin password</span>
<span class="nv">ARGOCD_PASSWORD</span><span class="o">=</span><span class="k">$(</span>openssl<span class="w"> </span>rand<span class="w"> </span>-base64<span class="w"> </span><span class="m">24</span><span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;ArgoCD Password: </span><span class="nv">$ARGOCD_PASSWORD</span><span class="s2">&quot;</span>

<span class="c1"># Generate Jenkins admin password</span>
<span class="nv">JENKINS_PASSWORD</span><span class="o">=</span><span class="k">$(</span>openssl<span class="w"> </span>rand<span class="w"> </span>-base64<span class="w"> </span><span class="m">24</span><span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Jenkins Password: </span><span class="nv">$JENKINS_PASSWORD</span><span class="s2">&quot;</span>

<span class="c1"># Store in AWS Secrets Manager (we&#39;ll do this in Phase 1)</span>
</code></pre></div>
<p><strong>IMPORTANT</strong>: Store all passwords in a secure password manager (1Password, LastPass, etc.) immediately.</p>
<h3 id="pre-flight-checklist">Pre-Flight Checklist</h3>
<p>Before proceeding, verify:</p>
<ul>
<li>[ ] AWS CLI configured with correct credentials (<code>aws sts get-caller-identity</code>)</li>
<li>[ ] All required tools installed and correct versions</li>
<li>[ ] <code>production.tfvars</code> file created with your values</li>
<li>[ ] All passwords generated and stored securely</li>
<li>[ ] S3 bucket names are globally unique (add your org/random suffix)</li>
<li>[ ] Budget alerts configured (optional but recommended)</li>
<li>[ ] Team notified of deployment window (estimated 3-4 hours)</li>
</ul>
<hr />
<h2 id="phase-1-aws-foundation-setup">Phase 1: AWS Foundation Setup</h2>
<p><strong>Duration</strong>: 30 minutes
<strong>Goal</strong>: Create VPC, subnets, security groups, and IAM roles</p>
<h3 id="step-11-initialize-terraform">Step 1.1: Initialize Terraform</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Clone the Fawkes repository</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/paruff/fawkes.git
<span class="nb">cd</span><span class="w"> </span>fawkes/infra/terraform/aws

<span class="c1"># Initialize Terraform</span>
terraform<span class="w"> </span>init

<span class="c1"># Validate configuration</span>
terraform<span class="w"> </span>validate

<span class="c1"># Plan deployment (review what will be created)</span>
terraform<span class="w"> </span>plan<span class="w"> </span>-var-file<span class="o">=</span>production.tfvars<span class="w"> </span>-out<span class="o">=</span>tfplan
</code></pre></div>
<p><strong>Review the plan carefully</strong>. You should see:
- 1 VPC
- 6 subnets (3 public, 3 private)
- 1 Internet Gateway
- 3 NAT Gateways
- Route tables and associations
- Security groups
- IAM roles and policies</p>
<h3 id="step-12-deploy-vpc-and-networking">Step 1.2: Deploy VPC and Networking</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Apply the foundation infrastructure</span>
terraform<span class="w"> </span>apply<span class="w"> </span>tfplan

<span class="c1"># This will take ~10 minutes (NAT Gateways are slow to provision)</span>
</code></pre></div>
<p><strong>Expected output</strong>:
<div class="highlight"><pre><span></span><code>Apply complete! Resources: 42 added, 0 changed, 0 destroyed.

Outputs:
vpc_id = &quot;vpc-0a1b2c3d4e5f6g7h8&quot;
public_subnet_ids = [&quot;subnet-abc123&quot;, &quot;subnet-def456&quot;, &quot;subnet-ghi789&quot;]
private_subnet_ids = [&quot;subnet-xyz123&quot;, &quot;subnet-uvw456&quot;, &quot;subnet-rst789&quot;]
nat_gateway_ids = [&quot;nat-0a1b2c3d&quot;, &quot;nat-4e5f6g7h&quot;, &quot;nat-8i9j0k1l&quot;]
</code></pre></div></p>
<h3 id="step-13-create-s3-buckets">Step 1.3: Create S3 Buckets</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create artifacts bucket</span>
aws<span class="w"> </span>s3<span class="w"> </span>mb<span class="w"> </span>s3://fawkes-artifacts-prod-YOUR-UNIQUE-ID<span class="w"> </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Enable versioning for artifacts</span>
aws<span class="w"> </span>s3api<span class="w"> </span>put-bucket-versioning<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--bucket<span class="w"> </span>fawkes-artifacts-prod-YOUR-UNIQUE-ID<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--versioning-configuration<span class="w"> </span><span class="nv">Status</span><span class="o">=</span>Enabled

<span class="c1"># Create backups bucket</span>
aws<span class="w"> </span>s3<span class="w"> </span>mb<span class="w"> </span>s3://fawkes-backups-prod-YOUR-UNIQUE-ID<span class="w"> </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Enable versioning for backups</span>
aws<span class="w"> </span>s3api<span class="w"> </span>put-bucket-versioning<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--bucket<span class="w"> </span>fawkes-backups-prod-YOUR-UNIQUE-ID<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--versioning-configuration<span class="w"> </span><span class="nv">Status</span><span class="o">=</span>Enabled

<span class="c1"># Create logs bucket</span>
aws<span class="w"> </span>s3<span class="w"> </span>mb<span class="w"> </span>s3://fawkes-logs-prod-YOUR-UNIQUE-ID<span class="w"> </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Configure lifecycle policy for logs (delete after 90 days)</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>logs-lifecycle.json<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">{</span>
<span class="s">  &quot;Rules&quot;: [</span>
<span class="s">    {</span>
<span class="s">      &quot;Id&quot;: &quot;DeleteOldLogs&quot;,</span>
<span class="s">      &quot;Status&quot;: &quot;Enabled&quot;,</span>
<span class="s">      &quot;Prefix&quot;: &quot;&quot;,</span>
<span class="s">      &quot;Expiration&quot;: {</span>
<span class="s">        &quot;Days&quot;: 90</span>
<span class="s">      }</span>
<span class="s">    }</span>
<span class="s">  ]</span>
<span class="s">}</span>
<span class="s">EOF</span>

aws<span class="w"> </span>s3api<span class="w"> </span>put-bucket-lifecycle-configuration<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--bucket<span class="w"> </span>fawkes-logs-prod-YOUR-UNIQUE-ID<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--lifecycle-configuration<span class="w"> </span>file://logs-lifecycle.json

<span class="c1"># Enable encryption at rest for all buckets</span>
<span class="k">for</span><span class="w"> </span>bucket<span class="w"> </span><span class="k">in</span><span class="w"> </span>fawkes-artifacts-prod-YOUR-UNIQUE-ID<span class="w"> </span>fawkes-backups-prod-YOUR-UNIQUE-ID<span class="w"> </span>fawkes-logs-prod-YOUR-UNIQUE-ID<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span>aws<span class="w"> </span>s3api<span class="w"> </span>put-bucket-encryption<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--bucket<span class="w"> </span><span class="nv">$bucket</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--server-side-encryption-configuration<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">      &quot;Rules&quot;: [</span>
<span class="s1">        {</span>
<span class="s1">          &quot;ApplyServerSideEncryptionByDefault&quot;: {</span>
<span class="s1">            &quot;SSEAlgorithm&quot;: &quot;AES256&quot;</span>
<span class="s1">          }</span>
<span class="s1">        }</span>
<span class="s1">      ]</span>
<span class="s1">    }&#39;</span>
<span class="k">done</span>
</code></pre></div>
<h3 id="step-14-store-secrets-in-aws-secrets-manager">Step 1.4: Store Secrets in AWS Secrets Manager</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Store database password</span>
aws<span class="w"> </span>secretsmanager<span class="w"> </span>create-secret<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>fawkes/production/db-password<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--description<span class="w"> </span><span class="s2">&quot;Fawkes Production Database Password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--secret-string<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DB_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Store ArgoCD admin password</span>
aws<span class="w"> </span>secretsmanager<span class="w"> </span>create-secret<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>fawkes/production/argocd-password<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--description<span class="w"> </span><span class="s2">&quot;ArgoCD Admin Password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--secret-string<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$ARGOCD_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Store Jenkins admin password</span>
aws<span class="w"> </span>secretsmanager<span class="w"> </span>create-secret<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>fawkes/production/jenkins-password<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--description<span class="w"> </span><span class="s2">&quot;Jenkins Admin Password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--secret-string<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$JENKINS_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Verify secrets were created</span>
aws<span class="w"> </span>secretsmanager<span class="w"> </span>list-secrets<span class="w"> </span>--region<span class="w"> </span>us-east-1<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>fawkes
</code></pre></div>
<h3 id="step-15-create-ssl-certificate-if-using-custom-domain">Step 1.5: Create SSL Certificate (if using custom domain)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Request certificate from AWS Certificate Manager</span>
aws<span class="w"> </span>acm<span class="w"> </span>request-certificate<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--domain-name<span class="w"> </span>fawkes.yourdomain.com<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subject-alternative-names<span class="w"> </span><span class="s2">&quot;*.fawkes.yourdomain.com&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--validation-method<span class="w"> </span>DNS<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Output will include CertificateArn - save this!</span>
<span class="c1"># Example: arn:aws:acm:us-east-1:123456789012:certificate/abc123...</span>

<span class="c1"># Follow the validation instructions (add DNS records)</span>
<span class="c1"># Certificate validation usually takes 5-30 minutes</span>
</code></pre></div>
<p><strong>Validation</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check VPC exists</span>
aws<span class="w"> </span>ec2<span class="w"> </span>describe-vpcs<span class="w"> </span>--filters<span class="w"> </span><span class="s2">&quot;Name=tag:Name,Values=fawkes-production-vpc&quot;</span>

<span class="c1"># Check subnets exist</span>
aws<span class="w"> </span>ec2<span class="w"> </span>describe-subnets<span class="w"> </span>--filters<span class="w"> </span><span class="s2">&quot;Name=vpc-id,Values=YOUR_VPC_ID&quot;</span>

<span class="c1"># Check NAT gateways are available</span>
aws<span class="w"> </span>ec2<span class="w"> </span>describe-nat-gateways<span class="w"> </span>--filter<span class="w"> </span><span class="s2">&quot;Name=state,Values=available&quot;</span>

<span class="c1"># Verify S3 buckets</span>
aws<span class="w"> </span>s3<span class="w"> </span>ls<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>fawkes

<span class="c1"># Verify secrets</span>
aws<span class="w"> </span>secretsmanager<span class="w"> </span>list-secrets<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>fawkes
</code></pre></div></p>
<hr />
<h2 id="phase-2-eks-cluster-deployment">Phase 2: EKS Cluster Deployment</h2>
<p><strong>Duration</strong>: 20-30 minutes
<strong>Goal</strong>: Deploy and configure EKS cluster with worker nodes</p>
<h3 id="step-21-create-eks-cluster">Step 2.1: Create EKS Cluster</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create cluster configuration file</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>cluster-config.yaml<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">apiVersion: eksctl.io/v1alpha5</span>
<span class="s">kind: ClusterConfig</span>

<span class="s">metadata:</span>
<span class="s">  name: fawkes-production</span>
<span class="s">  region: us-east-1</span>
<span class="s">  version: &quot;1.28&quot;</span>

<span class="s">vpc:</span>
<span class="s">  id: &quot;YOUR_VPC_ID&quot;  # From Phase 1 output</span>
<span class="s">  subnets:</span>
<span class="s">    private:</span>
<span class="s">      us-east-1a:</span>
<span class="s">        id: &quot;PRIVATE_SUBNET_1_ID&quot;</span>
<span class="s">      us-east-1b:</span>
<span class="s">        id: &quot;PRIVATE_SUBNET_2_ID&quot;</span>
<span class="s">      us-east-1c:</span>
<span class="s">        id: &quot;PRIVATE_SUBNET_3_ID&quot;</span>

<span class="s">managedNodeGroups:</span>
<span class="s">  - name: fawkes-ng-general</span>
<span class="s">    instanceType: t3.xlarge</span>
<span class="s">    minSize: 3</span>
<span class="s">    maxSize: 12</span>
<span class="s">    desiredCapacity: 6</span>
<span class="s">    privateNetworking: true</span>
<span class="s">    volumeSize: 200</span>
<span class="s">    volumeType: gp3</span>
<span class="s">    labels:</span>
<span class="s">      role: general</span>
<span class="s">      environment: production</span>
<span class="s">    tags:</span>
<span class="s">      Name: fawkes-production-node</span>
<span class="s">      Environment: production</span>
<span class="s">      Project: fawkes</span>
<span class="s">    iam:</span>
<span class="s">      withAddonPolicies:</span>
<span class="s">        imageBuilder: true</span>
<span class="s">        autoScaler: true</span>
<span class="s">        externalDNS: true</span>
<span class="s">        certManager: true</span>
<span class="s">        appMesh: false</span>
<span class="s">        ebs: true</span>
<span class="s">        fsx: false</span>
<span class="s">        efs: true</span>
<span class="s">        albIngress: true</span>
<span class="s">        xRay: true</span>
<span class="s">        cloudWatch: true</span>

<span class="s">iam:</span>
<span class="s">  withOIDC: true</span>
<span class="s">  serviceAccounts:</span>
<span class="s">    - metadata:</span>
<span class="s">        name: aws-load-balancer-controller</span>
<span class="s">        namespace: kube-system</span>
<span class="s">      wellKnownPolicies:</span>
<span class="s">        awsLoadBalancerController: true</span>
<span class="s">    - metadata:</span>
<span class="s">        name: ebs-csi-controller-sa</span>
<span class="s">        namespace: kube-system</span>
<span class="s">      wellKnownPolicies:</span>
<span class="s">        ebsCSIController: true</span>
<span class="s">    - metadata:</span>
<span class="s">        name: external-secrets</span>
<span class="s">        namespace: external-secrets-system</span>
<span class="s">      attachPolicyARNs:</span>
<span class="s">        - &quot;arn:aws:iam::aws:policy/SecretsManagerReadWrite&quot;</span>

<span class="s">cloudWatch:</span>
<span class="s">  clusterLogging:</span>
<span class="s">    enableTypes:</span>
<span class="s">      - &quot;api&quot;</span>
<span class="s">      - &quot;audit&quot;</span>
<span class="s">      - &quot;authenticator&quot;</span>
<span class="s">      - &quot;controllerManager&quot;</span>
<span class="s">      - &quot;scheduler&quot;</span>

<span class="s">addons:</span>
<span class="s">  - name: vpc-cni</span>
<span class="s">    version: latest</span>
<span class="s">  - name: coredns</span>
<span class="s">    version: latest</span>
<span class="s">  - name: kube-proxy</span>
<span class="s">    version: latest</span>
<span class="s">  - name: aws-ebs-csi-driver</span>
<span class="s">    version: latest</span>
<span class="s">    serviceAccountRoleARN: &quot;AUTO_GENERATED&quot;</span>
<span class="s">EOF</span>

<span class="c1"># Create the EKS cluster</span>
eksctl<span class="w"> </span>create<span class="w"> </span>cluster<span class="w"> </span>-f<span class="w"> </span>cluster-config.yaml

<span class="c1"># This takes 15-20 minutes - good time for coffee!</span>
</code></pre></div>
<p><strong>What's happening during creation</strong>:
1. EKS control plane provisioning (managed by AWS)
2. Worker nodes launching across 3 AZs
3. IAM roles and policies creation
4. OIDC provider setup
5. Add-ons installation (VPC CNI, CoreDNS, kube-proxy, EBS CSI)</p>
<h3 id="step-22-configure-kubectl-access">Step 2.2: Configure kubectl Access</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Update kubeconfig</span>
aws<span class="w"> </span>eks<span class="w"> </span>update-kubeconfig<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span>us-east-1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>fawkes-production

<span class="c1"># Verify connectivity</span>
kubectl<span class="w"> </span>get<span class="w"> </span>nodes

<span class="c1"># Should show 6 nodes in Ready state:</span>
<span class="c1"># NAME                          STATUS   ROLES    AGE   VERSION</span>
<span class="c1"># ip-10-0-11-123.ec2.internal   Ready    &lt;none&gt;   2m    v1.28.x</span>
<span class="c1"># ip-10-0-11-124.ec2.internal   Ready    &lt;none&gt;   2m    v1.28.x</span>
<span class="c1"># ...</span>
</code></pre></div>
<h3 id="step-23-install-aws-load-balancer-controller">Step 2.3: Install AWS Load Balancer Controller</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Add Helm repository</span>
helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>eks<span class="w"> </span>https://aws.github.io/eks-charts
helm<span class="w"> </span>repo<span class="w"> </span>update

<span class="c1"># Get your cluster VPC ID</span>
<span class="nv">VPC_ID</span><span class="o">=</span><span class="k">$(</span>aws<span class="w"> </span>eks<span class="w"> </span>describe-cluster<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>fawkes-production<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s2">&quot;cluster.resourcesVpcConfig.vpcId&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>text<span class="k">)</span>

<span class="c1"># Install AWS Load Balancer Controller</span>
helm<span class="w"> </span>install<span class="w"> </span>aws-load-balancer-controller<span class="w"> </span>eks/aws-load-balancer-controller<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-n<span class="w"> </span>kube-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span><span class="nv">clusterName</span><span class="o">=</span>fawkes-production<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>serviceAccount.create<span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>serviceAccount.name<span class="o">=</span>aws-load-balancer-controller<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span><span class="nv">region</span><span class="o">=</span>us-east-1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span><span class="nv">vpcId</span><span class="o">=</span><span class="nv">$VPC_ID</span>

<span class="c1"># Verify installation</span>
kubectl<span class="w"> </span>get<span class="w"> </span>deployment<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>aws-load-balancer-controller

<span class="c1"># Should show:</span>
<span class="c1"># NAME                           READY   UP-TO-DATE   AVAILABLE   AGE</span>
<span class="c1"># aws-load-balancer-controller   2/2     2            2           1m</span>
</code></pre></div>
<h3 id="step-24-install-external-secrets-operator">Step 2.4: Install External Secrets Operator</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Add Helm repository</span>
helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>external-secrets<span class="w"> </span>https://charts.external-secrets.io
helm<span class="w"> </span>repo<span class="w"> </span>update

<span class="c1"># Create namespace</span>
kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>external-secrets-system

<span class="c1"># Install External Secrets Operator</span>
helm<span class="w"> </span>install<span class="w"> </span>external-secrets<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>external-secrets/external-secrets<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-n<span class="w"> </span>external-secrets-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span><span class="nv">installCRDs</span><span class="o">=</span><span class="nb">true</span>

<span class="c1"># Verify installation</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>external-secrets-system

<span class="c1"># Create SecretStore for AWS Secrets Manager</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | kubectl apply -f -</span>
<span class="s">apiVersion: external-secrets.io/v1beta1</span>
<span class="s">kind: SecretStore</span>
<span class="s">metadata:</span>
<span class="s">  name: aws-secrets-manager</span>
<span class="s">  namespace: fawkes-system</span>
<span class="s">spec:</span>
<span class="s">  provider:</span>
<span class="s">    aws:</span>
<span class="s">      service: SecretsManager</span>
<span class="s">      region: us-east-1</span>
<span class="s">      auth:</span>
<span class="s">        jwt:</span>
<span class="s">          serviceAccountRef:</span>
<span class="s">            name: external-secrets</span>
<span class="s">EOF</span>
</code></pre></div>
<h3 id="step-25-configure-cluster-autoscaler">Step 2.5: Configure Cluster Autoscaler</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Install Cluster Autoscaler</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/kubernetes/autoscaler/master/cluster-autoscaler/cloudprovider/aws/examples/cluster-autoscaler-autodiscover.yaml

<span class="c1"># Patch deployment with correct cluster name</span>
kubectl<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>patch<span class="w"> </span>deployment<span class="w"> </span>cluster-autoscaler<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="s1">&#39;{&quot;spec&quot;:{&quot;template&quot;:{&quot;metadata&quot;:{&quot;annotations&quot;:{&quot;cluster-autoscaler.kubernetes.io/safe-to-evict&quot;: &quot;false&quot;}}}}}&#39;</span>

kubectl<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nb">set</span><span class="w"> </span>image<span class="w"> </span>deployment/cluster-autoscaler<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>cluster-autoscaler<span class="o">=</span>registry.k8s.io/autoscaling/cluster-autoscaler:v1.28.0

<span class="c1"># Add cluster name</span>
kubectl<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>patch<span class="w"> </span>deployment<span class="w"> </span>cluster-autoscaler<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--type<span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="o">=</span><span class="s1">&#39;[{&quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/spec/template/spec/containers/0/command/-&quot;, &quot;value&quot;: &quot;--node-group-auto-discovery=asg:tag=k8s.io/cluster-autoscaler/enabled,k8s.io/cluster-autoscaler/fawkes-production&quot;}]&#39;</span>

<span class="c1"># Verify</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>cluster-autoscaler
</code></pre></div>
<p><strong>Validation</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check cluster status</span>
eksctl<span class="w"> </span>get<span class="w"> </span>cluster<span class="w"> </span>--name<span class="w"> </span>fawkes-production

<span class="c1"># Check nodes</span>
kubectl<span class="w"> </span>get<span class="w"> </span>nodes<span class="w"> </span>-o<span class="w"> </span>wide

<span class="c1"># Check system pods</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kube-system

<span class="c1"># Verify service accounts</span>
kubectl<span class="w"> </span>get<span class="w"> </span>sa<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>aws-load-balancer-controller
kubectl<span class="w"> </span>get<span class="w"> </span>sa<span class="w"> </span>-n<span class="w"> </span>external-secrets-system<span class="w"> </span>external-secrets
</code></pre></div></p>
<hr />
<h2 id="phase-3-database-and-storage">Phase 3: Database and Storage</h2>
<p><strong>Duration</strong>: 20 minutes
<strong>Goal</strong>: Deploy RDS PostgreSQL and configure storage classes</p>
<h3 id="step-31-create-rds-postgresql-instance">Step 3.1: Create RDS PostgreSQL Instance</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Get private subnet IDs</span>
<span class="nv">PRIVATE_SUBNET_1</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>private_subnet_ids<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.[0]&#39;</span><span class="k">)</span>
<span class="nv">PRIVATE_SUBNET_2</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>private_subnet_ids<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.[1]&#39;</span><span class="k">)</span>

<span class="c1"># Create DB subnet group</span>
aws<span class="w"> </span>rds<span class="w"> </span>create-db-subnet-group<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-subnet-group-name<span class="w"> </span>fawkes-production-db-subnet<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-subnet-group-description<span class="w"> </span><span class="s2">&quot;Fawkes Production DB Subnet Group&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subnet-ids<span class="w"> </span><span class="nv">$PRIVATE_SUBNET_1</span><span class="w"> </span><span class="nv">$PRIVATE_SUBNET_2</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--tags<span class="w"> </span><span class="nv">Key</span><span class="o">=</span>Environment,Value<span class="o">=</span>production<span class="w"> </span><span class="nv">Key</span><span class="o">=</span>Project,Value<span class="o">=</span>fawkes

<span class="c1"># Create security group for RDS</span>
<span class="nv">RDS_SG_ID</span><span class="o">=</span><span class="k">$(</span>aws<span class="w"> </span>ec2<span class="w"> </span>create-security-group<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--group-name<span class="w"> </span>fawkes-production-rds-sg<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--description<span class="w"> </span><span class="s2">&quot;Fawkes Production RDS Security Group&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--vpc-id<span class="w"> </span><span class="nv">$VPC_ID</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>text<span class="k">)</span>

<span class="c1"># Allow PostgreSQL access from EKS nodes</span>
<span class="nv">EKS_NODE_SG</span><span class="o">=</span><span class="k">$(</span>aws<span class="w"> </span>eks<span class="w"> </span>describe-cluster<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>fawkes-production<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s2">&quot;cluster.resourcesVpcConfig.clusterSecurityGroupId&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>text<span class="k">)</span>

aws<span class="w"> </span>ec2<span class="w"> </span>authorize-security-group-ingress<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--group-id<span class="w"> </span><span class="nv">$RDS_SG_ID</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--protocol<span class="w"> </span>tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--port<span class="w"> </span><span class="m">5432</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--source-group<span class="w"> </span><span class="nv">$EKS_NODE_SG</span>

<span class="c1"># Create RDS instance</span>
aws<span class="w"> </span>rds<span class="w"> </span>create-db-instance<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-class<span class="w"> </span>db.m5.large<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--engine<span class="w"> </span>postgres<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--engine-version<span class="w"> </span><span class="m">15</span>.4<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--master-username<span class="w"> </span>fawkesadmin<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--master-user-password<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DB_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--allocated-storage<span class="w"> </span><span class="m">500</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--storage-type<span class="w"> </span>gp3<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--storage-encrypted<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-subnet-group-name<span class="w"> </span>fawkes-production-db-subnet<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--vpc-security-group-ids<span class="w"> </span><span class="nv">$RDS_SG_ID</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--backup-retention-period<span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--preferred-backup-window<span class="w"> </span><span class="s2">&quot;03:00-04:00&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--preferred-maintenance-window<span class="w"> </span><span class="s2">&quot;sun:04:00-sun:05:00&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--multi-az<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--auto-minor-version-upgrade<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--publicly-accessible<span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--tags<span class="w"> </span><span class="nv">Key</span><span class="o">=</span>Name,Value<span class="o">=</span>fawkes-production-db<span class="w"> </span><span class="nv">Key</span><span class="o">=</span>Environment,Value<span class="o">=</span>production

<span class="c1"># This takes 10-15 minutes - continue with next steps while it provisions</span>
</code></pre></div>
<h3 id="step-32-configure-kubernetes-storage-classes">Step 3.2: Configure Kubernetes Storage Classes</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create storage class for general purpose SSD (gp3)</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | kubectl apply -f -</span>
<span class="s">apiVersion: storage.k8s.io/v1</span>
<span class="s">kind: StorageClass</span>
<span class="s">metadata:</span>
<span class="s">  name: gp3</span>
<span class="s">  annotations:</span>
<span class="s">    storageclass.kubernetes.io/is-default-class: &quot;true&quot;</span>
<span class="s">provisioner: ebs.csi.aws.com</span>
<span class="s">parameters:</span>
<span class="s">  type: gp3</span>
<span class="s">  iops: &quot;3000&quot;</span>
<span class="s">  throughput: &quot;125&quot;</span>
<span class="s">  encrypted: &quot;true&quot;</span>
<span class="s">volumeBindingMode: WaitForFirstConsumer</span>
<span class="s">allowVolumeExpansion: true</span>
<span class="s">---</span>
<span class="s">apiVersion: storage.k8s.io/v1</span>
<span class="s">kind: StorageClass</span>
<span class="s">metadata:</span>
<span class="s">  name: gp3-retain</span>
<span class="s">provisioner: ebs.csi.aws.com</span>
<span class="s">parameters:</span>
<span class="s">  type: gp3</span>
<span class="s">  iops: &quot;3000&quot;</span>
<span class="s">  throughput: &quot;125&quot;</span>
<span class="s">  encrypted: &quot;true&quot;</span>
<span class="s">reclaimPolicy: Retain</span>
<span class="s">volumeBindingMode: WaitForFirstConsumer</span>
<span class="s">allowVolumeExpansion: true</span>
<span class="s">EOF</span>

<span class="c1"># Verify storage classes</span>
kubectl<span class="w"> </span>get<span class="w"> </span>storageclass
</code></pre></div>
<h3 id="step-33-wait-for-rds-instance-and-get-endpoint">Step 3.3: Wait for RDS Instance and Get Endpoint</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Wait for RDS instance to be available</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Waiting for RDS instance to be available (this takes ~15 minutes)...&quot;</span>
aws<span class="w"> </span>rds<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>db-instance-available<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db

<span class="c1"># Get RDS endpoint</span>
<span class="nv">RDS_ENDPOINT</span><span class="o">=</span><span class="k">$(</span>aws<span class="w"> </span>rds<span class="w"> </span>describe-db-instances<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s1">&#39;DBInstances[0].Endpoint.Address&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>text<span class="k">)</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;RDS Endpoint: </span><span class="nv">$RDS_ENDPOINT</span><span class="s2">&quot;</span>

<span class="c1"># Store RDS endpoint in Secrets Manager for easy access</span>
aws<span class="w"> </span>secretsmanager<span class="w"> </span>create-secret<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>fawkes/production/db-endpoint<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--description<span class="w"> </span><span class="s2">&quot;Fawkes Production Database Endpoint&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--secret-string<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$RDS_ENDPOINT</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Create Kubernetes secret for database connection</span>
kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>fawkes-system

kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>postgres-credentials<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">host</span><span class="o">=</span><span class="nv">$RDS_ENDPOINT</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">port</span><span class="o">=</span><span class="m">5432</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">database</span><span class="o">=</span>postgres<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">username</span><span class="o">=</span>fawkesadmin<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">password</span><span class="o">=</span><span class="nv">$DB_PASSWORD</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-n<span class="w"> </span>fawkes-system
</code></pre></div>
<h3 id="step-34-initialize-database-schema">Step 3.4: Initialize Database Schema</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Connect to RDS and create databases for each platform component</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>init-databases.sql<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">-- Create databases for platform components</span>
<span class="s">CREATE DATABASE backstage;</span>
<span class="s">CREATE DATABASE jenkins;</span>
<span class="s">CREATE DATABASE argocd;</span>
<span class="s">CREATE DATABASE harbor;</span>
<span class="s">CREATE DATABASE mattermost;</span>
<span class="s">CREATE DATABASE focalboard;</span>

<span class="s">-- Create extensions</span>
<span class="s">\c backstage</span>
<span class="s">CREATE EXTENSION IF NOT EXISTS &quot;uuid-ossp&quot;;</span>

<span class="s">\c jenkins</span>
<span class="s">CREATE EXTENSION IF NOT EXISTS &quot;uuid-ossp&quot;;</span>

<span class="s">\c argocd</span>
<span class="s">CREATE EXTENSION IF NOT EXISTS &quot;uuid-ossp&quot;;</span>

<span class="s">\c harbor</span>
<span class="s">CREATE EXTENSION IF NOT EXISTS &quot;uuid-ossp&quot;;</span>

<span class="s">\c mattermost</span>
<span class="s">CREATE EXTENSION IF NOT EXISTS &quot;uuid-ossp&quot;;</span>

<span class="s">\c focalboard</span>
<span class="s">CREATE EXTENSION IF NOT EXISTS &quot;uuid-ossp&quot;;</span>
<span class="s">EOF</span>

<span class="c1"># Run via temporary pod</span>
kubectl<span class="w"> </span>run<span class="w"> </span>postgres-client<span class="w"> </span>--rm<span class="w"> </span>-i<span class="w"> </span>--tty<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--image<span class="w"> </span>postgres:15<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--restart<span class="o">=</span>Never<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-n<span class="w"> </span>fawkes-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--env<span class="o">=</span><span class="s2">&quot;PGPASSWORD=</span><span class="nv">$DB_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--<span class="w"> </span>psql<span class="w"> </span>-h<span class="w"> </span><span class="nv">$RDS_ENDPOINT</span><span class="w"> </span>-U<span class="w"> </span>fawkesadmin<span class="w"> </span>-d<span class="w"> </span>postgres<span class="w"> </span>-f<span class="w"> </span>/dev/stdin<span class="w"> </span>&lt;<span class="w"> </span>init-databases.sql

<span class="c1"># Verify databases were created</span>
kubectl<span class="w"> </span>run<span class="w"> </span>postgres-client<span class="w"> </span>--rm<span class="w"> </span>-i<span class="w"> </span>--tty<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--image<span class="w"> </span>postgres:15<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--restart<span class="o">=</span>Never<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-n<span class="w"> </span>fawkes-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--env<span class="o">=</span><span class="s2">&quot;PGPASSWORD=</span><span class="nv">$DB_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--<span class="w"> </span>psql<span class="w"> </span>-h<span class="w"> </span><span class="nv">$RDS_ENDPOINT</span><span class="w"> </span>-U<span class="w"> </span>fawkesadmin<span class="w"> </span>-d<span class="w"> </span>postgres<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;\l&quot;</span>
</code></pre></div>
<p><strong>Validation</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Verify RDS instance is running</span>
aws<span class="w"> </span>rds<span class="w"> </span>describe-db-instances<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s1">&#39;DBInstances[0].DBInstanceStatus&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>text
<span class="c1"># Should output: available</span>

<span class="c1"># Test database connectivity</span>
kubectl<span class="w"> </span>run<span class="w"> </span>postgres-test<span class="w"> </span>--rm<span class="w"> </span>-i<span class="w"> </span>--tty<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--image<span class="w"> </span>postgres:15<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--restart<span class="o">=</span>Never<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-n<span class="w"> </span>fawkes-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--env<span class="o">=</span><span class="s2">&quot;PGPASSWORD=</span><span class="nv">$DB_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--<span class="w"> </span>psql<span class="w"> </span>-h<span class="w"> </span><span class="nv">$RDS_ENDPOINT</span><span class="w"> </span>-U<span class="w"> </span>fawkesadmin<span class="w"> </span>-d<span class="w"> </span>postgres<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;SELECT version();&quot;</span>

<span class="c1"># Verify storage classes</span>
kubectl<span class="w"> </span>get<span class="w"> </span>storageclass
</code></pre></div></p>
<hr />
<h2 id="phase-4-platform-services">Phase 4: Platform Services</h2>
<p><strong>Duration</strong>: 45-60 minutes
<strong>Goal</strong>: Deploy core Fawkes platform components</p>
<h3 id="step-41-create-namespaces">Step 4.1: Create Namespaces</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create namespaces for platform components</span>
kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>backstage
kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>jenkins
kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>argocd
kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>harbor
kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>monitoring
kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>mattermost
kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>focalboard

<span class="c1"># Label namespaces for better organization</span>
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>backstage<span class="w"> </span>app.kubernetes.io/part-of<span class="o">=</span>fawkes
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>jenkins<span class="w"> </span>app.kubernetes.io/part-of<span class="o">=</span>fawkes
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>argocd<span class="w"> </span>app.kubernetes.io/part-of<span class="o">=</span>fawkes
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>harbor<span class="w"> </span>app.kubernetes.io/part-of<span class="o">=</span>fawkes
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>monitoring<span class="w"> </span>app.kubernetes.io/part-of<span class="o">=</span>fawkes
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>mattermost<span class="w"> </span>app.kubernetes.io/part-of<span class="o">=</span>fawkes
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>focalboard<span class="w"> </span>app.kubernetes.io/part-of<span class="o">=</span>fawkes
</code></pre></div>
<h3 id="step-42-deploy-argocd-gitops-engine">Step 4.2: Deploy ArgoCD (GitOps Engine)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Add ArgoCD Helm repository</span>
helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>argo<span class="w"> </span>https://argoproj.github.io/argo-helm
helm<span class="w"> </span>repo<span class="w"> </span>update

<span class="c1"># Create values file for ArgoCD</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>argocd-values.yaml<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">global:</span>
<span class="s">  domain: argocd.fawkes.yourdomain.com</span>

<span class="s">server:</span>
<span class="s">  service:</span>
<span class="s">    type: ClusterIP</span>
<span class="s">  ingress:</span>
<span class="s">    enabled: true</span>
<span class="s">    ingressClassName: alb</span>
<span class="s">    annotations:</span>
<span class="s">      alb.ingress.kubernetes.io/scheme: internet-facing</span>
<span class="s">      alb.ingress.kubernetes.io/target-type: ip</span>
<span class="s">      alb.ingress.kubernetes.io/certificate-arn: YOUR_ACM_CERT_ARN</span>
<span class="s">      alb.ingress.kubernetes.io/listen-ports: &#39;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#39;</span>
<span class="s">      alb.ingress.kubernetes.io/ssl-redirect: &#39;443&#39;</span>
<span class="s">    hosts:</span>
<span class="s">      - argocd.fawkes.yourdomain.com</span>

<span class="s">configs:</span>
<span class="s">  secret:</span>
<span class="s">    argocdServerAdminPassword: &#39;$ARGOCD_PASSWORD_BCRYPT&#39;</span>
<span class="s">  cm:</span>
<span class="s">    url: https://argocd.fawkes.yourdomain.com</span>
<span class="s">    dex.config: |</span>
<span class="s">      connectors:</span>
<span class="s">        - type: github</span>
<span class="s">          id: github</span>
<span class="s">          name: GitHub</span>
<span class="s">          config:</span>
<span class="s">            clientID: YOUR_GITHUB_OAUTH_CLIENT_ID</span>
<span class="s">            clientSecret: YOUR_GITHUB_OAUTH_CLIENT_SECRET</span>
<span class="s">            orgs:</span>
<span class="s">              - name: your-github-org</span>

<span class="s">redis:</span>
<span class="s">  enabled: true</span>

<span class="s">repoServer:</span>
<span class="s">  replicas: 2</span>

<span class="s">applicationSet:</span>
<span class="s">  enabled: true</span>
<span class="s">EOF</span>

<span class="c1"># Hash the ArgoCD password for storage</span>
<span class="nv">ARGOCD_PASSWORD_BCRYPT</span><span class="o">=</span><span class="k">$(</span>htpasswd<span class="w"> </span>-nbBC<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$ARGOCD_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;:\n&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/$2y/$2a/&#39;</span><span class="k">)</span>

<span class="c1"># Replace in values file</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s|\$ARGOCD_PASSWORD_BCRYPT|</span><span class="nv">$ARGOCD_PASSWORD_BCRYPT</span><span class="s2">|g&quot;</span><span class="w"> </span>argocd-values.yaml

<span class="c1"># Install ArgoCD</span>
helm<span class="w"> </span>install<span class="w"> </span>argocd<span class="w"> </span>argo/argo-cd<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>argocd<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--values<span class="w"> </span>argocd-values.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--version<span class="w"> </span><span class="m">5</span>.51.0

<span class="c1"># Wait for ArgoCD to be ready</span>
kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available<span class="w"> </span>--timeout<span class="o">=</span>300s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deployment/argocd-server<span class="w"> </span>-n<span class="w"> </span>argocd

<span class="c1"># Get ArgoCD admin password (if you didn&#39;t set it)</span>
<span class="nv">ARGOCD_ADMIN_PASSWORD</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>-n<span class="w"> </span>argocd<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>argocd-initial-admin-secret<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.data.password}&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;ArgoCD Admin Password: </span><span class="nv">$ARGOCD_ADMIN_PASSWORD</span><span class="s2">&quot;</span>

<span class="c1"># Get ArgoCD URL</span>
kubectl<span class="w"> </span>get<span class="w"> </span>ingress<span class="w"> </span>-n<span class="w"> </span>argocd
</code></pre></div>
<h3 id="step-43-deploy-harbor-container-registry">Step 4.3: Deploy Harbor (Container Registry)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Add Harbor Helm repository</span>
helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>harbor<span class="w"> </span>https://helm.goharbor.io
helm<span class="w"> </span>repo<span class="w"> </span>update

<span class="c1"># Create values file for Harbor</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>harbor-values.yaml<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">expose:</span>
<span class="s">  type: ingress</span>
<span class="s">  tls:</span>
<span class="s">    enabled: true</span>
<span class="s">    certSource: secret</span>
<span class="s">    secret:</span>
<span class="s">      secretName: harbor-tls</span>
<span class="s">  ingress:</span>
<span class="s">    className: alb</span>
<span class="s">    annotations:</span>
<span class="s">      alb.ingress.kubernetes.io/scheme: internet-facing</span>
<span class="s">      alb.ingress.kubernetes.io/target-type: ip</span>
<span class="s">      alb.ingress.kubernetes.io/certificate-arn: YOUR_ACM_CERT_ARN</span>
<span class="s">      alb.ingress.kubernetes.io/listen-ports: &#39;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#39;</span>
<span class="s">      alb.ingress.kubernetes.io/ssl-redirect: &#39;443&#39;</span>
<span class="s">    hosts:</span>
<span class="s">      core: harbor.fawkes.yourdomain.com</span>

<span class="s">externalURL: https://harbor.fawkes.yourdomain.com</span>

<span class="s">persistence:</span>
<span class="s">  enabled: true</span>
<span class="s">  persistentVolumeClaim:</span>
<span class="s">    registry:</span>
<span class="s">      storageClass: gp3</span>
<span class="s">      size: 200Gi</span>
<span class="s">    chartmuseum:</span>
<span class="s">      storageClass: gp3</span>
<span class="s">      size: 5Gi</span>
<span class="s">    jobservice:</span>
<span class="s">      jobLog:</span>
<span class="s">        storageClass: gp3</span>
<span class="s">        size: 1Gi</span>
<span class="s">    database:</span>
<span class="s">      storageClass: gp3</span>
<span class="s">      size: 1Gi</span>
<span class="s">    redis:</span>
<span class="s">      storageClass: gp3</span>
<span class="s">      size: 1Gi</span>
<span class="s">    trivy:</span>
<span class="s">      storageClass: gp3</span>
<span class="s">      size: 5Gi</span>

<span class="s">database:</span>
<span class="s">  type: external</span>
<span class="s">  external:</span>
<span class="s">    host: $RDS_ENDPOINT</span>
<span class="s">    port: 5432</span>
<span class="s">    username: fawkesadmin</span>
<span class="s">    password: $DB_PASSWORD</span>
<span class="s">    coreDatabase: harbor</span>
<span class="s">    notaryServerDatabase: notary_server</span>
<span class="s">    notarySignerDatabase: notary_signer</span>

<span class="s">harborAdminPassword: $(openssl rand -base64 16)</span>

<span class="s">trivy:</span>
<span class="s">  enabled: true</span>

<span class="s">notary:</span>
<span class="s">  enabled: false</span>

<span class="s">metrics:</span>
<span class="s">  enabled: true</span>
<span class="s">EOF</span>

<span class="c1"># Install Harbor</span>
helm<span class="w"> </span>install<span class="w"> </span>harbor<span class="w"> </span>harbor/harbor<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>harbor<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--values<span class="w"> </span>harbor-values.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--version<span class="w"> </span><span class="m">1</span>.13.0

<span class="c1"># Wait for Harbor to be ready (takes 5-10 minutes)</span>
kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available<span class="w"> </span>--timeout<span class="o">=</span>600s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deployment/harbor-core<span class="w"> </span>-n<span class="w"> </span>harbor
</code></pre></div>
<h3 id="step-44-deploy-jenkins-cicd">Step 4.4: Deploy Jenkins (CI/CD)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Add Jenkins Helm repository</span>
helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>jenkins<span class="w"> </span>https://charts.jenkins.io
helm<span class="w"> </span>repo<span class="w"> </span>update

<span class="c1"># Create values file for Jenkins</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>jenkins-values.yaml<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">controller:</span>
<span class="s">  adminPassword: $JENKINS_PASSWORD</span>

<span class="s">  ingress:</span>
<span class="s">    enabled: true</span>
<span class="s">    ingressClassName: alb</span>
<span class="s">    annotations:</span>
<span class="s">      alb.ingress.kubernetes.io/scheme: internet-facing</span>
<span class="s">      alb.ingress.kubernetes.io/target-type: ip</span>
<span class="s">      alb.ingress.kubernetes.io/certificate-arn: YOUR_ACM_CERT_ARN</span>
<span class="s">      alb.ingress.kubernetes.io/listen-ports: &#39;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#39;</span>
<span class="s">      alb.ingress.kubernetes.io/ssl-redirect: &#39;443&#39;</span>
<span class="s">    hostName: jenkins.fawkes.yourdomain.com</span>

<span class="s">  resources:</span>
<span class="s">    requests:</span>
<span class="s">      cpu: &quot;1000m&quot;</span>
<span class="s">      memory: &quot;2Gi&quot;</span>
<span class="s">    limits:</span>
<span class="s">      cpu: &quot;2000m&quot;</span>
<span class="s">      memory: &quot;4Gi&quot;</span>

<span class="s">  JCasC:</span>
<span class="s">    configScripts:</span>
<span class="s">      aws-credentials: |</span>
<span class="s">        credentials:</span>
<span class="s">          system:</span>
<span class="s">            domainCredentials:</span>
<span class="s">              - credentials:</span>
<span class="s">                - aws:</span>
<span class="s">                    accessKey: &quot;${AWS_ACCESS_KEY_ID}&quot;</span>
<span class="s">                    description: &quot;AWS Credentials&quot;</span>
<span class="s">                    id: &quot;aws-credentials&quot;</span>
<span class="s">                    iamRoleArn: &quot;&quot;</span>
<span class="s">                    scope: GLOBAL</span>
<span class="s">                    secretKey: &quot;${AWS_SECRET_ACCESS_KEY}&quot;</span>
<span class="s">      kubernetes-cloud: |</span>
<span class="s">        jenkins:</span>
<span class="s">          clouds:</span>
<span class="s">            - kubernetes:</span>
<span class="s">                name: &quot;kubernetes&quot;</span>
<span class="s">                serverUrl: &quot;https://kubernetes.default&quot;</span>
<span class="s">                namespace: &quot;jenkins&quot;</span>
<span class="s">                jenkinsUrl: &quot;http://jenkins:8080&quot;</span>
<span class="s">                jenkinsTunnel: &quot;jenkins-agent:50000&quot;</span>
<span class="s">                containerCapStr: &quot;10&quot;</span>
<span class="s">                templates:</span>
<span class="s">                  - name: &quot;jenkins-agent&quot;</span>
<span class="s">                    namespace: &quot;jenkins&quot;</span>
<span class="s">                    label: &quot;jenkins-agent&quot;</span>
<span class="s">                    containers:</span>
<span class="s">                      - name: &quot;jnlp&quot;</span>
<span class="s">                        image: &quot;jenkins/inbound-agent:latest&quot;</span>
<span class="s">                        alwaysPullImage: true</span>
<span class="s">                        workingDir: &quot;/home/jenkins/agent&quot;</span>
<span class="s">                        ttyEnabled: true</span>

<span class="s">  installPlugins:</span>
<span class="s">    - kubernetes:latest</span>
<span class="s">    - workflow-aggregator:latest</span>
<span class="s">    - git:latest</span>
<span class="s">    - configuration-as-code:latest</span>
<span class="s">    - aws-credentials:latest</span>
<span class="s">    - pipeline-aws:latest</span>
<span class="s">    - docker-workflow:latest</span>
<span class="s">    - blueocean:latest</span>

<span class="s">persistence:</span>
<span class="s">  enabled: true</span>
<span class="s">  storageClass: gp3-retain</span>
<span class="s">  size: 100Gi</span>

<span class="s">agent:</span>
<span class="s">  enabled: true</span>
<span class="s">  resources:</span>
<span class="s">    requests:</span>
<span class="s">      cpu: &quot;500m&quot;</span>
<span class="s">      memory: &quot;1Gi&quot;</span>
<span class="s">    limits:</span>
<span class="s">      cpu: &quot;1000m&quot;</span>
<span class="s">      memory: &quot;2Gi&quot;</span>
<span class="s">EOF</span>

<span class="c1"># Install Jenkins</span>
helm<span class="w"> </span>install<span class="w"> </span>jenkins<span class="w"> </span>jenkins/jenkins<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>jenkins<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--values<span class="w"> </span>jenkins-values.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--version<span class="w"> </span><span class="m">4</span>.6.0

<span class="c1"># Wait for Jenkins to be ready</span>
kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available<span class="w"> </span>--timeout<span class="o">=</span>600s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deployment/jenkins<span class="w"> </span>-n<span class="w"> </span>jenkins

<span class="c1"># Get Jenkins admin password (if you didn&#39;t set it)</span>
<span class="nv">JENKINS_ADMIN_PASSWORD</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>--namespace<span class="w"> </span>jenkins<span class="w"> </span>-it<span class="w"> </span>svc/jenkins<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-c<span class="w"> </span>jenkins<span class="w"> </span>--<span class="w"> </span>/bin/cat<span class="w"> </span>/run/secrets/additional/chart-admin-password<span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Jenkins Admin Password: </span><span class="nv">$JENKINS_ADMIN_PASSWORD</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="step-45-deploy-backstage-developer-portal">Step 4.5: Deploy Backstage (Developer Portal)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create Backstage configuration</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>backstage-values.yaml<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">image:</span>
<span class="s">  registry: ghcr.io</span>
<span class="s">  repository: backstage/backstage</span>
<span class="s">  tag: latest</span>

<span class="s">backstage:</span>
<span class="s">  image:</span>
<span class="s">    pullPolicy: Always</span>

<span class="s">  extraEnvVars:</span>
<span class="s">    - name: POSTGRES_HOST</span>
<span class="s">      value: $RDS_ENDPOINT</span>
<span class="s">    - name: POSTGRES_PORT</span>
<span class="s">      value: &quot;5432&quot;</span>
<span class="s">    - name: POSTGRES_USER</span>
<span class="s">      value: fawkesadmin</span>
<span class="s">    - name: POSTGRES_PASSWORD</span>
<span class="s">      value: $DB_PASSWORD</span>

<span class="s">  appConfig:</span>
<span class="s">    app:</span>
<span class="s">      title: Fawkes Platform</span>
<span class="s">      baseUrl: https://backstage.fawkes.yourdomain.com</span>

<span class="s">    backend:</span>
<span class="s">      baseUrl: https://backstage.fawkes.yourdomain.com</span>
<span class="s">      listen:</span>
<span class="s">        port: 7007</span>
<span class="s">      csp:</span>
<span class="s">        connect-src: [&quot;&#39;self&#39;&quot;, &#39;http:&#39;, &#39;https:&#39;]</span>
<span class="s">      cors:</span>
<span class="s">        origin: https://backstage.fawkes.yourdomain.com</span>
<span class="s">        methods: [GET, POST, PUT, DELETE]</span>
<span class="s">        credentials: true</span>
<span class="s">      database:</span>
<span class="s">        client: pg</span>
<span class="s">        connection:</span>
<span class="s">          host: \${POSTGRES_HOST}</span>
<span class="s">          port: \${POSTGRES_PORT}</span>
<span class="s">          user: \${POSTGRES_USER}</span>
<span class="s">          password: \${POSTGRES_PASSWORD}</span>
<span class="s">          database: backstage</span>

<span class="s">    catalog:</span>
<span class="s">      rules:</span>
<span class="s">        - allow: [Component, System, API, Group, User, Resource, Location]</span>
<span class="s">      locations:</span>
<span class="s">        - type: url</span>
<span class="s">          target: https://github.com/paruff/fawkes/blob/master/catalog-info.yaml</span>

<span class="s">    auth:</span>
<span class="s">      providers:</span>
<span class="s">        github:</span>
<span class="s">          development:</span>
<span class="s">            clientId: \${GITHUB_CLIENT_ID}</span>
<span class="s">            clientSecret: \${GITHUB_CLIENT_SECRET}</span>

<span class="s">ingress:</span>
<span class="s">  enabled: true</span>
<span class="s">  className: alb</span>
<span class="s">  annotations:</span>
<span class="s">    alb.ingress.kubernetes.io/scheme: internet-facing</span>
<span class="s">    alb.ingress.kubernetes.io/target-type: ip</span>
<span class="s">    alb.ingress.kubernetes.io/certificate-arn: YOUR_ACM_CERT_ARN</span>
<span class="s">    alb.ingress.kubernetes.io/listen-ports: &#39;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#39;</span>
<span class="s">    alb.ingress.kubernetes.io/ssl-redirect: &#39;443&#39;</span>
<span class="s">  host: backstage.fawkes.yourdomain.com</span>

<span class="s">postgresql:</span>
<span class="s">  enabled: false  # Using external RDS</span>

<span class="s">resources:</span>
<span class="s">  requests:</span>
<span class="s">    cpu: 500m</span>
<span class="s">    memory: 1Gi</span>
<span class="s">  limits:</span>
<span class="s">    cpu: 1000m</span>
<span class="s">    memory: 2Gi</span>
<span class="s">EOF</span>

<span class="c1"># Install Backstage</span>
helm<span class="w"> </span>install<span class="w"> </span>backstage<span class="w"> </span>backstage/backstage<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>backstage<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--values<span class="w"> </span>backstage-values.yaml

<span class="c1"># Wait for Backstage to be ready</span>
kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available<span class="w"> </span>--timeout<span class="o">=</span>600s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deployment/backstage<span class="w"> </span>-n<span class="w"> </span>backstage
</code></pre></div>
<h3 id="step-46-deploy-mattermost-team-collaboration">Step 4.6: Deploy Mattermost (Team Collaboration)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Add Mattermost Helm repository</span>
helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>mattermost<span class="w"> </span>https://helm.mattermost.com
helm<span class="w"> </span>repo<span class="w"> </span>update

<span class="c1"># Create values file</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>mattermost-values.yaml<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">ingress:</span>
<span class="s">  enabled: true</span>
<span class="s">  className: alb</span>
<span class="s">  annotations:</span>
<span class="s">    alb.ingress.kubernetes.io/scheme: internet-facing</span>
<span class="s">    alb.ingress.kubernetes.io/target-type: ip</span>
<span class="s">    alb.ingress.kubernetes.io/certificate-arn: YOUR_ACM_CERT_ARN</span>
<span class="s">    alb.ingress.kubernetes.io/listen-ports: &#39;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#39;</span>
<span class="s">    alb.ingress.kubernetes.io/ssl-redirect: &#39;443&#39;</span>
<span class="s">  hosts:</span>
<span class="s">    - mattermost.fawkes.yourdomain.com</span>

<span class="s">mysql:</span>
<span class="s">  enabled: false</span>

<span class="s">externalDB:</span>
<span class="s">  enabled: true</span>
<span class="s">  externalDriverType: &quot;postgres&quot;</span>
<span class="s">  externalConnectionString: &quot;postgres://fawkesadmin:$DB_PASSWORD@$RDS_ENDPOINT:5432/mattermost?sslmode=require&quot;</span>

<span class="s">persistence:</span>
<span class="s">  data:</span>
<span class="s">    enabled: true</span>
<span class="s">    size: 50Gi</span>
<span class="s">    storageClass: gp3</span>
<span class="s">  plugins:</span>
<span class="s">    enabled: true</span>
<span class="s">    size: 5Gi</span>
<span class="s">    storageClass: gp3</span>

<span class="s">resources:</span>
<span class="s">  requests:</span>
<span class="s">    cpu: 500m</span>
<span class="s">    memory: 1Gi</span>
<span class="s">  limits:</span>
<span class="s">    cpu: 1000m</span>
<span class="s">    memory: 2Gi</span>
<span class="s">EOF</span>

<span class="c1"># Install Mattermost</span>
helm<span class="w"> </span>install<span class="w"> </span>mattermost<span class="w"> </span>mattermost/mattermost-team-edition<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>mattermost<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--values<span class="w"> </span>mattermost-values.yaml

<span class="c1"># Wait for Mattermost to be ready</span>
kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available<span class="w"> </span>--timeout<span class="o">=</span>600s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deployment/mattermost<span class="w"> </span>-n<span class="w"> </span>mattermost
</code></pre></div>
<h3 id="step-47-deploy-focalboard-project-tracking">Step 4.7: Deploy Focalboard (Project Tracking)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create Focalboard deployment</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>focalboard-deployment.yaml<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: ConfigMap</span>
<span class="s">metadata:</span>
<span class="s">  name: focalboard-config</span>
<span class="s">  namespace: focalboard</span>
<span class="s">data:</span>
<span class="s">  config.json: |</span>
<span class="s">    {</span>
<span class="s">      &quot;serverRoot&quot;: &quot;https://focalboard.fawkes.yourdomain.com&quot;,</span>
<span class="s">      &quot;port&quot;: 8000,</span>
<span class="s">      &quot;dbtype&quot;: &quot;postgres&quot;,</span>
<span class="s">      &quot;dbconfig&quot;: &quot;postgres://fawkesadmin:$DB_PASSWORD@$RDS_ENDPOINT:5432/focalboard?sslmode=require&quot;,</span>
<span class="s">      &quot;useSSL&quot;: false,</span>
<span class="s">      &quot;webpath&quot;: &quot;./pack&quot;,</span>
<span class="s">      &quot;filespath&quot;: &quot;./files&quot;,</span>
<span class="s">      &quot;telemetry&quot;: true,</span>
<span class="s">      &quot;session_expire_time&quot;: 2592000,</span>
<span class="s">      &quot;session_refresh_time&quot;: 18000,</span>
<span class="s">      &quot;localOnly&quot;: false,</span>
<span class="s">      &quot;enableLocalMode&quot;: true,</span>
<span class="s">      &quot;localModeSocketLocation&quot;: &quot;/var/tmp/focalboard_local.socket&quot;</span>
<span class="s">    }</span>
<span class="s">---</span>
<span class="s">apiVersion: apps/v1</span>
<span class="s">kind: Deployment</span>
<span class="s">metadata:</span>
<span class="s">  name: focalboard</span>
<span class="s">  namespace: focalboard</span>
<span class="s">spec:</span>
<span class="s">  replicas: 2</span>
<span class="s">  selector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      app: focalboard</span>
<span class="s">  template:</span>
<span class="s">    metadata:</span>
<span class="s">      labels:</span>
<span class="s">        app: focalboard</span>
<span class="s">    spec:</span>
<span class="s">      containers:</span>
<span class="s">      - name: focalboard</span>
<span class="s">        image: mattermost/focalboard:latest</span>
<span class="s">        ports:</span>
<span class="s">        - containerPort: 8000</span>
<span class="s">        volumeMounts:</span>
<span class="s">        - name: config</span>
<span class="s">          mountPath: /opt/focalboard/config.json</span>
<span class="s">          subPath: config.json</span>
<span class="s">        - name: data</span>
<span class="s">          mountPath: /opt/focalboard/files</span>
<span class="s">        resources:</span>
<span class="s">          requests:</span>
<span class="s">            cpu: 250m</span>
<span class="s">            memory: 512Mi</span>
<span class="s">          limits:</span>
<span class="s">            cpu: 500m</span>
<span class="s">            memory: 1Gi</span>
<span class="s">      volumes:</span>
<span class="s">      - name: config</span>
<span class="s">        configMap:</span>
<span class="s">          name: focalboard-config</span>
<span class="s">      - name: data</span>
<span class="s">        persistentVolumeClaim:</span>
<span class="s">          claimName: focalboard-data</span>
<span class="s">---</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Service</span>
<span class="s">metadata:</span>
<span class="s">  name: focalboard</span>
<span class="s">  namespace: focalboard</span>
<span class="s">spec:</span>
<span class="s">  selector:</span>
<span class="s">    app: focalboard</span>
<span class="s">  ports:</span>
<span class="s">  - port: 8000</span>
<span class="s">    targetPort: 8000</span>
<span class="s">---</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: PersistentVolumeClaim</span>
<span class="s">metadata:</span>
<span class="s">  name: focalboard-data</span>
<span class="s">  namespace: focalboard</span>
<span class="s">spec:</span>
<span class="s">  accessModes:</span>
<span class="s">    - ReadWriteOnce</span>
<span class="s">  storageClassName: gp3</span>
<span class="s">  resources:</span>
<span class="s">    requests:</span>
<span class="s">      storage: 20Gi</span>
<span class="s">---</span>
<span class="s">apiVersion: networking.k8s.io/v1</span>
<span class="s">kind: Ingress</span>
<span class="s">metadata:</span>
<span class="s">  name: focalboard</span>
<span class="s">  namespace: focalboard</span>
<span class="s">  annotations:</span>
<span class="s">    alb.ingress.kubernetes.io/scheme: internet-facing</span>
<span class="s">    alb.ingress.kubernetes.io/target-type: ip</span>
<span class="s">    alb.ingress.kubernetes.io/certificate-arn: YOUR_ACM_CERT_ARN</span>
<span class="s">    alb.ingress.kubernetes.io/listen-ports: &#39;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#39;</span>
<span class="s">    alb.ingress.kubernetes.io/ssl-redirect: &#39;443&#39;</span>
<span class="s">spec:</span>
<span class="s">  ingressClassName: alb</span>
<span class="s">  rules:</span>
<span class="s">  - host: focalboard.fawkes.yourdomain.com</span>
<span class="s">    http:</span>
<span class="s">      paths:</span>
<span class="s">      - path: /</span>
<span class="s">        pathType: Prefix</span>
<span class="s">        backend:</span>
<span class="s">          service:</span>
<span class="s">            name: focalboard</span>
<span class="s">            port:</span>
<span class="s">              number: 8000</span>
<span class="s">EOF</span>

<span class="c1"># Apply Focalboard manifests</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>focalboard-deployment.yaml

<span class="c1"># Wait for Focalboard to be ready</span>
kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available<span class="w"> </span>--timeout<span class="o">=</span>300s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deployment/focalboard<span class="w"> </span>-n<span class="w"> </span>focalboard
</code></pre></div>
<p><strong>Validation</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check all platform services are running</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>argocd
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>harbor
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>jenkins
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>backstage
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>mattermost
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>focalboard

<span class="c1"># Get all ingress URLs</span>
kubectl<span class="w"> </span>get<span class="w"> </span>ingress<span class="w"> </span>--all-namespaces

<span class="c1"># Test connectivity to each service</span>
curl<span class="w"> </span>-k<span class="w"> </span>https://argocd.fawkes.yourdomain.com
curl<span class="w"> </span>-k<span class="w"> </span>https://harbor.fawkes.yourdomain.com
curl<span class="w"> </span>-k<span class="w"> </span>https://jenkins.fawkes.yourdomain.com
curl<span class="w"> </span>-k<span class="w"> </span>https://backstage.fawkes.yourdomain.com
curl<span class="w"> </span>-k<span class="w"> </span>https://mattermost.fawkes.yourdomain.com
curl<span class="w"> </span>-k<span class="w"> </span>https://focalboard.fawkes.yourdomain.com
</code></pre></div></p>
<hr />
<h2 id="phase-5-observability-stack">Phase 5: Observability Stack</h2>
<p><strong>Duration</strong>: 30 minutes
<strong>Goal</strong>: Deploy Prometheus, Grafana, and logging infrastructure</p>
<h3 id="step-51-deploy-prometheus-stack">Step 5.1: Deploy Prometheus Stack</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Add Prometheus Helm repository</span>
helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>prometheus-community<span class="w"> </span>https://prometheus-community.github.io/helm-charts
helm<span class="w"> </span>repo<span class="w"> </span>update

<span class="c1"># Create values file</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>prometheus-values.yaml<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">prometheus:</span>
<span class="s">  prometheusSpec:</span>
<span class="s">    retention: 30d</span>
<span class="s">    storageSpec:</span>
<span class="s">      volumeClaimTemplate:</span>
<span class="s">        spec:</span>
<span class="s">          storageClassName: gp3</span>
<span class="s">          accessModes: [&quot;ReadWriteOnce&quot;]</span>
<span class="s">          resources:</span>
<span class="s">            requests:</span>
<span class="s">              storage: 100Gi</span>
<span class="s">    resources:</span>
<span class="s">      requests:</span>
<span class="s">        cpu: 500m</span>
<span class="s">        memory: 2Gi</span>
<span class="s">      limits:</span>
<span class="s">        cpu: 1000m</span>
<span class="s">        memory: 4Gi</span>

<span class="s">grafana:</span>
<span class="s">  enabled: true</span>
<span class="s">  adminPassword: $(openssl rand -base64 16)</span>

<span class="s">  ingress:</span>
<span class="s">    enabled: true</span>
<span class="s">    ingressClassName: alb</span>
<span class="s">    annotations:</span>
<span class="s">      alb.ingress.kubernetes.io/scheme: internet-facing</span>
<span class="s">      alb.ingress.kubernetes.io/target-type: ip</span>
<span class="s">      alb.ingress.kubernetes.io/certificate-arn: YOUR_ACM_CERT_ARN</span>
<span class="s">      alb.ingress.kubernetes.io/listen-ports: &#39;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#39;</span>
<span class="s">      alb.ingress.kubernetes.io/ssl-redirect: &#39;443&#39;</span>
<span class="s">    hosts:</span>
<span class="s">      - grafana.fawkes.yourdomain.com</span>

<span class="s">  persistence:</span>
<span class="s">    enabled: true</span>
<span class="s">    storageClassName: gp3</span>
<span class="s">    size: 10Gi</span>

<span class="s">  datasources:</span>
<span class="s">    datasources.yaml:</span>
<span class="s">      apiVersion: 1</span>
<span class="s">      datasources:</span>
<span class="s">      - name: Prometheus</span>
<span class="s">        type: prometheus</span>
<span class="s">        url: http://prometheus-operated:9090</span>
<span class="s">        isDefault: true</span>

<span class="s">  dashboardProviders:</span>
<span class="s">    dashboardproviders.yaml:</span>
<span class="s">      apiVersion: 1</span>
<span class="s">      providers:</span>
<span class="s">      - name: &#39;default&#39;</span>
<span class="s">        orgId: 1</span>
<span class="s">        folder: &#39;&#39;</span>
<span class="s">        type: file</span>
<span class="s">        disableDeletion: false</span>
<span class="s">        editable: true</span>
<span class="s">        options:</span>
<span class="s">          path: /var/lib/grafana/dashboards/default</span>

<span class="s">alertmanager:</span>
<span class="s">  alertmanagerSpec:</span>
<span class="s">    storage:</span>
<span class="s">      volumeClaimTemplate:</span>
<span class="s">        spec:</span>
<span class="s">          storageClassName: gp3</span>
<span class="s">          accessModes: [&quot;ReadWriteOnce&quot;]</span>
<span class="s">          resources:</span>
<span class="s">            requests:</span>
<span class="s">              storage: 10Gi</span>

<span class="s">kubeStateMetrics:</span>
<span class="s">  enabled: true</span>

<span class="s">nodeExporter:</span>
<span class="s">  enabled: true</span>
<span class="s">EOF</span>

<span class="c1"># Install Prometheus stack</span>
helm<span class="w"> </span>install<span class="w"> </span>prometheus<span class="w"> </span>prometheus-community/kube-prometheus-stack<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>monitoring<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--values<span class="w"> </span>prometheus-values.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--version<span class="w"> </span><span class="m">51</span>.0.0

<span class="c1"># Wait for Prometheus to be ready</span>
kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available<span class="w"> </span>--timeout<span class="o">=</span>600s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deployment/prometheus-grafana<span class="w"> </span>-n<span class="w"> </span>monitoring
</code></pre></div>
<h3 id="step-52-deploy-dora-metrics-exporter">Step 5.2: Deploy DORA Metrics Exporter</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create DORA metrics collection service</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>dora-metrics-exporter.yaml<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: ConfigMap</span>
<span class="s">metadata:</span>
<span class="s">  name: dora-exporter-config</span>
<span class="s">  namespace: monitoring</span>
<span class="s">data:</span>
<span class="s">  config.yaml: |</span>
<span class="s">    argocd:</span>
<span class="s">      url: https://argocd.fawkes.yourdomain.com</span>
<span class="s">      token: \${ARGOCD_TOKEN}</span>
<span class="s">    jenkins:</span>
<span class="s">      url: https://jenkins.fawkes.yourdomain.com</span>
<span class="s">      username: admin</span>
<span class="s">      token: \${JENKINS_TOKEN}</span>
<span class="s">    prometheus:</span>
<span class="s">      port: 9090</span>
<span class="s">---</span>
<span class="s">apiVersion: apps/v1</span>
<span class="s">kind: Deployment</span>
<span class="s">metadata:</span>
<span class="s">  name: dora-metrics-exporter</span>
<span class="s">  namespace: monitoring</span>
<span class="s">spec:</span>
<span class="s">  replicas: 1</span>
<span class="s">  selector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      app: dora-metrics-exporter</span>
<span class="s">  template:</span>
<span class="s">    metadata:</span>
<span class="s">      labels:</span>
<span class="s">        app: dora-metrics-exporter</span>
<span class="s">    spec:</span>
<span class="s">      containers:</span>
<span class="s">      - name: exporter</span>
<span class="s">        image: fawkes/dora-metrics-exporter:latest  # TODO: Build this image</span>
<span class="s">        ports:</span>
<span class="s">        - containerPort: 9090</span>
<span class="s">        envFrom:</span>
<span class="s">        - secretRef:</span>
<span class="s">            name: dora-exporter-secrets</span>
<span class="s">        volumeMounts:</span>
<span class="s">        - name: config</span>
<span class="s">          mountPath: /app/config.yaml</span>
<span class="s">          subPath: config.yaml</span>
<span class="s">      volumes:</span>
<span class="s">      - name: config</span>
<span class="s">        configMap:</span>
<span class="s">          name: dora-exporter-config</span>
<span class="s">---</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Service</span>
<span class="s">metadata:</span>
<span class="s">  name: dora-metrics-exporter</span>
<span class="s">  namespace: monitoring</span>
<span class="s">  labels:</span>
<span class="s">    app: dora-metrics-exporter</span>
<span class="s">spec:</span>
<span class="s">  ports:</span>
<span class="s">  - port: 9090</span>
<span class="s">    targetPort: 9090</span>
<span class="s">    name: metrics</span>
<span class="s">  selector:</span>
<span class="s">    app: dora-metrics-exporter</span>
<span class="s">---</span>
<span class="s">apiVersion: monitoring.coreos.com/v1</span>
<span class="s">kind: ServiceMonitor</span>
<span class="s">metadata:</span>
<span class="s">  name: dora-metrics</span>
<span class="s">  namespace: monitoring</span>
<span class="s">spec:</span>
<span class="s">  selector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      app: dora-metrics-exporter</span>
<span class="s">  endpoints:</span>
<span class="s">  - port: metrics</span>
<span class="s">    interval: 60s</span>
<span class="s">EOF</span>

<span class="c1"># Apply DORA metrics exporter</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>dora-metrics-exporter.yaml
</code></pre></div>
<h3 id="step-53-import-dora-metrics-dashboards">Step 5.3: Import DORA Metrics Dashboards</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create DORA metrics dashboard</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>dora-dashboard.json<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39;</span>
<span class="s">{</span>
<span class="s">  &quot;dashboard&quot;: {</span>
<span class="s">    &quot;title&quot;: &quot;DORA Metrics - Fawkes Platform&quot;,</span>
<span class="s">    &quot;tags&quot;: [&quot;dora&quot;, &quot;platform&quot;],</span>
<span class="s">    &quot;timezone&quot;: &quot;browser&quot;,</span>
<span class="s">    &quot;panels&quot;: [</span>
<span class="s">      {</span>
<span class="s">        &quot;title&quot;: &quot;Deployment Frequency&quot;,</span>
<span class="s">        &quot;targets&quot;: [</span>
<span class="s">          {</span>
<span class="s">            &quot;expr&quot;: &quot;sum(rate(deployments_total[7d]))&quot;,</span>
<span class="s">            &quot;legendFormat&quot;: &quot;Deployments per day&quot;</span>
<span class="s">          }</span>
<span class="s">        ],</span>
<span class="s">        &quot;type&quot;: &quot;graph&quot;</span>
<span class="s">      },</span>
<span class="s">      {</span>
<span class="s">        &quot;title&quot;: &quot;Lead Time for Changes&quot;,</span>
<span class="s">        &quot;targets&quot;: [</span>
<span class="s">          {</span>
<span class="s">            &quot;expr&quot;: &quot;histogram_quantile(0.95, rate(lead_time_seconds_bucket[7d]))&quot;,</span>
<span class="s">            &quot;legendFormat&quot;: &quot;p95 Lead Time&quot;</span>
<span class="s">          }</span>
<span class="s">        ],</span>
<span class="s">        &quot;type&quot;: &quot;graph&quot;</span>
<span class="s">      },</span>
<span class="s">      {</span>
<span class="s">        &quot;title&quot;: &quot;Mean Time to Restore (MTTR)&quot;,</span>
<span class="s">        &quot;targets&quot;: [</span>
<span class="s">          {</span>
<span class="s">            &quot;expr&quot;: &quot;avg(mttr_seconds) / 60&quot;,</span>
<span class="s">            &quot;legendFormat&quot;: &quot;MTTR (minutes)&quot;</span>
<span class="s">          }</span>
<span class="s">        ],</span>
<span class="s">        &quot;type&quot;: &quot;graph&quot;</span>
<span class="s">      },</span>
<span class="s">      {</span>
<span class="s">        &quot;title&quot;: &quot;Change Failure Rate&quot;,</span>
<span class="s">        &quot;targets&quot;: [</span>
<span class="s">          {</span>
<span class="s">            &quot;expr&quot;: &quot;(sum(failed_deployments_total) / sum(deployments_total)) * 100&quot;,</span>
<span class="s">            &quot;legendFormat&quot;: &quot;Failure Rate (%)&quot;</span>
<span class="s">          }</span>
<span class="s">        ],</span>
<span class="s">        &quot;type&quot;: &quot;gauge&quot;</span>
<span class="s">      }</span>
<span class="s">    ]</span>
<span class="s">  }</span>
<span class="s">}</span>
<span class="s">EOF</span>

<span class="c1"># Import dashboard to Grafana</span>
<span class="nv">GRAFANA_POD</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>pod<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;app.kubernetes.io/name=grafana&quot;</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.items[0].metadata.name}&quot;</span><span class="k">)</span>

kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span><span class="nv">$GRAFANA_POD</span><span class="w"> </span>--<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:3000/api/dashboards/db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span>@/tmp/dora-dashboard.json

<span class="c1"># Upload the dashboard file first</span>
kubectl<span class="w"> </span>cp<span class="w"> </span>dora-dashboard.json<span class="w"> </span>monitoring/<span class="nv">$GRAFANA_POD</span>:/tmp/
</code></pre></div>
<p><strong>Validation</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check Prometheus is scraping targets</span>
kubectl<span class="w"> </span>port-forward<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>svc/prometheus-operated<span class="w"> </span><span class="m">9090</span>:9090<span class="w"> </span><span class="p">&amp;</span>
curl<span class="w"> </span>http://localhost:9090/api/v1/targets

<span class="c1"># Access Grafana</span>
kubectl<span class="w"> </span>get<span class="w"> </span>ingress<span class="w"> </span>-n<span class="w"> </span>monitoring

<span class="c1"># Get Grafana admin password</span>
kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>prometheus-grafana<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.data.admin-password}&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>--decode<span class="p">;</span><span class="w"> </span><span class="nb">echo</span>
</code></pre></div></p>
<hr />
<h2 id="phase-6-security-hardening">Phase 6: Security Hardening</h2>
<p><strong>Duration</strong>: 20 minutes
<strong>Goal</strong>: Implement security best practices</p>
<h3 id="step-61-deploy-trivy-operator-vulnerability-scanning">Step 6.1: Deploy Trivy Operator (Vulnerability Scanning)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Add Aqua Security Helm repository</span>
helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>aqua<span class="w"> </span>https://aquasecurity.github.io/helm-charts/
helm<span class="w"> </span>repo<span class="w"> </span>update

<span class="c1"># Install Trivy Operator</span>
helm<span class="w"> </span>install<span class="w"> </span>trivy-operator<span class="w"> </span>aqua/trivy-operator<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>trivy-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--create-namespace<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="o">=</span><span class="s2">&quot;trivy.ignoreUnfixed=true&quot;</span>

<span class="c1"># Wait for Trivy to be ready</span>
kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available<span class="w"> </span>--timeout<span class="o">=</span>300s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deployment/trivy-operator<span class="w"> </span>-n<span class="w"> </span>trivy-system
</code></pre></div>
<h3 id="step-62-deploy-kyverno-policy-enforcement">Step 6.2: Deploy Kyverno (Policy Enforcement)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Add Kyverno Helm repository</span>
helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>kyverno<span class="w"> </span>https://kyverno.github.io/kyverno/
helm<span class="w"> </span>repo<span class="w"> </span>update

<span class="c1"># Install Kyverno</span>
helm<span class="w"> </span>install<span class="w"> </span>kyverno<span class="w"> </span>kyverno/kyverno<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>kyverno<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--create-namespace

<span class="c1"># Wait for Kyverno to be ready</span>
kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available<span class="w"> </span>--timeout<span class="o">=</span>300s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deployment/kyverno<span class="w"> </span>-n<span class="w"> </span>kyverno

<span class="c1"># Apply baseline policies</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/kyverno/policies/main/pod-security/baseline/disallow-privileged-containers/disallow-privileged-containers.yaml
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/kyverno/policies/main/pod-security/baseline/disallow-host-namespaces/disallow-host-namespaces.yaml
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/kyverno/policies/main/pod-security/baseline/disallow-host-path/disallow-host-path.yaml

<span class="c1"># Create custom policy for required labels</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | kubectl apply -f -</span>
<span class="s">apiVersion: kyverno.io/v1</span>
<span class="s">kind: ClusterPolicy</span>
<span class="s">metadata:</span>
<span class="s">  name: require-labels</span>
<span class="s">spec:</span>
<span class="s">  validationFailureAction: audit</span>
<span class="s">  background: true</span>
<span class="s">  rules:</span>
<span class="s">  - name: check-for-labels</span>
<span class="s">    match:</span>
<span class="s">      any:</span>
<span class="s">      - resources:</span>
<span class="s">          kinds:</span>
<span class="s">          - Pod</span>
<span class="s">          - Deployment</span>
<span class="s">          - Service</span>
<span class="s">    validate:</span>
<span class="s">      message: &quot;Labels &#39;app.kubernetes.io/name&#39; and &#39;app.kubernetes.io/part-of&#39; are required.&quot;</span>
<span class="s">      pattern:</span>
<span class="s">        metadata:</span>
<span class="s">          labels:</span>
<span class="s">            app.kubernetes.io/name: &quot;?*&quot;</span>
<span class="s">            app.kubernetes.io/part-of: &quot;fawkes&quot;</span>
<span class="s">EOF</span>
</code></pre></div>
<h3 id="step-63-configure-network-policies">Step 6.3: Configure Network Policies</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create network policies for each namespace</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | kubectl apply -f -</span>
<span class="s"># Allow Backstage to communicate with all services</span>
<span class="s">apiVersion: networking.k8s.io/v1</span>
<span class="s">kind: NetworkPolicy</span>
<span class="s">metadata:</span>
<span class="s">  name: backstage-egress</span>
<span class="s">  namespace: backstage</span>
<span class="s">spec:</span>
<span class="s">  podSelector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      app: backstage</span>
<span class="s">  policyTypes:</span>
<span class="s">  - Egress</span>
<span class="s">  egress:</span>
<span class="s">  - to:</span>
<span class="s">    - namespaceSelector: {}</span>
<span class="s">    ports:</span>
<span class="s">    - protocol: TCP</span>
<span class="s">      port: 443</span>
<span class="s">    - protocol: TCP</span>
<span class="s">      port: 80</span>
<span class="s">    - protocol: TCP</span>
<span class="s">      port: 8080</span>
<span class="s">  - to:</span>
<span class="s">    - podSelector: {}</span>
<span class="s">    ports:</span>
<span class="s">    - protocol: TCP</span>
<span class="s">      port: 5432  # PostgreSQL</span>
<span class="s">---</span>
<span class="s"># ArgoCD network policy</span>
<span class="s">apiVersion: networking.k8s.io/v1</span>
<span class="s">kind: NetworkPolicy</span>
<span class="s">metadata:</span>
<span class="s">  name: argocd-network-policy</span>
<span class="s">  namespace: argocd</span>
<span class="s">spec:</span>
<span class="s">  podSelector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      app.kubernetes.io/part-of: argocd</span>
<span class="s">  policyTypes:</span>
<span class="s">  - Ingress</span>
<span class="s">  - Egress</span>
<span class="s">  ingress:</span>
<span class="s">  - from:</span>
<span class="s">    - namespaceSelector: {}</span>
<span class="s">    ports:</span>
<span class="s">    - protocol: TCP</span>
<span class="s">      port: 8080</span>
<span class="s">    - protocol: TCP</span>
<span class="s">      port: 443</span>
<span class="s">  egress:</span>
<span class="s">  - to:</span>
<span class="s">    - namespaceSelector: {}</span>
<span class="s">  - to:</span>
<span class="s">    - podSelector: {}</span>
<span class="s">    ports:</span>
<span class="s">    - protocol: TCP</span>
<span class="s">      port: 443</span>
<span class="s">    - protocol: TCP</span>
<span class="s">      port: 22  # Git SSH</span>
<span class="s">---</span>
<span class="s"># Jenkins network policy</span>
<span class="s">apiVersion: networking.k8s.io/v1</span>
<span class="s">kind: NetworkPolicy</span>
<span class="s">metadata:</span>
<span class="s">  name: jenkins-network-policy</span>
<span class="s">  namespace: jenkins</span>
<span class="s">spec:</span>
<span class="s">  podSelector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      app.kubernetes.io/name: jenkins</span>
<span class="s">  policyTypes:</span>
<span class="s">  - Ingress</span>
<span class="s">  - Egress</span>
<span class="s">  ingress:</span>
<span class="s">  - from:</span>
<span class="s">    - namespaceSelector: {}</span>
<span class="s">    ports:</span>
<span class="s">    - protocol: TCP</span>
<span class="s">      port: 8080</span>
<span class="s">    - protocol: TCP</span>
<span class="s">      port: 50000  # JNLP agent port</span>
<span class="s">  egress:</span>
<span class="s">  - to:</span>
<span class="s">    - namespaceSelector: {}</span>
<span class="s">---</span>
<span class="s"># Monitoring namespace - allow all (needs to scrape metrics)</span>
<span class="s">apiVersion: networking.k8s.io/v1</span>
<span class="s">kind: NetworkPolicy</span>
<span class="s">metadata:</span>
<span class="s">  name: monitoring-egress</span>
<span class="s">  namespace: monitoring</span>
<span class="s">spec:</span>
<span class="s">  podSelector: {}</span>
<span class="s">  policyTypes:</span>
<span class="s">  - Egress</span>
<span class="s">  egress:</span>
<span class="s">  - to:</span>
<span class="s">    - namespaceSelector: {}</span>
<span class="s">EOF</span>
</code></pre></div>
<h3 id="step-64-enable-pod-security-standards">Step 6.4: Enable Pod Security Standards</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Apply Pod Security Standards to namespaces</span>
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>backstage<span class="w"> </span>pod-security.kubernetes.io/enforce<span class="o">=</span>baseline
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>jenkins<span class="w"> </span>pod-security.kubernetes.io/enforce<span class="o">=</span>baseline
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>argocd<span class="w"> </span>pod-security.kubernetes.io/enforce<span class="o">=</span>baseline
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>harbor<span class="w"> </span>pod-security.kubernetes.io/enforce<span class="o">=</span>baseline
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>mattermost<span class="w"> </span>pod-security.kubernetes.io/enforce<span class="o">=</span>baseline
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>focalboard<span class="w"> </span>pod-security.kubernetes.io/enforce<span class="o">=</span>baseline
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>monitoring<span class="w"> </span>pod-security.kubernetes.io/enforce<span class="o">=</span>baseline

<span class="c1"># Audit mode for system namespaces</span>
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>kube-system<span class="w"> </span>pod-security.kubernetes.io/audit<span class="o">=</span>restricted
kubectl<span class="w"> </span>label<span class="w"> </span>namespace<span class="w"> </span>kube-system<span class="w"> </span>pod-security.kubernetes.io/warn<span class="o">=</span>restricted
</code></pre></div>
<h3 id="step-65-configure-rbac">Step 6.5: Configure RBAC</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create read-only role for developers</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | kubectl apply -f -</span>
<span class="s">apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="s">kind: ClusterRole</span>
<span class="s">metadata:</span>
<span class="s">  name: fawkes-developer</span>
<span class="s">rules:</span>
<span class="s">- apiGroups: [&quot;&quot;]</span>
<span class="s">  resources: [&quot;pods&quot;, &quot;services&quot;, &quot;configmaps&quot;]</span>
<span class="s">  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]</span>
<span class="s">- apiGroups: [&quot;apps&quot;]</span>
<span class="s">  resources: [&quot;deployments&quot;, &quot;replicasets&quot;, &quot;statefulsets&quot;]</span>
<span class="s">  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]</span>
<span class="s">- apiGroups: [&quot;&quot;]</span>
<span class="s">  resources: [&quot;pods/log&quot;]</span>
<span class="s">  verbs: [&quot;get&quot;, &quot;list&quot;]</span>
<span class="s">---</span>
<span class="s">apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="s">kind: ClusterRole</span>
<span class="s">metadata:</span>
<span class="s">  name: fawkes-operator</span>
<span class="s">rules:</span>
<span class="s">- apiGroups: [&quot;*&quot;]</span>
<span class="s">  resources: [&quot;*&quot;]</span>
<span class="s">  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;]</span>
<span class="s">- apiGroups: [&quot;&quot;]</span>
<span class="s">  resources: [&quot;pods/exec&quot;, &quot;pods/portforward&quot;]</span>
<span class="s">  verbs: [&quot;create&quot;]</span>
<span class="s">---</span>
<span class="s"># Bind roles to groups (configure based on your IdP)</span>
<span class="s">apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="s">kind: ClusterRoleBinding</span>
<span class="s">metadata:</span>
<span class="s">  name: fawkes-developers</span>
<span class="s">roleRef:</span>
<span class="s">  apiGroup: rbac.authorization.k8s.io</span>
<span class="s">  kind: ClusterRole</span>
<span class="s">  name: fawkes-developer</span>
<span class="s">subjects:</span>
<span class="s">- kind: Group</span>
<span class="s">  name: fawkes-developers</span>
<span class="s">  apiGroup: rbac.authorization.k8s.io</span>
<span class="s">---</span>
<span class="s">apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="s">kind: ClusterRoleBinding</span>
<span class="s">metadata:</span>
<span class="s">  name: fawkes-operators</span>
<span class="s">roleRef:</span>
<span class="s">  apiGroup: rbac.authorization.k8s.io</span>
<span class="s">  kind: ClusterRole</span>
<span class="s">  name: fawkes-operator</span>
<span class="s">subjects:</span>
<span class="s">- kind: Group</span>
<span class="s">  name: fawkes-operators</span>
<span class="s">  apiGroup: rbac.authorization.k8s.io</span>
<span class="s">EOF</span>
</code></pre></div>
<p><strong>Validation</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check Trivy is scanning</span>
kubectl<span class="w"> </span>get<span class="w"> </span>vulnerabilityreports<span class="w"> </span>-A

<span class="c1"># Check Kyverno policies</span>
kubectl<span class="w"> </span>get<span class="w"> </span>clusterpolicy

<span class="c1"># Verify network policies</span>
kubectl<span class="w"> </span>get<span class="w"> </span>networkpolicies<span class="w"> </span>-A

<span class="c1"># Test RBAC (as a developer user)</span>
kubectl<span class="w"> </span>auth<span class="w"> </span>can-i<span class="w"> </span>delete<span class="w"> </span>pods<span class="w"> </span>--as<span class="o">=</span>system:serviceaccount:default:developer
<span class="c1"># Should return &quot;no&quot;</span>
</code></pre></div></p>
<hr />
<h2 id="phase-7-validation-and-testing">Phase 7: Validation and Testing</h2>
<p><strong>Duration</strong>: 30 minutes
<strong>Goal</strong>: Verify all components are working correctly</p>
<h3 id="step-71-component-health-checks">Step 7.1: Component Health Checks</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create health check script</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>health-check.sh<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39;</span>
<span class="s">#!/bin/bash</span>

<span class="s">echo &quot;=========================================&quot;</span>
<span class="s">echo &quot;Fawkes Platform Health Check&quot;</span>
<span class="s">echo &quot;=========================================&quot;</span>
<span class="s">echo &quot;&quot;</span>

<span class="s"># Check cluster health</span>
<span class="s">echo &quot;1. EKS Cluster Status:&quot;</span>
<span class="s">aws eks describe-cluster --name fawkes-production --query &#39;cluster.status&#39; --output text</span>
<span class="s">echo &quot;&quot;</span>

<span class="s"># Check node health</span>
<span class="s">echo &quot;2. Node Status:&quot;</span>
<span class="s">kubectl get nodes -o custom-columns=NAME:.metadata.name,STATUS:.status.conditions[3].type,VERSION:.status.nodeInfo.kubeletVersion</span>
<span class="s">echo &quot;&quot;</span>

<span class="s"># Check RDS status</span>
<span class="s">echo &quot;3. RDS Database Status:&quot;</span>
<span class="s">aws rds describe-db-instances --db-instance-identifier fawkes-production-db --query &#39;DBInstances[0].DBInstanceStatus&#39; --output text</span>
<span class="s">echo &quot;&quot;</span>

<span class="s"># Check all pods</span>
<span class="s">echo &quot;4. Pod Status by Namespace:&quot;</span>
<span class="s">for ns in argocd harbor jenkins backstage mattermost focalboard monitoring; do</span>
<span class="s">  echo &quot;  Namespace: $ns&quot;</span>
<span class="s">  kubectl get pods -n $ns -o custom-columns=NAME:.metadata.name,STATUS:.status.phase,RESTARTS:.status.containerStatuses[0].restartCount</span>
<span class="s">  echo &quot;&quot;</span>
<span class="s">done</span>

<span class="s"># Check ingresses</span>
<span class="s">echo &quot;5. Ingress Endpoints:&quot;</span>
<span class="s">kubectl get ingress -A -o custom-columns=NAMESPACE:.metadata.namespace,NAME:.metadata.name,HOSTS:.spec.rules[0].host,ADDRESS:.status.loadBalancer.ingress[0].hostname</span>
<span class="s">echo &quot;&quot;</span>

<span class="s"># Check PVC status</span>
<span class="s">echo &quot;6. Persistent Volume Claims:&quot;</span>
<span class="s">kubectl get pvc -A -o custom-columns=NAMESPACE:.metadata.namespace,NAME:.metadata.name,STATUS:.status.phase,CAPACITY:.status.capacity.storage</span>
<span class="s">echo &quot;&quot;</span>

<span class="s"># Check certificates (if using cert-manager)</span>
<span class="s">echo &quot;7. SSL Certificates:&quot;</span>
<span class="s">aws acm list-certificates --region us-east-1 --query &#39;CertificateSummaryList[?contains(DomainName, `fawkes`)]&#39; --output table</span>
<span class="s">echo &quot;&quot;</span>

<span class="s">echo &quot;=========================================&quot;</span>
<span class="s">echo &quot;Health Check Complete&quot;</span>
<span class="s">echo &quot;=========================================&quot;</span>
<span class="s">EOF</span>

chmod<span class="w"> </span>+x<span class="w"> </span>health-check.sh
./health-check.sh
</code></pre></div>
<h3 id="step-72-connectivity-tests">Step 7.2: Connectivity Tests</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Test external connectivity to all services</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>connectivity-test.sh<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39;</span>
<span class="s">#!/bin/bash</span>

<span class="s">SERVICES=(</span>
<span class="s">  &quot;https://argocd.fawkes.yourdomain.com&quot;</span>
<span class="s">  &quot;https://harbor.fawkes.yourdomain.com&quot;</span>
<span class="s">  &quot;https://jenkins.fawkes.yourdomain.com&quot;</span>
<span class="s">  &quot;https://backstage.fawkes.yourdomain.com&quot;</span>
<span class="s">  &quot;https://mattermost.fawkes.yourdomain.com&quot;</span>
<span class="s">  &quot;https://focalboard.fawkes.yourdomain.com&quot;</span>
<span class="s">  &quot;https://grafana.fawkes.yourdomain.com&quot;</span>
<span class="s">)</span>

<span class="s">echo &quot;Testing connectivity to all services...&quot;</span>
<span class="s">echo &quot;&quot;</span>

<span class="s">for service in &quot;${SERVICES[@]}&quot;; do</span>
<span class="s">  status_code=$(curl -k -s -o /dev/null -w &quot;%{http_code}&quot; &quot;$service&quot;)</span>
<span class="s">  if [ &quot;$status_code&quot; -eq 200 ] || [ &quot;$status_code&quot; -eq 302 ] || [ &quot;$status_code&quot; -eq 401 ]; then</span>
<span class="s">    echo &quot; $service - OK (HTTP $status_code)&quot;</span>
<span class="s">  else</span>
<span class="s">    echo &quot; $service - FAILED (HTTP $status_code)&quot;</span>
<span class="s">  fi</span>
<span class="s">done</span>

<span class="s">echo &quot;&quot;</span>
<span class="s">echo &quot;Connectivity test complete&quot;</span>
<span class="s">EOF</span>

chmod<span class="w"> </span>+x<span class="w"> </span>connectivity-test.sh
./connectivity-test.sh
</code></pre></div>
<h3 id="step-73-deploy-test-application">Step 7.3: Deploy Test Application</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create a test application to verify the full pipeline</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | kubectl apply -f -</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Namespace</span>
<span class="s">metadata:</span>
<span class="s">  name: fawkes-test</span>
<span class="s">---</span>
<span class="s">apiVersion: apps/v1</span>
<span class="s">kind: Deployment</span>
<span class="s">metadata:</span>
<span class="s">  name: hello-fawkes</span>
<span class="s">  namespace: fawkes-test</span>
<span class="s">spec:</span>
<span class="s">  replicas: 2</span>
<span class="s">  selector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      app: hello-fawkes</span>
<span class="s">  template:</span>
<span class="s">    metadata:</span>
<span class="s">      labels:</span>
<span class="s">        app: hello-fawkes</span>
<span class="s">        app.kubernetes.io/name: hello-fawkes</span>
<span class="s">        app.kubernetes.io/part-of: fawkes</span>
<span class="s">    spec:</span>
<span class="s">      containers:</span>
<span class="s">      - name: hello</span>
<span class="s">        image: nginxdemos/hello:latest</span>
<span class="s">        ports:</span>
<span class="s">        - containerPort: 80</span>
<span class="s">        resources:</span>
<span class="s">          requests:</span>
<span class="s">            cpu: 100m</span>
<span class="s">            memory: 128Mi</span>
<span class="s">          limits:</span>
<span class="s">            cpu: 200m</span>
<span class="s">            memory: 256Mi</span>
<span class="s">---</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Service</span>
<span class="s">metadata:</span>
<span class="s">  name: hello-fawkes</span>
<span class="s">  namespace: fawkes-test</span>
<span class="s">spec:</span>
<span class="s">  selector:</span>
<span class="s">    app: hello-fawkes</span>
<span class="s">  ports:</span>
<span class="s">  - port: 80</span>
<span class="s">    targetPort: 80</span>
<span class="s">---</span>
<span class="s">apiVersion: networking.k8s.io/v1</span>
<span class="s">kind: Ingress</span>
<span class="s">metadata:</span>
<span class="s">  name: hello-fawkes</span>
<span class="s">  namespace: fawkes-test</span>
<span class="s">  annotations:</span>
<span class="s">    alb.ingress.kubernetes.io/scheme: internet-facing</span>
<span class="s">    alb.ingress.kubernetes.io/target-type: ip</span>
<span class="s">spec:</span>
<span class="s">  ingressClassName: alb</span>
<span class="s">  rules:</span>
<span class="s">  - host: hello.fawkes.yourdomain.com</span>
<span class="s">    http:</span>
<span class="s">      paths:</span>
<span class="s">      - path: /</span>
<span class="s">        pathType: Prefix</span>
<span class="s">        backend:</span>
<span class="s">          service:</span>
<span class="s">            name: hello-fawkes</span>
<span class="s">            port:</span>
<span class="s">              number: 80</span>
<span class="s">EOF</span>

<span class="c1"># Wait for deployment</span>
kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available<span class="w"> </span>--timeout<span class="o">=</span>300s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>deployment/hello-fawkes<span class="w"> </span>-n<span class="w"> </span>fawkes-test

<span class="c1"># Get the ingress URL</span>
kubectl<span class="w"> </span>get<span class="w"> </span>ingress<span class="w"> </span>hello-fawkes<span class="w"> </span>-n<span class="w"> </span>fawkes-test

<span class="c1"># Test the application</span>
sleep<span class="w"> </span><span class="m">60</span><span class="w">  </span><span class="c1"># Wait for ALB to register targets</span>
curl<span class="w"> </span>http://hello.fawkes.yourdomain.com
</code></pre></div>
<h3 id="step-74-verify-dora-metrics-collection">Step 7.4: Verify DORA Metrics Collection</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Check if Prometheus is collecting metrics</span>
kubectl<span class="w"> </span>port-forward<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>svc/prometheus-operated<span class="w"> </span><span class="m">9090</span>:9090<span class="w"> </span><span class="p">&amp;</span>
<span class="nv">PF_PID</span><span class="o">=</span><span class="nv">$!</span>

sleep<span class="w"> </span><span class="m">5</span>

<span class="c1"># Query deployment metrics</span>
curl<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39;http://localhost:9090/api/v1/query?query=deployments_total&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq

<span class="c1"># Query lead time metrics</span>
curl<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39;http://localhost:9090/api/v1/query?query=lead_time_seconds_count&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq

<span class="c1"># Query MTTR metrics</span>
curl<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39;http://localhost:9090/api/v1/query?query=mttr_seconds&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq

<span class="c1"># Stop port-forward</span>
<span class="nb">kill</span><span class="w"> </span><span class="nv">$PF_PID</span>
</code></pre></div>
<h3 id="step-75-security-scan">Step 7.5: Security Scan</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Run Trivy scan on all namespaces</span>
kubectl<span class="w"> </span>get<span class="w"> </span>vulnerabilityreports<span class="w"> </span>-A<span class="w"> </span>-o<span class="w"> </span>custom-columns<span class="o">=</span>NAMESPACE:.metadata.namespace,NAME:.metadata.name,CRITICAL:.report.summary.criticalCount,HIGH:.report.summary.highCount

<span class="c1"># Check Kyverno policy reports</span>
kubectl<span class="w"> </span>get<span class="w"> </span>policyreport<span class="w"> </span>-A

<span class="c1"># Test network policies</span>
kubectl<span class="w"> </span>run<span class="w"> </span>test-pod<span class="w"> </span>--image<span class="o">=</span>busybox<span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span>--restart<span class="o">=</span>Never<span class="w"> </span>--<span class="w"> </span>/bin/sh
<span class="c1"># Inside the pod, try to access services</span>
<span class="c1"># wget -O- http://jenkins.jenkins.svc.cluster.local:8080</span>
<span class="c1"># Should succeed or fail based on network policies</span>
</code></pre></div>
<p><strong>Validation Checklist</strong>:</p>
<ul>
<li>[ ] All nodes are in Ready state</li>
<li>[ ] All pods are Running (no CrashLoopBackOff)</li>
<li>[ ] RDS database is available</li>
<li>[ ] All ingresses have ALB addresses</li>
<li>[ ] All services respond to HTTP requests (200, 302, or 401)</li>
<li>[ ] Test application deployed successfully</li>
<li>[ ] Prometheus collecting metrics</li>
<li>[ ] No critical vulnerabilities in running containers</li>
<li>[ ] Network policies enforced</li>
<li>[ ] RBAC working correctly</li>
</ul>
<hr />
<h2 id="post-deployment-operations">Post-Deployment Operations</h2>
<h3 id="dns-configuration">DNS Configuration</h3>
<p>If you're using Route53 or external DNS:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Get all ALB DNS names</span>
kubectl<span class="w"> </span>get<span class="w"> </span>ingress<span class="w"> </span>-A<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{range .items[*]}{.spec.rules[0].host}{&quot;\t&quot;}{.status.loadBalancer.ingress[0].hostname}{&quot;\n&quot;}{end}&#39;</span>

<span class="c1"># Create Route53 records (if using Route53)</span>
<span class="c1"># For each service, create a CNAME record pointing to the ALB DNS name</span>

<span class="c1"># Example for ArgoCD:</span>
aws<span class="w"> </span>route53<span class="w"> </span>change-resource-record-sets<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--hosted-zone-id<span class="w"> </span>YOUR_HOSTED_ZONE_ID<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--change-batch<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;Changes&quot;: [</span>
<span class="s1">      {</span>
<span class="s1">        &quot;Action&quot;: &quot;CREATE&quot;,</span>
<span class="s1">        &quot;ResourceRecordSet&quot;: {</span>
<span class="s1">          &quot;Name&quot;: &quot;argocd.fawkes.yourdomain.com&quot;,</span>
<span class="s1">          &quot;Type&quot;: &quot;CNAME&quot;,</span>
<span class="s1">          &quot;TTL&quot;: 300,</span>
<span class="s1">          &quot;ResourceRecords&quot;: [</span>
<span class="s1">            {</span>
<span class="s1">              &quot;Value&quot;: &quot;k8s-argocd-abc123-1234567890.us-east-1.elb.amazonaws.com&quot;</span>
<span class="s1">            }</span>
<span class="s1">          ]</span>
<span class="s1">        }</span>
<span class="s1">      }</span>
<span class="s1">    ]</span>
<span class="s1">  }&#39;</span>

<span class="c1"># Repeat for all services</span>
</code></pre></div>
<h3 id="configure-backups">Configure Backups</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Install Velero for cluster backups</span>
helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>vmware-tanzu<span class="w"> </span>https://vmware-tanzu.github.io/helm-charts
helm<span class="w"> </span>repo<span class="w"> </span>update

<span class="c1"># Create S3 bucket for backups (if not already created)</span>
aws<span class="w"> </span>s3<span class="w"> </span>mb<span class="w"> </span>s3://fawkes-velero-backups-prod-YOUR-UNIQUE-ID<span class="w"> </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Create IAM policy for Velero</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>velero-policy.json<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">{</span>
<span class="s">  &quot;Version&quot;: &quot;2012-10-17&quot;,</span>
<span class="s">  &quot;Statement&quot;: [</span>
<span class="s">    {</span>
<span class="s">      &quot;Effect&quot;: &quot;Allow&quot;,</span>
<span class="s">      &quot;Action&quot;: [</span>
<span class="s">        &quot;ec2:DescribeVolumes&quot;,</span>
<span class="s">        &quot;ec2:DescribeSnapshots&quot;,</span>
<span class="s">        &quot;ec2:CreateTags&quot;,</span>
<span class="s">        &quot;ec2:CreateVolume&quot;,</span>
<span class="s">        &quot;ec2:CreateSnapshot&quot;,</span>
<span class="s">        &quot;ec2:DeleteSnapshot&quot;</span>
<span class="s">      ],</span>
<span class="s">      &quot;Resource&quot;: &quot;*&quot;</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      &quot;Effect&quot;: &quot;Allow&quot;,</span>
<span class="s">      &quot;Action&quot;: [</span>
<span class="s">        &quot;s3:GetObject&quot;,</span>
<span class="s">        &quot;s3:DeleteObject&quot;,</span>
<span class="s">        &quot;s3:PutObject&quot;,</span>
<span class="s">        &quot;s3:AbortMultipartUpload&quot;,</span>
<span class="s">        &quot;s3:ListMultipartUploadParts&quot;</span>
<span class="s">      ],</span>
<span class="s">      &quot;Resource&quot;: [</span>
<span class="s">        &quot;arn:aws:s3:::fawkes-velero-backups-prod-YOUR-UNIQUE-ID/*&quot;</span>
<span class="s">      ]</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      &quot;Effect&quot;: &quot;Allow&quot;,</span>
<span class="s">      &quot;Action&quot;: [</span>
<span class="s">        &quot;s3:ListBucket&quot;</span>
<span class="s">      ],</span>
<span class="s">      &quot;Resource&quot;: [</span>
<span class="s">        &quot;arn:aws:s3:::fawkes-velero-backups-prod-YOUR-UNIQUE-ID&quot;</span>
<span class="s">      ]</span>
<span class="s">    }</span>
<span class="s">  ]</span>
<span class="s">}</span>
<span class="s">EOF</span>

aws<span class="w"> </span>iam<span class="w"> </span>create-policy<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--policy-name<span class="w"> </span>FawkesVeleroPolicy<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--policy-document<span class="w"> </span>file://velero-policy.json

<span class="c1"># Install Velero</span>
helm<span class="w"> </span>install<span class="w"> </span>velero<span class="w"> </span>vmware-tanzu/velero<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>velero<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--create-namespace<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-file<span class="w"> </span>credentials.secretContents.cloud<span class="o">=</span>&lt;<span class="o">(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[default]</span>
<span class="s2">aws_access_key_id=</span><span class="nv">$AWS_ACCESS_KEY_ID</span>
<span class="s2">aws_secret_access_key=</span><span class="nv">$AWS_SECRET_ACCESS_KEY</span><span class="s2">&quot;</span><span class="o">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>configuration.provider<span class="o">=</span>aws<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>configuration.backupStorageLocation.bucket<span class="o">=</span>fawkes-velero-backups-prod-YOUR-UNIQUE-ID<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>configuration.backupStorageLocation.config.region<span class="o">=</span>us-east-1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>configuration.volumeSnapshotLocation.config.region<span class="o">=</span>us-east-1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>initContainers<span class="o">[</span><span class="m">0</span><span class="o">]</span>.name<span class="o">=</span>velero-plugin-for-aws<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>initContainers<span class="o">[</span><span class="m">0</span><span class="o">]</span>.image<span class="o">=</span>velero/velero-plugin-for-aws:v1.8.0<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>initContainers<span class="o">[</span><span class="m">0</span><span class="o">]</span>.volumeMounts<span class="o">[</span><span class="m">0</span><span class="o">]</span>.mountPath<span class="o">=</span>/target<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>initContainers<span class="o">[</span><span class="m">0</span><span class="o">]</span>.volumeMounts<span class="o">[</span><span class="m">0</span><span class="o">]</span>.name<span class="o">=</span>plugins

<span class="c1"># Create daily backup schedule</span>
velero<span class="w"> </span>schedule<span class="w"> </span>create<span class="w"> </span>daily-backup<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--schedule<span class="o">=</span><span class="s2">&quot;0 2 * * *&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ttl<span class="w"> </span>720h0m0s

<span class="c1"># Test backup</span>
velero<span class="w"> </span>backup<span class="w"> </span>create<span class="w"> </span>test-backup<span class="w"> </span>--wait
velero<span class="w"> </span>backup<span class="w"> </span>describe<span class="w"> </span>test-backup
</code></pre></div>
<h3 id="configure-monitoring-and-alerting">Configure Monitoring and Alerting</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create AlertManager configuration</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | kubectl apply -f -</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: ConfigMap</span>
<span class="s">metadata:</span>
<span class="s">  name: alertmanager-config</span>
<span class="s">  namespace: monitoring</span>
<span class="s">data:</span>
<span class="s">  alertmanager.yml: |</span>
<span class="s">    global:</span>
<span class="s">      resolve_timeout: 5m</span>

<span class="s">    route:</span>
<span class="s">      group_by: [&#39;alertname&#39;, &#39;cluster&#39;, &#39;service&#39;]</span>
<span class="s">      group_wait: 10s</span>
<span class="s">      group_interval: 10s</span>
<span class="s">      repeat_interval: 12h</span>
<span class="s">      receiver: &#39;fawkes-team&#39;</span>

<span class="s">    receivers:</span>
<span class="s">    - name: &#39;fawkes-team&#39;</span>
<span class="s">      email_configs:</span>
<span class="s">      - to: &#39;alerts@yourdomain.com&#39;</span>
<span class="s">        from: &#39;fawkes-alerts@yourdomain.com&#39;</span>
<span class="s">        smarthost: &#39;smtp.gmail.com:587&#39;</span>
<span class="s">        auth_username: &#39;fawkes-alerts@yourdomain.com&#39;</span>
<span class="s">        auth_password: &#39;YOUR_SMTP_PASSWORD&#39;</span>
<span class="s">        headers:</span>
<span class="s">          Subject: &#39;{{ template &quot;email.default.subject&quot; . }}&#39;</span>
<span class="s">      slack_configs:</span>
<span class="s">      - api_url: &#39;YOUR_SLACK_WEBHOOK_URL&#39;</span>
<span class="s">        channel: &#39;#fawkes-alerts&#39;</span>
<span class="s">        title: &#39;{{ template &quot;slack.default.title&quot; . }}&#39;</span>
<span class="s">        text: &#39;{{ template &quot;slack.default.text&quot; . }}&#39;</span>
<span class="s">EOF</span>

<span class="c1"># Restart AlertManager to pick up new config</span>
kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>statefulset/alertmanager-prometheus-kube-prometheus-alertmanager<span class="w"> </span>-n<span class="w"> </span>monitoring
</code></pre></div>
<h3 id="set-up-cost-monitoring">Set Up Cost Monitoring</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Tag all resources for cost allocation</span>
<span class="nv">CLUSTER_NAME</span><span class="o">=</span><span class="s2">&quot;fawkes-production&quot;</span>

<span class="c1"># Tag EKS cluster</span>
aws<span class="w"> </span>eks<span class="w"> </span>tag-resource<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--resource-arn<span class="w"> </span><span class="k">$(</span>aws<span class="w"> </span>eks<span class="w"> </span>describe-cluster<span class="w"> </span>--name<span class="w"> </span><span class="nv">$CLUSTER_NAME</span><span class="w"> </span>--query<span class="w"> </span><span class="s1">&#39;cluster.arn&#39;</span><span class="w"> </span>--output<span class="w"> </span>text<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--tags<span class="w"> </span><span class="nv">Environment</span><span class="o">=</span>production,Project<span class="o">=</span>fawkes,CostCenter<span class="o">=</span>engineering

<span class="c1"># Tag RDS instance</span>
aws<span class="w"> </span>rds<span class="w"> </span>add-tags-to-resource<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--resource-name<span class="w"> </span><span class="k">$(</span>aws<span class="w"> </span>rds<span class="w"> </span>describe-db-instances<span class="w"> </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db<span class="w"> </span>--query<span class="w"> </span><span class="s1">&#39;DBInstances[0].DBInstanceArn&#39;</span><span class="w"> </span>--output<span class="w"> </span>text<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--tags<span class="w"> </span><span class="nv">Key</span><span class="o">=</span>Environment,Value<span class="o">=</span>production<span class="w"> </span><span class="nv">Key</span><span class="o">=</span>Project,Value<span class="o">=</span>fawkes<span class="w"> </span><span class="nv">Key</span><span class="o">=</span>CostCenter,Value<span class="o">=</span>engineering

<span class="c1"># Tag S3 buckets</span>
<span class="k">for</span><span class="w"> </span>bucket<span class="w"> </span><span class="k">in</span><span class="w"> </span>fawkes-artifacts-prod-YOUR-UNIQUE-ID<span class="w"> </span>fawkes-backups-prod-YOUR-UNIQUE-ID<span class="w"> </span>fawkes-logs-prod-YOUR-UNIQUE-ID<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span>aws<span class="w"> </span>s3api<span class="w"> </span>put-bucket-tagging<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--bucket<span class="w"> </span><span class="nv">$bucket</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--tagging<span class="w"> </span><span class="s1">&#39;TagSet=[{Key=Environment,Value=production},{Key=Project,Value=fawkes},{Key=CostCenter,Value=engineering}]&#39;</span>
<span class="k">done</span>

<span class="c1"># Set up AWS Cost Explorer filters</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Configure Cost Explorer to filter by tags: Project=fawkes&quot;</span>
</code></pre></div>
<h3 id="documentation">Documentation</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create deployment documentation</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>DEPLOYMENT_RECORD.md<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s"># Fawkes Production Deployment Record</span>

<span class="s">**Deployment Date**: $(date)</span>
<span class="s">**Deployed By**: $(whoami)</span>
<span class="s">**AWS Region**: us-east-1</span>

<span class="s">## Infrastructure Details</span>

<span class="s">### EKS Cluster</span>
<span class="s">- **Name**: fawkes-production</span>
<span class="s">- **Version**: 1.28</span>
<span class="s">- **Nodes**: 6 x t3.xlarge</span>
<span class="s">- **VPC ID**: $VPC_ID</span>

<span class="s">### RDS Database</span>
<span class="s">- **Identifier**: fawkes-production-db</span>
<span class="s">- **Instance Class**: db.m5.large</span>
<span class="s">- **Engine**: PostgreSQL 15.4</span>
<span class="s">- **Multi-AZ**: Yes</span>
<span class="s">- **Endpoint**: $RDS_ENDPOINT</span>

<span class="s">### S3 Buckets</span>
<span class="s">- Artifacts: fawkes-artifacts-prod-YOUR-UNIQUE-ID</span>
<span class="s">- Backups: fawkes-backups-prod-YOUR-UNIQUE-ID</span>
<span class="s">- Logs: fawkes-logs-prod-YOUR-UNIQUE-ID</span>

<span class="s">### Service Endpoints</span>
<span class="s">$(kubectl get ingress -A -o custom-columns=SERVICE:.metadata.name,URL:.spec.rules[0].host --no-headers)</span>

<span class="s">## Access Credentials</span>

<span class="s">**Stored in AWS Secrets Manager**:</span>
<span class="s">- fawkes/production/db-password</span>
<span class="s">- fawkes/production/argocd-password</span>
<span class="s">- fawkes/production/jenkins-password</span>
<span class="s">- fawkes/production/db-endpoint</span>

<span class="s">## Component Versions</span>

<span class="s">**Platform Services**:</span>
<span class="s">- ArgoCD: 5.51.0</span>
<span class="s">- Harbor: 1.13.0</span>
<span class="s">- Jenkins: 4.6.0</span>
<span class="s">- Backstage: latest</span>
<span class="s">- Mattermost: latest</span>
<span class="s">- Focalboard: latest</span>

<span class="s">**Observability**:</span>
<span class="s">- Prometheus Stack: 51.0.0</span>
<span class="s">- Grafana: (included in Prometheus stack)</span>

<span class="s">**Security**:</span>
<span class="s">- Trivy Operator: latest</span>
<span class="s">- Kyverno: latest</span>

<span class="s">## Next Steps</span>

<span class="s">1. Configure DNS records for all services</span>
<span class="s">2. Set up monitoring alerts</span>
<span class="s">3. Configure backup retention policies</span>
<span class="s">4. Onboard first users</span>
<span class="s">5. Deploy first application</span>

<span class="s">## Maintenance Windows</span>

<span class="s">- **Preferred Maintenance**: Sundays 04:00-05:00 UTC</span>
<span class="s">- **Backup Windows**: Daily 03:00-04:00 UTC</span>

<span class="s">## Support Contacts</span>

<span class="s">- Platform Team: platform-team@yourdomain.com</span>
<span class="s">- AWS Support: [Your AWS Support Plan]</span>
<span class="s">- On-Call: [PagerDuty/On-Call System]</span>

<span class="s">EOF</span>

cat<span class="w"> </span>DEPLOYMENT_RECORD.md
</code></pre></div>
<hr />
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues-and-solutions">Common Issues and Solutions</h3>
<h4 id="issue-pods-stuck-in-pending-state">Issue: Pods stuck in Pending state</h4>
<p><strong>Symptoms</strong>:
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Pending
</code></pre></div></p>
<p><strong>Diagnosis</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check pod events</span>
kubectl<span class="w"> </span>describe<span class="w"> </span>pod<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;

<span class="c1"># Common causes:</span>
<span class="c1"># 1. Insufficient resources</span>
kubectl<span class="w"> </span>describe<span class="w"> </span>nodes<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-A<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="s2">&quot;Allocated resources&quot;</span>

<span class="c1"># 2. PVC not bound</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pvc<span class="w"> </span>-A<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Pending

<span class="c1"># 3. Node selector/affinity issues</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pod<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span>-o<span class="w"> </span>yaml<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-A<span class="w"> </span><span class="m">10</span><span class="w"> </span>nodeSelector
</code></pre></div></p>
<p><strong>Solutions</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Scale up nodes if resource constrained</span>
eksctl<span class="w"> </span>scale<span class="w"> </span>nodegroup<span class="w"> </span>--cluster<span class="o">=</span>fawkes-production<span class="w"> </span>--nodes<span class="o">=</span><span class="m">9</span><span class="w"> </span>--name<span class="o">=</span>fawkes-ng-general

<span class="c1"># Check storage class</span>
kubectl<span class="w"> </span>get<span class="w"> </span>storageclass

<span class="c1"># Fix PVC issues</span>
kubectl<span class="w"> </span>describe<span class="w"> </span>pvc<span class="w"> </span>&lt;pvc-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;
</code></pre></div></p>
<h4 id="issue-cannot-access-services-via-ingress">Issue: Cannot access services via ingress</h4>
<p><strong>Symptoms</strong>:
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>https://argocd.fawkes.yourdomain.com
<span class="c1"># Returns timeout or connection refused</span>
</code></pre></div></p>
<p><strong>Diagnosis</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check ingress status</span>
kubectl<span class="w"> </span>get<span class="w"> </span>ingress<span class="w"> </span>-A
kubectl<span class="w"> </span>describe<span class="w"> </span>ingress<span class="w"> </span>&lt;ingress-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;

<span class="c1"># Check ALB controller logs</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>-l<span class="w"> </span>app.kubernetes.io/name<span class="o">=</span>aws-load-balancer-controller

<span class="c1"># Check target groups in AWS console</span>
aws<span class="w"> </span>elbv2<span class="w"> </span>describe-target-groups<span class="w"> </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Check security groups</span>
aws<span class="w"> </span>ec2<span class="w"> </span>describe-security-groups<span class="w"> </span>--group-ids<span class="w"> </span>&lt;sg-id&gt;
</code></pre></div></p>
<p><strong>Solutions</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Restart ALB controller</span>
kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment/aws-load-balancer-controller<span class="w"> </span>-n<span class="w"> </span>kube-system

<span class="c1"># Check certificate ARN is correct</span>
kubectl<span class="w"> </span>get<span class="w"> </span>ingress<span class="w"> </span>&lt;ingress-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span>-o<span class="w"> </span>yaml<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>certificate-arn

<span class="c1"># Verify DNS resolution</span>
nslookup<span class="w"> </span>argocd.fawkes.yourdomain.com
</code></pre></div></p>
<h4 id="issue-database-connection-failures">Issue: Database connection failures</h4>
<p><strong>Symptoms</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Pods crashlooping with database errors</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;database\|postgres&quot;</span>
</code></pre></div></p>
<p><strong>Diagnosis</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check RDS status</span>
aws<span class="w"> </span>rds<span class="w"> </span>describe-db-instances<span class="w"> </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db

<span class="c1"># Test connectivity from cluster</span>
kubectl<span class="w"> </span>run<span class="w"> </span>postgres-test<span class="w"> </span>--rm<span class="w"> </span>-i<span class="w"> </span>--tty<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--image<span class="w"> </span>postgres:15<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--restart<span class="o">=</span>Never<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--env<span class="o">=</span><span class="s2">&quot;PGPASSWORD=</span><span class="nv">$DB_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--<span class="w"> </span>psql<span class="w"> </span>-h<span class="w"> </span><span class="nv">$RDS_ENDPOINT</span><span class="w"> </span>-U<span class="w"> </span>fawkesadmin<span class="w"> </span>-d<span class="w"> </span>postgres<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;SELECT 1&quot;</span>

<span class="c1"># Check security group rules</span>
aws<span class="w"> </span>ec2<span class="w"> </span>describe-security-groups<span class="w"> </span>--group-ids<span class="w"> </span>&lt;rds-sg-id&gt;
</code></pre></div></p>
<p><strong>Solutions</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Verify security group allows traffic from EKS nodes</span>
<span class="nv">EKS_NODE_SG</span><span class="o">=</span><span class="k">$(</span>aws<span class="w"> </span>eks<span class="w"> </span>describe-cluster<span class="w"> </span>--name<span class="w"> </span>fawkes-production<span class="w"> </span>--query<span class="w"> </span><span class="s2">&quot;cluster.resourcesVpcConfig.clusterSecurityGroupId&quot;</span><span class="w"> </span>--output<span class="w"> </span>text<span class="k">)</span>

aws<span class="w"> </span>ec2<span class="w"> </span>authorize-security-group-ingress<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--group-id<span class="w"> </span><span class="nv">$RDS_SG_ID</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--protocol<span class="w"> </span>tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--port<span class="w"> </span><span class="m">5432</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--source-group<span class="w"> </span><span class="nv">$EKS_NODE_SG</span>

<span class="c1"># Check secrets are correct</span>
kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>postgres-credentials<span class="w"> </span>-n<span class="w"> </span>fawkes-system<span class="w"> </span>-o<span class="w"> </span>yaml
</code></pre></div></p>
<h4 id="issue-high-aws-costs">Issue: High AWS costs</h4>
<p><strong>Diagnosis</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check current month&#39;s costs</span>
aws<span class="w"> </span>ce<span class="w"> </span>get-cost-and-usage<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--time-period<span class="w"> </span><span class="nv">Start</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>date<span class="w"> </span>+%Y-%m-01<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>+%Y-%m-%d<span class="k">)</span>,End<span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%Y-%m-%d<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--granularity<span class="w"> </span>MONTHLY<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--metrics<span class="w"> </span>UnblendedCost<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--group-by<span class="w"> </span><span class="nv">Type</span><span class="o">=</span>SERVICE

<span class="c1"># Identify expensive resources</span>
kubectl<span class="w"> </span>top<span class="w"> </span>nodes
kubectl<span class="w"> </span>top<span class="w"> </span>pods<span class="w"> </span>-A
</code></pre></div></p>
<p><strong>Solutions</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Right-size nodes</span>
eksctl<span class="w"> </span>scale<span class="w"> </span>nodegroup<span class="w"> </span>--cluster<span class="o">=</span>fawkes-production<span class="w"> </span>--nodes<span class="o">=</span><span class="m">3</span><span class="w"> </span>--name<span class="o">=</span>fawkes-ng-general

<span class="c1"># Delete unused EBS volumes</span>
aws<span class="w"> </span>ec2<span class="w"> </span>describe-volumes<span class="w"> </span>--filters<span class="w"> </span><span class="nv">Name</span><span class="o">=</span>status,Values<span class="o">=</span>available<span class="w"> </span>--query<span class="w"> </span><span class="s1">&#39;Volumes[*].[VolumeId,Size,CreateTime]&#39;</span><span class="w"> </span>--output<span class="w"> </span>table

<span class="c1"># Configure auto-scaling</span>
<span class="c1"># (Already configured in Step 2.5)</span>

<span class="c1"># Use Spot instances for dev/staging</span>
<span class="c1"># Edit nodegroup configuration to use Spot</span>

<span class="c1"># Set up AWS Budgets alerts</span>
aws<span class="w"> </span>budgets<span class="w"> </span>create-budget<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--account-id<span class="w"> </span><span class="k">$(</span>aws<span class="w"> </span>sts<span class="w"> </span>get-caller-identity<span class="w"> </span>--query<span class="w"> </span>Account<span class="w"> </span>--output<span class="w"> </span>text<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--budget<span class="w"> </span>file://budget-alert.json
</code></pre></div></p>
<h4 id="issue-certificate-validation-pending">Issue: Certificate validation pending</h4>
<p><strong>Symptoms</strong>:
<div class="highlight"><pre><span></span><code>aws<span class="w"> </span>acm<span class="w"> </span>describe-certificate<span class="w"> </span>--certificate-arn<span class="w"> </span>&lt;cert-arn&gt;<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Status
<span class="c1"># Returns: PENDING_VALIDATION</span>
</code></pre></div></p>
<p><strong>Solutions</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Get validation records</span>
aws<span class="w"> </span>acm<span class="w"> </span>describe-certificate<span class="w"> </span>--certificate-arn<span class="w"> </span>&lt;cert-arn&gt;<span class="w"> </span>--query<span class="w"> </span><span class="s1">&#39;Certificate.DomainValidationOptions[0].ResourceRecord&#39;</span>

<span class="c1"># Add DNS record for validation</span>
<span class="c1"># In Route53 or your DNS provider, create a CNAME record with the values returned above</span>

<span class="c1"># Wait for validation (can take 5-30 minutes)</span>
aws<span class="w"> </span>acm<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>certificate-validated<span class="w"> </span>--certificate-arn<span class="w"> </span>&lt;cert-arn&gt;
</code></pre></div></p>
<hr />
<h2 id="cost-optimization">Cost Optimization</h2>
<h3 id="immediate-optimizations-week-1">Immediate Optimizations (Week 1)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Right-size EKS nodes based on actual usage</span>
kubectl<span class="w"> </span>top<span class="w"> </span>nodes
kubectl<span class="w"> </span>top<span class="w"> </span>pods<span class="w"> </span>-A<span class="w"> </span>--sort-by<span class="o">=</span>memory

<span class="c1"># If utilization &lt; 50%, scale down</span>
eksctl<span class="w"> </span>scale<span class="w"> </span>nodegroup<span class="w"> </span>--cluster<span class="o">=</span>fawkes-production<span class="w"> </span>--nodes<span class="o">=</span><span class="m">4</span><span class="w"> </span>--name<span class="o">=</span>fawkes-ng-general

<span class="c1"># 2. Delete unused EBS volumes</span>
aws<span class="w"> </span>ec2<span class="w"> </span>describe-volumes<span class="w"> </span>--filters<span class="w"> </span><span class="nv">Name</span><span class="o">=</span>status,Values<span class="o">=</span>available<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s1">&#39;Volumes[*].[VolumeId,Size,CreateTime]&#39;</span><span class="w"> </span>--output<span class="w"> </span>table

<span class="c1"># Delete them</span>
aws<span class="w"> </span>ec2<span class="w"> </span>delete-volume<span class="w"> </span>--volume-id<span class="w"> </span>vol-xxxxxxxxx

<span class="c1"># 3. Configure S3 lifecycle policies</span>
aws<span class="w"> </span>s3api<span class="w"> </span>put-bucket-lifecycle-configuration<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--bucket<span class="w"> </span>fawkes-logs-prod-YOUR-UNIQUE-ID<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--lifecycle-configuration<span class="w"> </span>file://s3-lifecycle.json

<span class="c1"># s3-lifecycle.json content:</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>s3-lifecycle.json<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">{</span>
<span class="s">  &quot;Rules&quot;: [</span>
<span class="s">    {</span>
<span class="s">      &quot;Id&quot;: &quot;ArchiveOldLogs&quot;,</span>
<span class="s">      &quot;Status&quot;: &quot;Enabled&quot;,</span>
<span class="s">      &quot;Transitions&quot;: [</span>
<span class="s">        {</span>
<span class="s">          &quot;Days&quot;: 30,</span>
<span class="s">          &quot;StorageClass&quot;: &quot;STANDARD_IA&quot;</span>
<span class="s">        },</span>
<span class="s">        {</span>
<span class="s">          &quot;Days&quot;: 90,</span>
<span class="s">          &quot;StorageClass&quot;: &quot;GLACIER&quot;</span>
<span class="s">        }</span>
<span class="s">      ],</span>
<span class="s">      &quot;Expiration&quot;: {</span>
<span class="s">        &quot;Days&quot;: 365</span>
<span class="s">      }</span>
<span class="s">    }</span>
<span class="s">  ]</span>
<span class="s">}</span>
<span class="s">EOF</span>
</code></pre></div>
<h3 id="long-term-optimizations-month-2-3">Long-term Optimizations (Month 2-3)</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Purchase Reserved Instances (40% savings)</span>
<span class="c1"># After validating instance types and sizes, purchase 1-year RIs</span>
aws<span class="w"> </span>ec2<span class="w"> </span>describe-reserved-instances-offerings<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--instance-type<span class="w"> </span>t3.xlarge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--offering-class<span class="w"> </span>standard<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--product-description<span class="w"> </span>Linux/UNIX

<span class="c1"># 2. Use Savings Plans for RDS</span>
aws<span class="w"> </span>rds<span class="w"> </span>purchase-reserved-db-instances-offering<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--reserved-db-instances-offering-id<span class="w"> </span>&lt;offering-id&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--reserved-db-instance-id<span class="w"> </span>fawkes-production-db-reserved

<span class="c1"># 3. Implement cluster autoscaling policies</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | kubectl apply -f -</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: ConfigMap</span>
<span class="s">metadata:</span>
<span class="s">  name: cluster-autoscaler-priority-expander</span>
<span class="s">  namespace: kube-system</span>
<span class="s">data:</span>
<span class="s">  priorities: |-</span>
<span class="s">    10:</span>
<span class="s">      - .*-spot-.*</span>
<span class="s">    50:</span>
<span class="s">      - .*-on-demand-.*</span>
<span class="s">EOF</span>

<span class="c1"># 4. Use Spot instances for non-critical workloads</span>
<span class="c1"># Create a mixed instance nodegroup</span>
eksctl<span class="w"> </span>create<span class="w"> </span>nodegroup<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--cluster<span class="o">=</span>fawkes-production<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="o">=</span>fawkes-ng-spot<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--node-type<span class="o">=</span>t3.xlarge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--nodes<span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--nodes-min<span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--nodes-max<span class="o">=</span><span class="m">10</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--spot

<span class="c1"># 5. Enable AWS Compute Optimizer</span>
aws<span class="w"> </span>compute-optimizer<span class="w"> </span>update-enrollment-status<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--status<span class="w"> </span>Active<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--include-member-accounts
</code></pre></div>
<h3 id="monitoring-costs">Monitoring Costs</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create cost monitoring dashboard</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>cost-monitoring.sh<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39;</span>
<span class="s">#!/bin/bash</span>

<span class="s">echo &quot;===== Fawkes AWS Cost Report =====&quot;</span>
<span class="s">echo &quot;Report Date: $(date)&quot;</span>
<span class="s">echo &quot;&quot;</span>

<span class="s"># Current month costs</span>
<span class="s">echo &quot;Current Month Costs:&quot;</span>
<span class="s">aws ce get-cost-and-usage \</span>
<span class="s">  --time-period Start=$(date -d &quot;$(date +%Y-%m-01)&quot; +%Y-%m-%d),End=$(date +%Y-%m-%d) \</span>
<span class="s">  --granularity MONTHLY \</span>
<span class="s">  --metrics UnblendedCost \</span>
<span class="s">  --group-by Type=SERVICE \</span>
<span class="s">  --filter file://&lt;(echo &#39;{</span>
<span class="s">    &quot;Tags&quot;: {</span>
<span class="s">      &quot;Key&quot;: &quot;Project&quot;,</span>
<span class="s">      &quot;Values&quot;: [&quot;fawkes&quot;]</span>
<span class="s">    }</span>
<span class="s">  }&#39;) \</span>
<span class="s">  --output table</span>

<span class="s">echo &quot;&quot;</span>
<span class="s">echo &quot;Top 10 Most Expensive Resources:&quot;</span>
<span class="s">aws ce get-cost-and-usage \</span>
<span class="s">  --time-period Start=$(date -d &quot;$(date +%Y-%m-01)&quot; +%Y-%m-%d),End=$(date +%Y-%m-%d) \</span>
<span class="s">  --granularity MONTHLY \</span>
<span class="s">  --metrics UnblendedCost \</span>
<span class="s">  --group-by Type=DIMENSION,Key=RESOURCE_ID \</span>
<span class="s">  --filter file://&lt;(echo &#39;{</span>
<span class="s">    &quot;Tags&quot;: {</span>
<span class="s">      &quot;Key&quot;: &quot;Project&quot;,</span>
<span class="s">      &quot;Values&quot;: [&quot;fawkes&quot;]</span>
<span class="s">    }</span>
<span class="s">  }&#39;) \</span>
<span class="s">  --query &#39;ResultsByTime[0].Groups | sort_by(@, &amp;Metrics.UnblendedCost.Amount) | reverse(@) | [0:10]&#39; \</span>
<span class="s">  --output table</span>

<span class="s">echo &quot;&quot;</span>
<span class="s">echo &quot;Projected Month-End Cost:&quot;</span>
<span class="s">aws ce get-cost-forecast \</span>
<span class="s">  --time-period Start=$(date +%Y-%m-%d),End=$(date -d &quot;$(date +%Y-%m-01) +1 month -1 day&quot; +%Y-%m-%d) \</span>
<span class="s">  --metric UNBLENDED_COST \</span>
<span class="s">  --granularity MONTHLY \</span>
<span class="s">  --output table</span>

<span class="s">echo &quot;&quot;</span>
<span class="s">echo &quot;=====================================&quot;</span>
<span class="s">EOF</span>

chmod<span class="w"> </span>+x<span class="w"> </span>cost-monitoring.sh
./cost-monitoring.sh
</code></pre></div>
<hr />
<h2 id="appendix-a-complete-deployment-checklist">Appendix A: Complete Deployment Checklist</h2>
<h3 id="pre-deployment">Pre-Deployment</h3>
<ul>
<li>[ ] AWS account with appropriate permissions</li>
<li>[ ] All required tools installed (AWS CLI, kubectl, terraform, helm, eksctl)</li>
<li>[ ] Domain name registered (optional but recommended)</li>
<li>[ ] Budget alerts configured</li>
<li>[ ] Team notified of deployment window</li>
<li>[ ] Passwords generated and stored securely</li>
<li>[ ] S3 bucket names chosen (globally unique)</li>
</ul>
<h3 id="phase-1-foundation-30-min">Phase 1: Foundation (30 min)</h3>
<ul>
<li>[ ] Terraform initialized</li>
<li>[ ] VPC and networking deployed</li>
<li>[ ] NAT Gateways provisioned</li>
<li>[ ] S3 buckets created with encryption</li>
<li>[ ] Secrets stored in AWS Secrets Manager</li>
<li>[ ] SSL certificate requested (if using custom domain)</li>
<li>[ ] Validation: VPC, subnets, NAT gateways, S3 buckets exist</li>
</ul>
<h3 id="phase-2-eks-cluster-30-min">Phase 2: EKS Cluster (30 min)</h3>
<ul>
<li>[ ] EKS cluster created</li>
<li>[ ] Worker nodes launched across 3 AZs</li>
<li>[ ] kubectl configured</li>
<li>[ ] AWS Load Balancer Controller installed</li>
<li>[ ] External Secrets Operator installed</li>
<li>[ ] Cluster Autoscaler configured</li>
<li>[ ] Validation: All nodes Ready, system pods running</li>
</ul>
<h3 id="phase-3-database-storage-20-min">Phase 3: Database &amp; Storage (20 min)</h3>
<ul>
<li>[ ] RDS PostgreSQL instance created (Multi-AZ)</li>
<li>[ ] Security groups configured</li>
<li>[ ] Database connectivity verified</li>
<li>[ ] Databases initialized for each component</li>
<li>[ ] Storage classes configured</li>
<li>[ ] Validation: RDS available, connectivity tested</li>
</ul>
<h3 id="phase-4-platform-services-60-min">Phase 4: Platform Services (60 min)</h3>
<ul>
<li>[ ] Namespaces created</li>
<li>[ ] ArgoCD deployed and accessible</li>
<li>[ ] Harbor deployed and accessible</li>
<li>[ ] Jenkins deployed and accessible</li>
<li>[ ] Backstage deployed and accessible</li>
<li>[ ] Mattermost deployed and accessible</li>
<li>[ ] Focalboard deployed and accessible</li>
<li>[ ] Validation: All services responding, ingresses have ALB addresses</li>
</ul>
<h3 id="phase-5-observability-30-min">Phase 5: Observability (30 min)</h3>
<ul>
<li>[ ] Prometheus stack deployed</li>
<li>[ ] Grafana accessible with dashboards</li>
<li>[ ] DORA metrics exporter deployed</li>
<li>[ ] Alerting configured</li>
<li>[ ] Validation: Prometheus scraping, Grafana dashboards visible</li>
</ul>
<h3 id="phase-6-security-20-min">Phase 6: Security (20 min)</h3>
<ul>
<li>[ ] Trivy Operator deployed</li>
<li>[ ] Kyverno policies deployed</li>
<li>[ ] Network policies configured</li>
<li>[ ] Pod Security Standards applied</li>
<li>[ ] RBAC roles created</li>
<li>[ ] Validation: Vulnerability scans running, policies enforced</li>
</ul>
<h3 id="phase-7-validation-30-min">Phase 7: Validation (30 min)</h3>
<ul>
<li>[ ] Health check script run successfully</li>
<li>[ ] Connectivity tests pass</li>
<li>[ ] Test application deployed</li>
<li>[ ] DORA metrics collecting</li>
<li>[ ] Security scan completed</li>
<li>[ ] Validation: All green checks</li>
</ul>
<h3 id="post-deployment">Post-Deployment</h3>
<ul>
<li>[ ] DNS records configured</li>
<li>[ ] Backups configured (Velero)</li>
<li>[ ] Monitoring and alerting verified</li>
<li>[ ] Cost tracking enabled</li>
<li>[ ] Documentation completed</li>
<li>[ ] Team access granted</li>
<li>[ ] First application deployed</li>
<li>[ ] Runbook created</li>
</ul>
<hr />
<h2 id="appendix-b-useful-commands-reference">Appendix B: Useful Commands Reference</h2>
<h3 id="cluster-management">Cluster Management</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Get cluster info</span>
kubectl<span class="w"> </span>cluster-info
eksctl<span class="w"> </span>get<span class="w"> </span>cluster<span class="w"> </span>--name<span class="w"> </span>fawkes-production

<span class="c1"># Get all resources</span>
kubectl<span class="w"> </span>get<span class="w"> </span>all<span class="w"> </span>-A

<span class="c1"># Scale nodegroup</span>
eksctl<span class="w"> </span>scale<span class="w"> </span>nodegroup<span class="w"> </span>--cluster<span class="o">=</span>fawkes-production<span class="w"> </span>--nodes<span class="o">=</span><span class="m">6</span><span class="w"> </span>--name<span class="o">=</span>fawkes-ng-general

<span class="c1"># Update kubeconfig</span>
aws<span class="w"> </span>eks<span class="w"> </span>update-kubeconfig<span class="w"> </span>--region<span class="w"> </span>us-east-1<span class="w"> </span>--name<span class="w"> </span>fawkes-production

<span class="c1"># Drain node for maintenance</span>
kubectl<span class="w"> </span>drain<span class="w"> </span>&lt;node-name&gt;<span class="w"> </span>--ignore-daemonsets<span class="w"> </span>--delete-emptydir-data

<span class="c1"># Uncordon node after maintenance</span>
kubectl<span class="w"> </span>uncordon<span class="w"> </span>&lt;node-name&gt;
</code></pre></div>
<h3 id="debugging">Debugging</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># View pod logs</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;
kubectl<span class="w"> </span>logs<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span>--previous<span class="w">  </span><span class="c1"># Previous container</span>

<span class="c1"># Follow logs</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;

<span class="c1"># Exec into pod</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span>--<span class="w"> </span>/bin/bash

<span class="c1"># Port forward</span>
kubectl<span class="w"> </span>port-forward<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span>svc/&lt;service-name&gt;<span class="w"> </span><span class="m">8080</span>:80

<span class="c1"># Describe resources</span>
kubectl<span class="w"> </span>describe<span class="w"> </span>pod<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;
kubectl<span class="w"> </span>describe<span class="w"> </span>node<span class="w"> </span>&lt;node-name&gt;

<span class="c1"># Get events</span>
kubectl<span class="w"> </span>get<span class="w"> </span>events<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span>--sort-by<span class="o">=</span><span class="s1">&#39;.lastTimestamp&#39;</span>

<span class="c1"># Check resource usage</span>
kubectl<span class="w"> </span>top<span class="w"> </span>nodes
kubectl<span class="w"> </span>top<span class="w"> </span>pods<span class="w"> </span>-A
</code></pre></div>
<h3 id="backup-and-restore">Backup and Restore</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create backup</span>
velero<span class="w"> </span>backup<span class="w"> </span>create<span class="w"> </span>&lt;backup-name&gt;<span class="w"> </span>--include-namespaces<span class="w"> </span>&lt;namespace&gt;

<span class="c1"># List backups</span>
velero<span class="w"> </span>backup<span class="w"> </span>get

<span class="c1"># Restore from backup</span>
velero<span class="w"> </span>restore<span class="w"> </span>create<span class="w"> </span>--from-backup<span class="w"> </span>&lt;backup-name&gt;

<span class="c1"># Backup specific resource</span>
velero<span class="w"> </span>backup<span class="w"> </span>create<span class="w"> </span>&lt;backup-name&gt;<span class="w"> </span>--include-resources<span class="w"> </span>deployments,services

<span class="c1"># Schedule regular backups</span>
velero<span class="w"> </span>schedule<span class="w"> </span>create<span class="w"> </span>daily<span class="w"> </span>--schedule<span class="o">=</span><span class="s2">&quot;0 2 * * *&quot;</span><span class="w"> </span>--ttl<span class="w"> </span>720h
</code></pre></div>
<h3 id="certificate-management">Certificate Management</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># List certificates</span>
aws<span class="w"> </span>acm<span class="w"> </span>list-certificates<span class="w"> </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Describe certificate</span>
aws<span class="w"> </span>acm<span class="w"> </span>describe-certificate<span class="w"> </span>--certificate-arn<span class="w"> </span>&lt;arn&gt;

<span class="c1"># Request new certificate</span>
aws<span class="w"> </span>acm<span class="w"> </span>request-certificate<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--domain-name<span class="w"> </span>fawkes.yourdomain.com<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--validation-method<span class="w"> </span>DNS<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span>us-east-1

<span class="c1"># Delete certificate</span>
aws<span class="w"> </span>acm<span class="w"> </span>delete-certificate<span class="w"> </span>--certificate-arn<span class="w"> </span>&lt;arn&gt;
</code></pre></div>
<h3 id="database-operations">Database Operations</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Connect to RDS</span>
kubectl<span class="w"> </span>run<span class="w"> </span>postgres-client<span class="w"> </span>--rm<span class="w"> </span>-i<span class="w"> </span>--tty<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--image<span class="w"> </span>postgres:15<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--restart<span class="o">=</span>Never<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--env<span class="o">=</span><span class="s2">&quot;PGPASSWORD=</span><span class="nv">$DB_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--<span class="w"> </span>psql<span class="w"> </span>-h<span class="w"> </span><span class="nv">$RDS_ENDPOINT</span><span class="w"> </span>-U<span class="w"> </span>fawkesadmin<span class="w"> </span>-d<span class="w"> </span>postgres

<span class="c1"># Create database dump</span>
kubectl<span class="w"> </span>run<span class="w"> </span>postgres-backup<span class="w"> </span>--rm<span class="w"> </span>-i<span class="w"> </span>--tty<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--image<span class="w"> </span>postgres:15<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--restart<span class="o">=</span>Never<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--env<span class="o">=</span><span class="s2">&quot;PGPASSWORD=</span><span class="nv">$DB_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--<span class="w"> </span>pg_dump<span class="w"> </span>-h<span class="w"> </span><span class="nv">$RDS_ENDPOINT</span><span class="w"> </span>-U<span class="w"> </span>fawkesadmin<span class="w"> </span>-d<span class="w"> </span>backstage<span class="w"> </span>&gt;<span class="w"> </span>backstage-backup.sql

<span class="c1"># Restore database</span>
kubectl<span class="w"> </span>run<span class="w"> </span>postgres-restore<span class="w"> </span>--rm<span class="w"> </span>-i<span class="w"> </span>--tty<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--image<span class="w"> </span>postgres:15<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--restart<span class="o">=</span>Never<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--env<span class="o">=</span><span class="s2">&quot;PGPASSWORD=</span><span class="nv">$DB_PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--<span class="w"> </span>psql<span class="w"> </span>-h<span class="w"> </span><span class="nv">$RDS_ENDPOINT</span><span class="w"> </span>-U<span class="w"> </span>fawkesadmin<span class="w"> </span>-d<span class="w"> </span>backstage<span class="w"> </span>&lt;<span class="w"> </span>backstage-backup.sql
</code></pre></div>
<h3 id="secrets-management_1">Secrets Management</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create secret from AWS Secrets Manager</span>
kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>my-secret<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">password</span><span class="o">=</span><span class="k">$(</span>aws<span class="w"> </span>secretsmanager<span class="w"> </span>get-secret-value<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--secret-id<span class="w"> </span>fawkes/production/db-password<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--query<span class="w"> </span>SecretString<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output<span class="w"> </span>text<span class="k">)</span>

<span class="c1"># View secret (base64 decoded)</span>
kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>&lt;secret-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.password}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d

<span class="c1"># Update secret</span>
kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>&lt;secret-name&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">key</span><span class="o">=</span>value<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--dry-run<span class="o">=</span>client<span class="w"> </span>-o<span class="w"> </span>yaml<span class="w"> </span><span class="p">|</span><span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-
</code></pre></div>
<hr />
<h2 id="appendix-c-disaster-recovery-procedures">Appendix C: Disaster Recovery Procedures</h2>
<h3 id="rds-failure">RDS Failure</h3>
<p><strong>Detection</strong>:
<div class="highlight"><pre><span></span><code>aws<span class="w"> </span>rds<span class="w"> </span>describe-db-instances<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s1">&#39;DBInstances[0].DBInstanceStatus&#39;</span>
</code></pre></div></p>
<p><strong>Recovery</strong> (Multi-AZ automatic failover):
<div class="highlight"><pre><span></span><code><span class="c1"># Force failover to standby</span>
aws<span class="w"> </span>rds<span class="w"> </span>reboot-db-instance<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--force-failover

<span class="c1"># Wait for availability</span>
aws<span class="w"> </span>rds<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>db-instance-available<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db

<span class="c1"># Verify new endpoint (should be same)</span>
aws<span class="w"> </span>rds<span class="w"> </span>describe-db-instances<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s1">&#39;DBInstances[0].Endpoint.Address&#39;</span>
</code></pre></div></p>
<p><strong>Recovery</strong> (Complete failure - restore from snapshot):
<div class="highlight"><pre><span></span><code><span class="c1"># List recent snapshots</span>
aws<span class="w"> </span>rds<span class="w"> </span>describe-db-snapshots<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s1">&#39;DBSnapshots[*].[DBSnapshotIdentifier,SnapshotCreateTime]&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>table

<span class="c1"># Restore from snapshot</span>
aws<span class="w"> </span>rds<span class="w"> </span>restore-db-instance-from-db-snapshot<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db-restored<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-snapshot-identifier<span class="w"> </span>&lt;snapshot-id&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-subnet-group-name<span class="w"> </span>fawkes-production-db-subnet<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--multi-az

<span class="c1"># Update connection strings in Kubernetes secrets</span>
<span class="nv">NEW_ENDPOINT</span><span class="o">=</span><span class="k">$(</span>aws<span class="w"> </span>rds<span class="w"> </span>describe-db-instances<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db-restored<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s1">&#39;DBInstances[0].Endpoint.Address&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>text<span class="k">)</span>

kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>postgres-credentials<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">host</span><span class="o">=</span><span class="nv">$NEW_ENDPOINT</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">port</span><span class="o">=</span><span class="m">5432</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">database</span><span class="o">=</span>postgres<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">username</span><span class="o">=</span>fawkesadmin<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">password</span><span class="o">=</span><span class="nv">$DB_PASSWORD</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-n<span class="w"> </span>fawkes-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--dry-run<span class="o">=</span>client<span class="w"> </span>-o<span class="w"> </span>yaml<span class="w"> </span><span class="p">|</span><span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-

<span class="c1"># Restart all pods using database</span>
kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment<span class="w"> </span>-n<span class="w"> </span>backstage
kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment<span class="w"> </span>-n<span class="w"> </span>jenkins
kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment<span class="w"> </span>-n<span class="w"> </span>argocd
kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment<span class="w"> </span>-n<span class="w"> </span>harbor
kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment<span class="w"> </span>-n<span class="w"> </span>mattermost
kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment<span class="w"> </span>-n<span class="w"> </span>focalboard
</code></pre></div></p>
<h3 id="eks-cluster-failure">EKS Cluster Failure</h3>
<p><strong>Detection</strong>:
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>nodes
<span class="c1"># No response or all nodes NotReady</span>
</code></pre></div></p>
<p><strong>Recovery</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Check cluster status</span>
aws<span class="w"> </span>eks<span class="w"> </span>describe-cluster<span class="w"> </span>--name<span class="w"> </span>fawkes-production<span class="w"> </span>--query<span class="w"> </span><span class="s1">&#39;cluster.status&#39;</span>

<span class="c1"># If cluster API is down, recreate from Terraform</span>
<span class="nb">cd</span><span class="w"> </span>infra/terraform/aws
terraform<span class="w"> </span>plan<span class="w"> </span>-var-file<span class="o">=</span>production.tfvars
terraform<span class="w"> </span>apply

<span class="c1"># Restore from Velero backup</span>
velero<span class="w"> </span>restore<span class="w"> </span>create<span class="w"> </span>--from-backup<span class="w"> </span>daily-backup-20251007
</code></pre></div></p>
<h3 id="complete-region-failure">Complete Region Failure</h3>
<p><strong>Prerequisites</strong>:
- Multi-region setup (not covered in this guide)
- Cross-region RDS replication
- S3 cross-region replication</p>
<p><strong>Recovery</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Promote RDS read replica in secondary region</span>
aws<span class="w"> </span>rds<span class="w"> </span>promote-read-replica<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db-replica<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span>us-west-2

<span class="c1"># Deploy EKS cluster in secondary region</span>
<span class="nb">cd</span><span class="w"> </span>infra/terraform/aws
terraform<span class="w"> </span>apply<span class="w"> </span>-var-file<span class="o">=</span>dr-production.tfvars<span class="w"> </span>-var<span class="o">=</span><span class="s2">&quot;aws_region=us-west-2&quot;</span>

<span class="c1"># Update DNS to point to new region</span>
aws<span class="w"> </span>route53<span class="w"> </span>change-resource-record-sets<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--hosted-zone-id<span class="w"> </span>&lt;zone-id&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--change-batch<span class="w"> </span>file://failover-dns.json
</code></pre></div></p>
<hr />
<h2 id="appendix-d-maintenance-procedures">Appendix D: Maintenance Procedures</h2>
<h3 id="monthly-maintenance-tasks">Monthly Maintenance Tasks</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Update EKS cluster version</span>
eksctl<span class="w"> </span>upgrade<span class="w"> </span>cluster<span class="w"> </span>--name<span class="w"> </span>fawkes-production<span class="w"> </span>--version<span class="w"> </span><span class="m">1</span>.29<span class="w"> </span>--approve

<span class="c1"># 2. Update nodegroups</span>
eksctl<span class="w"> </span>upgrade<span class="w"> </span>nodegroup<span class="w"> </span>--cluster<span class="o">=</span>fawkes-production<span class="w"> </span>--name<span class="o">=</span>fawkes-ng-general

<span class="c1"># 3. Update Helm charts</span>
helm<span class="w"> </span>repo<span class="w"> </span>update
helm<span class="w"> </span>list<span class="w"> </span>-A

<span class="c1"># Update each chart</span>
helm<span class="w"> </span>upgrade<span class="w"> </span>argocd<span class="w"> </span>argo/argo-cd<span class="w"> </span>-n<span class="w"> </span>argocd<span class="w"> </span>--version<span class="w"> </span>&lt;new-version&gt;
helm<span class="w"> </span>upgrade<span class="w"> </span>harbor<span class="w"> </span>harbor/harbor<span class="w"> </span>-n<span class="w"> </span>harbor<span class="w"> </span>--version<span class="w"> </span>&lt;new-version&gt;
<span class="c1"># ... etc</span>

<span class="c1"># 4. Update add-ons</span>
eksctl<span class="w"> </span>utils<span class="w"> </span>update-addon<span class="w"> </span>--cluster<span class="w"> </span>fawkes-production<span class="w"> </span>--name<span class="w"> </span>vpc-cni<span class="w"> </span>--version<span class="w"> </span>&lt;new-version&gt;
eksctl<span class="w"> </span>utils<span class="w"> </span>update-addon<span class="w"> </span>--cluster<span class="w"> </span>fawkes-production<span class="w"> </span>--name<span class="w"> </span>coredns<span class="w"> </span>--version<span class="w"> </span>&lt;new-version&gt;
eksctl<span class="w"> </span>utils<span class="w"> </span>update-addon<span class="w"> </span>--cluster<span class="w"> </span>fawkes-production<span class="w"> </span>--name<span class="w"> </span>kube-proxy<span class="w"> </span>--version<span class="w"> </span>&lt;new-version&gt;
eksctl<span class="w"> </span>utils<span class="w"> </span>update-addon<span class="w"> </span>--cluster<span class="w"> </span>fawkes-production<span class="w"> </span>--name<span class="w"> </span>aws-ebs-csi-driver<span class="w"> </span>--version<span class="w"> </span>&lt;new-version&gt;

<span class="c1"># 5. Clean up old resources</span>
<span class="c1"># Delete old EBS snapshots</span>
aws<span class="w"> </span>ec2<span class="w"> </span>describe-snapshots<span class="w"> </span>--owner-ids<span class="w"> </span>self<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s1">&#39;Snapshots[?StartTime&lt;=`2024-07-01`].[SnapshotId,StartTime,Description]&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>table

<span class="c1"># Delete them</span>
aws<span class="w"> </span>ec2<span class="w"> </span>delete-snapshot<span class="w"> </span>--snapshot-id<span class="w"> </span>snap-xxxxxxxxx

<span class="c1"># 6. Review and clean up unused PVCs</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pvc<span class="w"> </span>-A<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Released
kubectl<span class="w"> </span>delete<span class="w"> </span>pvc<span class="w"> </span>&lt;pvc-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;

<span class="c1"># 7. Rotate secrets</span>
<span class="c1"># Generate new password</span>
<span class="nv">NEW_DB_PASSWORD</span><span class="o">=</span><span class="k">$(</span>openssl<span class="w"> </span>rand<span class="w"> </span>-base64<span class="w"> </span><span class="m">32</span><span class="k">)</span>

<span class="c1"># Update in RDS</span>
aws<span class="w"> </span>rds<span class="w"> </span>modify-db-instance<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--db-instance-identifier<span class="w"> </span>fawkes-production-db<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--master-user-password<span class="w"> </span><span class="nv">$NEW_DB_PASSWORD</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--apply-immediately

<span class="c1"># Update in Secrets Manager</span>
aws<span class="w"> </span>secretsmanager<span class="w"> </span>update-secret<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--secret-id<span class="w"> </span>fawkes/production/db-password<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--secret-string<span class="w"> </span><span class="nv">$NEW_DB_PASSWORD</span>

<span class="c1"># Update in Kubernetes</span>
kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>postgres-credentials<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">password</span><span class="o">=</span><span class="nv">$NEW_DB_PASSWORD</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--dry-run<span class="o">=</span>client<span class="w"> </span>-o<span class="w"> </span>yaml<span class="w"> </span><span class="p">|</span><span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-

<span class="c1"># 8. Review security scan results</span>
kubectl<span class="w"> </span>get<span class="w"> </span>vulnerabilityreports<span class="w"> </span>-A<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>CRITICAL

<span class="c1"># 9. Review and update network policies</span>
kubectl<span class="w"> </span>get<span class="w"> </span>networkpolicies<span class="w"> </span>-A

<span class="c1"># 10. Cost optimization review</span>
./cost-monitoring.sh
</code></pre></div>
<h3 id="quarterly-maintenance-tasks">Quarterly Maintenance Tasks</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Major version upgrades (EKS, RDS)</span>
<span class="c1"># Follow AWS documentation for major version upgrades</span>

<span class="c1"># 2. Review and update IAM policies</span>
aws<span class="w"> </span>iam<span class="w"> </span>get-policy-version<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--policy-arn<span class="w"> </span>arn:aws:iam::ACCOUNT_ID:policy/FawkesPolicy<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--version-id<span class="w"> </span>v1

<span class="c1"># 3. Security audit</span>
aws<span class="w"> </span>securityhub<span class="w"> </span>get-findings<span class="w"> </span>--region<span class="w"> </span>us-east-1

<span class="c1"># 4. Compliance check</span>
aws<span class="w"> </span>config<span class="w"> </span>describe-compliance-by-config-rule

<span class="c1"># 5. Performance review</span>
<span class="c1"># Review Grafana dashboards for trends</span>
<span class="c1"># Analyze DORA metrics improvements</span>

<span class="c1"># 6. Disaster recovery test</span>
<span class="c1"># Perform complete failover test in DR environment</span>

<span class="c1"># 7. Documentation review</span>
<span class="c1"># Update runbooks, procedures, contact information</span>
</code></pre></div>
<hr />
<h2 id="appendix-e-additional-resources">Appendix E: Additional Resources</h2>
<h3 id="official-documentation">Official Documentation</h3>
<ul>
<li><a href="https://docs.aws.amazon.com/eks/latest/userguide/">Amazon EKS User Guide</a></li>
<li><a href="https://docs.aws.amazon.com/rds/latest/userguide/">Amazon RDS User Guide</a></li>
<li><a href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/">AWS Load Balancer Controller</a></li>
<li><a href="https://backstage.io/docs/overview/what-is-backstage">Backstage Documentation</a></li>
<li><a href="https://argo-cd.readthedocs.io/">ArgoCD Documentation</a></li>
<li><a href="https://goharbor.io/docs/">Harbor Documentation</a></li>
</ul>
<h3 id="best-practices-guides">Best Practices Guides</h3>
<ul>
<li><a href="https://aws.github.io/aws-eks-best-practices/">EKS Best Practices Guide</a></li>
<li><a href="https://kubernetes.io/docs/setup/best-practices/">Kubernetes Production Best Practices</a></li>
<li><a href="https://aws.amazon.com/architecture/well-architected/">AWS Well-Architected Framework</a></li>
</ul>
<h3 id="training-and-certification">Training and Certification</h3>
<ul>
<li><a href="https://aws.amazon.com/certification/certified-solutions-architect-associate/">AWS Certified Solutions Architect</a></li>
<li><a href="https://www.cncf.io/certification/cka/">Certified Kubernetes Administrator (CKA)</a></li>
<li><a href="https://platformengineering.university/">Platform Engineering University</a></li>
</ul>
<h3 id="community-and-support">Community and Support</h3>
<ul>
<li><a href="https://github.com/paruff/fawkes/discussions">Fawkes GitHub Discussions</a></li>
<li><a href="https://mattermost.fawkes.yourdomain.com">Fawkes Mattermost</a> (after deployment)</li>
<li><a href="https://console.aws.amazon.com/support/">AWS Support</a></li>
<li><a href="https://slack.cncf.io/">CNCF Slack</a></li>
</ul>
<hr />
<h2 id="conclusion">Conclusion</h2>
<p>Congratulations! You've successfully deployed the Fawkes platform on AWS in production.</p>
<p><strong>What you've accomplished</strong>:
-  Deployed a complete Internal Delivery Platform on AWS
-  Set up high-availability infrastructure across 3 availability zones
-  Implemented security best practices (encryption, network policies, RBAC)
-  Configured comprehensive observability and monitoring
-  Established automated backups and disaster recovery procedures
-  Created maintainable, documented infrastructure</p>
<p><strong>Next steps</strong>:
1. <strong>Onboard your first team</strong>: Create their first project using Backstage
2. <strong>Deploy first application</strong>: Use the golden path templates
3. <strong>Configure CI/CD</strong>: Set up Jenkins pipelines for automated builds
4. <strong>Launch Dojo</strong>: Begin training engineers on the platform
5. <strong>Iterate and improve</strong>: Collect feedback and enhance the platform</p>
<p><strong>Remember</strong>:
- Monitor costs daily for the first week
- Review security scans weekly
- Perform monthly maintenance tasks
- Test disaster recovery procedures quarterly
- Keep documentation up to date</p>
<p><strong>Need help?</strong>
- Check troubleshooting section first
- Search GitHub Issues: https://github.com/paruff/fawkes/issues
- Join the community on Mattermost
- Review AWS documentation
- Contact platform team: platform-team@yourdomain.com</p>
<p><strong>Thank you for choosing Fawkes!</strong> </p>
<hr />
<p><strong>Document Version</strong>: 1.0
<strong>Last Updated</strong>: October 7, 2025
<strong>Maintained By</strong>: Fawkes Platform Team
<strong>Feedback</strong>: Please submit issues or improvements to the GitHub repository</p>
<hr />
<p><strong>Estimated Total Time</strong>: 3-4 hours
<strong>Estimated Monthly Cost</strong>: $2,084 (production environment)
<strong>AWS Services Used</strong>: 10+ (EKS, RDS, S3, ALB, CloudWatch, Secrets Manager, ACM, IAM, VPC, ECR)</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>
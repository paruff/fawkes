# Test and Validation Reports

This directory contains generated test and validation reports.

## Report Types

### AT-E1-001 Validation Reports

- **Filename Pattern**: `at-e1-001-validation-<timestamp>.json`
- **Generated By**: `scripts/validate-at-e1-001.sh`
- **Purpose**: Validates Azure AKS cluster meets AT-E1-001 acceptance criteria
- **Format**: JSON with test results, timestamps, and summary statistics

Example:

```bash
# Run validation and generate report
./scripts/validate-at-e1-001.sh

# View latest report
cat reports/at-e1-001-validation-*.json | jq .
```

### InSpec Reports

- **Filename Pattern**: `aks-inspec.json`, `*-inspec.json`
- **Generated By**: InSpec compliance tests
- **Purpose**: Infrastructure compliance and security validation
- **Format**: InSpec JSON format

Example:

```bash
# Run InSpec tests and generate report
inspec exec infra/azure/inspec/ -t azure:// --reporter cli json:reports/aks-inspec.json
```

### Test Reports (HTML/XML)

- **Filename Pattern**: `*.html`, `*.xml`
- **Generated By**: pytest, behave, and other test frameworks
- **Purpose**: Test execution results and coverage reports
- **Format**: HTML (human-readable) and XML (CI/CD parseable)

## Viewing Reports

### JSON Reports

Use `jq` for pretty-printing and filtering:

```bash
# View full report
jq . reports/at-e1-001-validation-*.json

# View summary only
jq '.summary' reports/at-e1-001-validation-*.json

# View failed tests only
jq '.tests[] | select(.status=="FAIL")' reports/at-e1-001-validation-*.json
```

### HTML Reports

Open in browser:

```bash
open reports/*.html  # macOS
xdg-open reports/*.html  # Linux
start reports/*.html  # Windows
```

## CI/CD Integration

Reports are automatically uploaded as artifacts in CI/CD pipelines:

### GitHub Actions

```yaml
- name: Upload Test Reports
  uses: actions/upload-artifact@v3
  with:
    name: test-reports
    path: reports/
```

### Jenkins

```groovy
archiveArtifacts artifacts: 'reports/**/*.json,reports/**/*.html', allowEmptyArchive: true
```

## Retention

- Reports are **not tracked in Git** (see `.gitignore`)
- Local reports are kept for reference until manually deleted
- CI/CD artifacts are retained per pipeline configuration (typically 30-90 days)
- Production validation reports should be archived separately for compliance

## Cleanup

To remove old reports:

```bash
# Remove all reports older than 7 days
find reports/ -name "*.json" -mtime +7 -delete
find reports/ -name "*.html" -mtime +7 -delete

# Remove all reports
rm -f reports/*.json reports/*.html reports/*.xml
```

## Notes

- Keep this directory in Git (don't delete)
- Report files themselves are ignored (see `.gitignore`)
- Example reports can be checked in with `.example` suffix

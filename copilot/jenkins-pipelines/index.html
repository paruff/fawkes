
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Internal Developer Platform for Elite Performance">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Copilot Instructions for Fawkes Platform - Fawkes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#copilot-instructions-for-fawkes-platform" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Fawkes" class="md-header__button md-logo" aria-label="Fawkes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Fawkes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Copilot Instructions for Fawkes Platform
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/assessment.md" class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../capabilities/fast-flow.md" class="md-tabs__link">
          
  
  
    
  
  Capabilities

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../patterns/" class="md-tabs__link">
          
  
  
    
  
  Patterns

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tools/" class="md-tabs__link">
          
  
  
    
  
  Tools

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Fawkes" class="md-nav__button md-logo" aria-label="Fawkes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Fawkes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/assessment.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assessment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/implementation-paths.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Implementation Paths
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quick-wins.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Wins
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Capabilities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Capabilities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../capabilities/fast-flow.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fast Flow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../capabilities/fast-feedback.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fast Feedback
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../capabilities/fast-recovery.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fast Recovery
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../patterns/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Patterns
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Patterns
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/continuous-delivery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Continuous Delivery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/infrastructure-as-code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Infrastructure as Code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/test-automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Test Automation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/monitoring.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tools/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Continuous Delivery
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Continuous Delivery
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/spinnaker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spinnaker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/jenkins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jenkins
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Infrastructure
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Infrastructure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/terraform.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Terraform
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/kubernetes.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Monitoring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Monitoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/prometheus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/grafana.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grafana
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#agent-model-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 Agent Model Capabilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🎯 Agent Model Capabilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#planning-phase" class="md-nav__link">
    <span class="md-ellipsis">
      Planning Phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-phase" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Phase
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fawkes-platform-context" class="md-nav__link">
    <span class="md-ellipsis">
      🏗️ Fawkes Platform Context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🏗️ Fawkes Platform Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-fawkes" class="md-nav__link">
    <span class="md-ellipsis">
      What is Fawkes?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-differentiators" class="md-nav__link">
    <span class="md-ellipsis">
      Key Differentiators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#current-mvp-scope" class="md-nav__link">
    <span class="md-ellipsis">
      Current MVP Scope
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Overview
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fawkes-repository-structure-current" class="md-nav__link">
    <span class="md-ellipsis">
      📁 Fawkes Repository Structure (CURRENT)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📁 Fawkes Repository Structure (CURRENT)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-naming-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      File Naming Conventions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-paths-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Key Paths Reference
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-existing-structure" class="md-nav__link">
    <span class="md-ellipsis">
      🔧 Working with Existing Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔧 Working with Existing Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-placement-decision" class="md-nav__link">
    <span class="md-ellipsis">
      Example Placement Decision
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-in-doubt" class="md-nav__link">
    <span class="md-ellipsis">
      When in Doubt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dora-capabilities-integration" class="md-nav__link">
    <span class="md-ellipsis">
      🎓 DORA Capabilities Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🎓 DORA Capabilities Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-24-key-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      The 24 Key Capabilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The 24 Key Capabilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technical-practices-14-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Technical Practices (14 capabilities)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-practices-6-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Process Practices (6 capabilities)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cultural-practices-4-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Cultural Practices (4 capabilities)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tagging-system" class="md-nav__link">
    <span class="md-ellipsis">
      Tagging System
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      🚀 Development Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🚀 Development Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-trunk-based-development" class="md-nav__link">
    <span class="md-ellipsis">
      1. Trunk-Based Development
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-declarative-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      2. Declarative Infrastructure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-gitops-workflow-with-argocd" class="md-nav__link">
    <span class="md-ellipsis">
      3. GitOps Workflow with ArgoCD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-progressive-delivery-with-argo-rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      4. Progressive Delivery with Argo Rollouts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      🧪 Testing Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🧪 Testing Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bdd-test-structure" class="md-nav__link">
    <span class="md-ellipsis">
      BDD Test Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-organization" class="md-nav__link">
    <span class="md-ellipsis">
      Test Organization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      🔒 Security Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔒 Security Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-container-scanning-with-trivy" class="md-nav__link">
    <span class="md-ellipsis">
      1. Container Scanning with Trivy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-policy-enforcement-with-kyverno" class="md-nav__link">
    <span class="md-ellipsis">
      2. Policy Enforcement with Kyverno
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-secrets-management-with-external-secrets-operator" class="md-nav__link">
    <span class="md-ellipsis">
      3. Secrets Management with External Secrets Operator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dora-metrics-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      📊 DORA Metrics Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📊 DORA Metrics Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metrics-collection-service" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics Collection Service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-for-dora-metrics-service" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment for DORA Metrics Service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-dashboard-for-dora-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana Dashboard for DORA Metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dojo-learning-integration" class="md-nav__link">
    <span class="md-ellipsis">
      🎓 Dojo Learning Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🎓 Dojo Learning Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-dojo-module-content" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Dojo Module Content
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-review-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      🔍 Code Review Guidelines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔍 Code Review Guidelines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#platform-engineering-principles" class="md-nav__link">
    <span class="md-ellipsis">
      Platform Engineering Principles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dora-capabilities-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      DORA Capabilities Checklist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-quality-standards" class="md-nav__link">
    <span class="md-ellipsis">
      Code Quality Standards
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fawkes-specific-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Fawkes-Specific Checks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#things-to-avoid" class="md-nav__link">
    <span class="md-ellipsis">
      🚫 Things to AVOID
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🚫 Things to AVOID">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#removed-from-mvp-do-not-generate" class="md-nav__link">
    <span class="md-ellipsis">
      Removed from MVP (Do NOT Generate)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anti-patterns-to-avoid" class="md-nav__link">
    <span class="md-ellipsis">
      Anti-Patterns to Avoid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pro-tips-for-using-copilot" class="md-nav__link">
    <span class="md-ellipsis">
      💡 Pro Tips for Using Copilot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="💡 Pro Tips for Using Copilot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-planning" class="md-nav__link">
    <span class="md-ellipsis">
      When Planning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-implementing" class="md-nav__link">
    <span class="md-ellipsis">
      When Implementing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      When Debugging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-prompts" class="md-nav__link">
    <span class="md-ellipsis">
      Example Prompts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-key-technologies" class="md-nav__link">
    <span class="md-ellipsis">
      📖 Reference: Key Technologies
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📖 Reference: Key Technologies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technology-stack-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Technology Stack Summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#important-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Important Endpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-namespaces" class="md-nav__link">
    <span class="md-ellipsis">
      Default Namespaces
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start-commands" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 Quick Start Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🎯 Quick Start Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-development-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Common Development Tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-kubectl-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Useful Kubectl Commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-guide" class="md-nav__link">
    <span class="md-ellipsis">
      🆘 Troubleshooting Guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🆘 Troubleshooting Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues-and-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues and Solutions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues and Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#issue-jenkins-build-fails-at-security-scan-stage" class="md-nav__link">
    <span class="md-ellipsis">
      Issue: Jenkins build fails at security scan stage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-argocd-not-syncing-application" class="md-nav__link">
    <span class="md-ellipsis">
      Issue: ArgoCD not syncing application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-dora-metrics-not-appearing-in-grafana" class="md-nav__link">
    <span class="md-ellipsis">
      Issue: DORA metrics not appearing in Grafana
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-cannot-access-backstage-portal" class="md-nav__link">
    <span class="md-ellipsis">
      Issue: Cannot access Backstage portal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-standards" class="md-nav__link">
    <span class="md-ellipsis">
      📝 Documentation Standards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📝 Documentation Standards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Code Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linking" class="md-nav__link">
    <span class="md-ellipsis">
      Linking
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#belt-specific-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      🎓 Belt-Specific Guidelines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🎓 Belt-Specific Guidelines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#white-belt-beginner" class="md-nav__link">
    <span class="md-ellipsis">
      White Belt (Beginner)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yellow-belt-intermediate" class="md-nav__link">
    <span class="md-ellipsis">
      Yellow Belt (Intermediate)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#green-belt-advanced" class="md-nav__link">
    <span class="md-ellipsis">
      Green Belt (Advanced)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#brown-belt-expert" class="md-nav__link">
    <span class="md-ellipsis">
      Brown Belt (Expert)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#black-belt-master" class="md-nav__link">
    <span class="md-ellipsis">
      Black Belt (Master)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#continuous-improvement" class="md-nav__link">
    <span class="md-ellipsis">
      🔄 Continuous Improvement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔄 Continuous Improvement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contributing-to-copilot-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      Contributing to Copilot Instructions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feedback-loop" class="md-nav__link">
    <span class="md-ellipsis">
      Feedback Loop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#success-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      📊 Success Metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      🏁 Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="copilot-instructions-for-fawkes-platform">Copilot Instructions for Fawkes Platform</h1>
<h2 id="agent-model-capabilities">🎯 Agent Model Capabilities</h2>
<p>When using Copilot in agent mode, you will get:</p>
<h3 id="planning-phase">Planning Phase</h3>
<ul>
<li><strong>Architecture analysis</strong> - Review existing code and suggest optimal implementation patterns</li>
<li><strong>Dependency mapping</strong> - Identify required components and integration points</li>
<li><strong>Task breakdown</strong> - Decompose complex features into implementable steps</li>
<li><strong>Risk assessment</strong> - Flag potential issues before implementation</li>
<li><strong>Alternative evaluation</strong> - Compare multiple approaches with trade-offs</li>
</ul>
<h3 id="implementation-phase">Implementation Phase</h3>
<ul>
<li><strong>Multi-file generation</strong> - Create complete feature implementations across files</li>
<li><strong>Test generation</strong> - Automatic unit, integration, and E2E test creation</li>
<li><strong>Documentation updates</strong> - Keep docs in sync with code changes</li>
<li><strong>Configuration management</strong> - Generate all required configs (K8s, Terraform, etc.)</li>
<li><strong>Refactoring suggestions</strong> - Improve existing code continuously</li>
</ul>
<hr />
<h2 id="fawkes-platform-context">🏗️ Fawkes Platform Context</h2>
<h3 id="what-is-fawkes">What is Fawkes?</h3>
<p>Fawkes is an <strong>open-source Internal Product Delivery Platform</strong> that combines:
- <strong>Infrastructure automation</strong> (Kubernetes, Terraform/Crossplane)
- <strong>Developer portal</strong> (Backstage with software templates)
- <strong>CI/CD pipelines</strong> (Jenkins, ArgoCD for GitOps)
- <strong>Team collaboration</strong> (Mattermost, Focalboard)
- <strong>Immersive learning</strong> (Dojo system with 5-belt progression)</p>
<h3 id="key-differentiators">Key Differentiators</h3>
<ol>
<li><strong>DORA metrics automated</strong> - All 4 key metrics tracked from day one</li>
<li><strong>Integrated learning curriculum</strong> - Learn while building</li>
<li><strong>Complete product delivery stack</strong> - Not just infrastructure</li>
<li><strong>Open source, self-hosted</strong> - No vendor lock-in, MIT licensed</li>
<li><strong>Platform as a product</strong> - Developer experience first</li>
</ol>
<h3 id="current-mvp-scope">Current MVP Scope</h3>
<p><strong>IN SCOPE:</strong>
- Kubernetes orchestration (AWS EKS primary, multi-cloud planned)
- Backstage developer portal + Dojo learning hub
- Jenkins CI/CD with golden path templates
- ArgoCD for GitOps continuous delivery
- Mattermost for team collaboration
- Focalboard for project management (bundled with Mattermost)
- Prometheus + Grafana for observability
- OpenSearch + Fluent Bit for logging
- SonarQube + Trivy for security scanning
- Harbor for container registry
- DORA metrics automation</p>
<p><strong>OUT OF SCOPE (Post-MVP):</strong>
- Spinnaker (dropped from MVP - using ArgoCD + Argo Rollouts instead)
- Eclipse Che (using local workspace automation for MVP)
- Multi-cloud abstractions with Crossplane (AWS first, then expand)
- Advanced service mesh features</p>
<h3 id="architecture-overview">Architecture Overview</h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────┐
│                    Fawkes Platform                           │
├─────────────────────────────────────────────────────────────┤
│  Developer Portal (Backstage)                                │
│  ├── Service Catalog                                         │
│  ├── Software Templates (Golden Paths)                       │
│  ├── TechDocs (Documentation)                                │
│  └── Dojo Learning Hub (Modules, Labs, Progress)            │
├─────────────────────────────────────────────────────────────┤
│  Infrastructure Layer (Kubernetes)                           │
│  ├── Jenkins (CI/CD Pipelines)                              │
│  ├── ArgoCD (GitOps Continuous Delivery)                    │
│  ├── Harbor (Container Registry + Scanning)                 │
│  ├── Mattermost (Team Collaboration)                        │
│  ├── Focalboard (Project Management - in Mattermost)        │
│  └── Observability (Prometheus, Grafana, OpenSearch)        │
├─────────────────────────────────────────────────────────────┤
│  Cloud Infrastructure (AWS First, Multi-Cloud Later)        │
│  ├── Terraform (IaC for AWS)                                │
│  ├── Amazon EKS (Kubernetes)                                │
│  └── AWS Services (RDS, S3, ALB, CloudWatch, etc.)          │
└─────────────────────────────────────────────────────────────┘
</code></pre></div>
<hr />
<h2 id="fawkes-repository-structure-current">📁 Fawkes Repository Structure (CURRENT)</h2>
<p><strong>CRITICAL: Use this EXACT structure for all file generation</strong></p>
<p>Based on the actual repository at https://github.com/paruff/fawkes:</p>
<div class="highlight"><pre><span></span><code>fawkes/
├── docs/                           # Documentation
│   ├── dojo/                       # Dojo learning system
│   │   ├── DOJO_ARCHITECTURE.md   # Complete learning system design
│   │   ├── white-belt/            # White belt curriculum
│   │   ├── yellow-belt/           # Yellow belt curriculum
│   │   ├── green-belt/            # Green belt curriculum
│   │   ├── brown-belt/            # Brown belt curriculum
│   │   └── black-belt/            # Black belt curriculum
│   ├── adr/                        # Architecture Decision Records
│   │   ├── ADR-001-kubernetes.md
│   │   ├── ADR-002-backstage.md
│   │   ├── ADR-003-argocd.md
│   │   ├── ADR-004-jenkins.md
│   │   ├── ADR-005-terraform.md
│   │   ├── ADR-006-postgresql.md
│   │   ├── ADR-007-mattermost.md
│   │   └── ADR-008-focalboard.md
│   ├── components/                 # Component-specific docs
│   ├── operations/                 # Operational guides
│   ├── sprints/                    # Sprint planning docs
│   ├── architecture.md             # System architecture
│   ├── getting-started.md          # Getting started guide
│   ├── troubleshooting.md          # Troubleshooting
│   ├── AWS_COST_ESTIMATION.md      # AWS cost analysis
│   └── BUSINESS_CASE.md            # Business value prop
│
├── infra/                          # Infrastructure as Code
│   ├── buildinfra.sh               # Infrastructure provisioning script
│   ├── buildplatform.sh            # Platform deployment script
│   ├── terraform/                  # Terraform modules (AWS primary)
│   │   └── aws/                    # AWS-specific IaC
│   ├── kubernetes/                 # Kubernetes manifests
│   │   ├── backstage/              # Developer portal
│   │   ├── jenkins/                # CI/CD
│   │   ├── argocd/                 # GitOps
│   │   ├── harbor/                 # Container registry
│   │   ├── mattermost/             # Collaboration
│   │   ├── prometheus/             # Metrics
│   │   ├── grafana/                # Dashboards
│   │   └── opensearch/             # Logging
│   ├── helm/                       # Helm charts
│   └── workspace/                  # Developer workspace automation
│       ├── setup-OS-space.sh       # Local workspace setup
│       └── [platform-specific]/    # macOS/Windows configs
│
├── modules/                        # Terraform/reusable modules
│   └── [cloud-provider-modules]/
│
├── templates/                      # Application templates (golden paths)
│   ├── java-spring-boot/          # Java template (existing)
│   ├── python-fastapi/             # Python template (planned)
│   └── nodejs-express/             # Node.js template (planned)
│
├── tests/                          # Automated tests
│   ├── e2e/                        # End-to-end BDD tests (create when ready)
│   │   ├── features/               # Gherkin scenarios
│   │   └── step_definitions/       # Test implementations
│   ├── integration/                # Integration tests
│   └── unit/                       # Unit tests
│
├── scripts/                        # Utility scripts
│   ├── setup/                      # Setup automation
│   ├── validation/                 # Config validation
│   └── run-tests.sh                # Test runner
│
├── .github/                        # GitHub configuration
│   ├── workflows/                  # CI/CD pipelines
│   ├── ISSUE_TEMPLATE/             # Issue templates
│   │   ├── bug_report.yml
│   │   ├── feature_request.yml
│   │   ├── dojo_module.yml
│   │   └── security_vulnerability.yml
│   ├── PULL_REQUEST_TEMPLATE.md
│   └── labels.yml                  # GitHub labels config
│
├── config/                         # Configuration files
│   └── example.tfvars              # Example Terraform variables
│
├── GOVERNANCE.md                   # Project governance
├── CODE_OF_CONDUCT.md              # Community standards
├── PROJECT_CHARTER.md              # Vision and mission
├── CONTRIBUTING.md                 # Contribution guidelines
├── CONTRIBUTORS.md                 # Contributor recognition
├── LICENSE                         # MIT License
└── README.md                       # Main project README
</code></pre></div>
<h3 id="file-naming-conventions">File Naming Conventions</h3>
<ul>
<li><strong>Kubernetes manifests:</strong> <code>&lt;resource&gt;-&lt;name&gt;.yaml</code> (e.g., <code>deployment-backstage.yaml</code>)</li>
<li><strong>Terraform modules:</strong> <code>main.tf</code>, <code>variables.tf</code>, <code>outputs.tf</code></li>
<li><strong>Python tests:</strong> <code>test_&lt;feature&gt;.py</code></li>
<li><strong>Feature files:</strong> <code>&lt;capability&gt;.feature</code> (lowercase, underscores)</li>
<li><strong>Helm charts:</strong> <code>Chart.yaml</code>, <code>values.yaml</code>, <code>templates/</code></li>
<li><strong>Scripts:</strong> Lowercase with hyphens (e.g., <code>buildinfra.sh</code>, <code>setup-OS-space.sh</code>)</li>
</ul>
<h3 id="key-paths-reference">Key Paths Reference</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Path</th>
</tr>
</thead>
<tbody>
<tr>
<td>Infrastructure scripts</td>
<td><code>/infra/buildinfra.sh</code>, <code>/infra/buildplatform.sh</code></td>
</tr>
<tr>
<td>Terraform (AWS)</td>
<td><code>/infra/terraform/aws/</code> or <code>/modules/</code></td>
</tr>
<tr>
<td>Kubernetes manifests</td>
<td><code>/infra/kubernetes/&lt;service&gt;/</code></td>
</tr>
<tr>
<td>Dojo curriculum</td>
<td><code>/docs/dojo/&lt;belt-level&gt;/</code></td>
</tr>
<tr>
<td>ADRs</td>
<td><code>/docs/adr/ADR-###-&lt;topic&gt;.md</code></td>
</tr>
<tr>
<td>Application templates</td>
<td><code>/templates/&lt;language&gt;-&lt;framework&gt;/</code></td>
</tr>
<tr>
<td>Tests</td>
<td><code>/tests/&lt;type&gt;/</code></td>
</tr>
<tr>
<td>Scripts</td>
<td><code>/scripts/</code> or <code>/infra/</code></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="working-with-existing-structure">🔧 Working with Existing Structure</h2>
<p><strong>IMPORTANT:</strong> Fawkes uses an established directory structure. When generating code:</p>
<ol>
<li><strong>Check existing patterns first</strong> - Look at current file locations before creating new ones</li>
<li><strong>Ask before major moves</strong> - Don't restructure without explicit request</li>
<li><strong>Use relative paths</strong> - Make code work regardless of exact structure</li>
<li><strong>Document location decisions</strong> - Add comments explaining file placement</li>
<li><strong>Respect established conventions</strong> - Follow existing naming and organization</li>
</ol>
<h3 id="example-placement-decision">Example Placement Decision</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># File: infra/kubernetes/prometheus/servicemonitor-jenkins.yaml</span>
<span class="c1"># Rationale: Follows existing infra/kubernetes/&lt;service&gt;/ pattern</span>
<span class="c1"># Related: infra/kubernetes/jenkins/deployment-jenkins.yaml</span>
</code></pre></div>
<h3 id="when-in-doubt">When in Doubt</h3>
<ul>
<li><strong>For infrastructure:</strong> Check <code>/infra/</code> first</li>
<li><strong>For docs:</strong> Check <code>/docs/</code> structure</li>
<li><strong>For templates:</strong> Use <code>/templates/</code></li>
<li><strong>For tests:</strong> Create in <code>/tests/e2e/</code> or <code>/tests/integration/</code></li>
<li><strong>Ask the user:</strong> "Should this go in X or Y?"</li>
</ul>
<hr />
<h2 id="dora-capabilities-integration">🎓 DORA Capabilities Integration</h2>
<h3 id="the-24-key-capabilities">The 24 Key Capabilities</h3>
<p>Every code change should map to one or more DORA capabilities:</p>
<h4 id="technical-practices-14-capabilities">Technical Practices (14 capabilities)</h4>
<ol>
<li><strong>Version control</strong> - All code in Git, trunk-based development</li>
<li><strong>Continuous integration</strong> - Automated build/test on every commit</li>
<li><strong>Deployment automation</strong> - Push-button or automated deployment</li>
<li><strong>Trunk-based development</strong> - Short-lived branches (&lt;1 day)</li>
<li><strong>Test automation</strong> - Comprehensive automated test suite</li>
<li><strong>Test data management</strong> - Realistic test data provisioning</li>
<li><strong>Shift left on security</strong> - Security scanning in CI pipeline</li>
<li><strong>Continuous delivery</strong> - Code always in deployable state</li>
<li><strong>Loosely coupled architecture</strong> - Services independently deployable</li>
<li><strong>Empowered teams</strong> - Teams choose tools, make decisions</li>
<li><strong>Monitoring &amp; observability</strong> - Proactive system health tracking</li>
<li><strong>Proactive failure notification</strong> - Alerts before user impact</li>
<li><strong>Database change management</strong> - Automated schema migrations</li>
<li><strong>Code maintainability</strong> - Clean, documented, testable code</li>
</ol>
<h4 id="process-practices-6-capabilities">Process Practices (6 capabilities)</h4>
<ol>
<li><strong>Streamlined change approval</strong> - Peer review, not CAB</li>
<li><strong>Customer feedback</strong> - Short feedback loops</li>
<li><strong>Team experimentation</strong> - Safe to try new approaches</li>
<li><strong>Work in small batches</strong> - Small, frequent changes</li>
<li><strong>Visibility of work in value stream</strong> - Clear status tracking</li>
<li><strong>Work in process limits</strong> - Focus, avoid multitasking</li>
</ol>
<h4 id="cultural-practices-4-capabilities">Cultural Practices (4 capabilities)</h4>
<ol>
<li><strong>Generative organizational culture</strong> - Westrum model</li>
<li><strong>Learning culture</strong> - Blameless postmortems, knowledge sharing</li>
<li><strong>Job satisfaction</strong> - Autonomy, mastery, purpose</li>
<li><strong>Transformational leadership</strong> - Servant leadership</li>
</ol>
<h3 id="tagging-system">Tagging System</h3>
<p>Use these tags in code comments and tests:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># @dora-capability: continuous_integration</span>
<span class="c1"># @dora-metric: deployment_frequency, lead_time</span>
<span class="c1"># @belt-level: white-belt</span>
<span class="k">def</span><span class="w"> </span><span class="nf">automated_build_pipeline</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Implements automated CI pipeline that triggers on every commit.</span>

<span class="sd">    DORA Impact:</span>
<span class="sd">    - Increases deployment frequency through automation</span>
<span class="sd">    - Reduces lead time by catching issues early</span>

<span class="sd">    Learning Objective: Students learn to create Jenkins pipelines</span>
<span class="sd">    that integrate with GitHub webhooks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
<hr />
<h2 id="development-patterns">🚀 Development Patterns</h2>
<h3 id="1-trunk-based-development">1. Trunk-Based Development</h3>
<p><strong>ALWAYS follow these practices:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># ✅ Good: Short-lived feature branch</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/add-metrics
<span class="c1"># Work for max 1 day</span>
git<span class="w"> </span>commit<span class="w"> </span>-am<span class="w"> </span><span class="s2">&quot;Add DORA metrics collection&quot;</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>feature/add-metrics
<span class="c1"># Create PR, get review, merge same day</span>

<span class="c1"># ❌ Bad: Long-lived branch</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/refactor-entire-system
<span class="c1"># Work for weeks... NO!</span>
</code></pre></div>
<p><strong>Branch Rules:</strong>
- Maximum <strong>3 active branches</strong> in repository
- Merge within <strong>1 day</strong> of creation
- Use <strong>feature flags</strong> for incomplete features
- No code freeze periods</p>
<h3 id="2-declarative-infrastructure">2. Declarative Infrastructure</h3>
<p><strong>Always use declarative formats:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># ✅ Good: Declarative Kubernetes manifest</span>
<span class="c1"># File: infra/kubernetes/backstage/deployment-backstage.yaml</span>

<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-platform</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">developer-portal</span>
<span class="w">    </span><span class="nt">dora-capability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">self-service</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.20.0</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage/backstage:v1.20.0</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7007</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">          </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;512Mi&quot;</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;250m&quot;</span>
<span class="w">          </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1Gi&quot;</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500m&quot;</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POSTGRES_HOST</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage-postgres</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<span class="w">        </span><span class="nt">livenessProbe</span><span class="p">:</span>
<span class="w">          </span><span class="nt">httpGet</span><span class="p">:</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/healthcheck</span>
<span class="w">            </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7007</span>
<span class="w">          </span><span class="nt">initialDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">          </span><span class="nt">periodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">        </span><span class="nt">readinessProbe</span><span class="p">:</span>
<span class="w">          </span><span class="nt">httpGet</span><span class="p">:</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/healthcheck</span>
<span class="w">            </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7007</span>
<span class="w">          </span><span class="nt">initialDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">          </span><span class="nt">periodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ Bad: Imperative approach (avoid this)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>

<span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span>
    <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span> <span class="s2">&quot;create&quot;</span><span class="p">,</span> <span class="s2">&quot;deployment&quot;</span><span class="p">,</span> <span class="s2">&quot;backstage&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--image=backstage/backstage:v1.20.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--replicas=2&quot;</span>
<span class="p">])</span>
</code></pre></div>
<h3 id="3-gitops-workflow-with-argocd">3. GitOps Workflow with ArgoCD</h3>
<p><strong>All infrastructure changes through Git:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># File: infra/kubernetes/argocd/application-backstage.yaml</span>
<span class="c1"># ArgoCD Application for automated deployment</span>

<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dora-capability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">continuous_delivery</span>
<span class="w">    </span><span class="nt">notifications.argoproj.io/subscribe.on-deployed.mattermost</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-deployments</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">repoURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/paruff/fawkes.git</span>
<span class="w">    </span><span class="nt">targetRevision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infra/kubernetes/backstage</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-platform</span>
<span class="w">  </span><span class="nt">syncPolicy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">automated</span><span class="p">:</span>
<span class="w">      </span><span class="nt">prune</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">      </span><span class="c1"># Delete resources not in Git</span>
<span class="w">      </span><span class="nt">selfHeal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">   </span><span class="c1"># Revert manual changes</span>
<span class="w">      </span><span class="nt">allowEmpty</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">syncOptions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CreateNamespace=true</span>
<span class="w">    </span><span class="nt">retry</span><span class="p">:</span>
<span class="w">      </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span><span class="nt">backoff</span><span class="p">:</span>
<span class="w">        </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
<span class="w">        </span><span class="nt">factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">maxDuration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3m</span>
</code></pre></div>
<h3 id="4-progressive-delivery-with-argo-rollouts">4. Progressive Delivery with Argo Rollouts</h3>
<p><strong>Use Argo Rollouts for canary and blue-green deployments (replaces Spinnaker):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># File: infra/kubernetes/backstage/rollout-backstage.yaml</span>
<span class="c1"># Progressive deployment strategy</span>

<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-platform</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dora-capability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deployment_automation</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">      </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">5m</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">5m</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">5m</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">5m</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">        </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage-success-rate</span>
<span class="w">        </span><span class="nt">startingStep</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">service-name</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage/backstage:v1.21.0</span><span class="w">  </span><span class="c1"># New version</span>
<span class="w">        </span><span class="c1"># ... rest of container spec</span>
</code></pre></div>
<hr />
<h2 id="testing-strategy">🧪 Testing Strategy</h2>
<h3 id="bdd-test-structure">BDD Test Structure</h3>
<p><strong>Create Gherkin feature files for all capabilities:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c"># File: tests/e2e/features/continuous_integration.feature</span>
<span class="c"># @dora-capability: continuous_integration</span>

<span class="nt">@dora-deployment-frequency</span><span class="nf"> </span><span class="nt">@dora-lead-time</span>
<span class="k">Feature:</span><span class="nf"> Continuous Integration Pipeline</span>
<span class="nf">  As a developer</span>
<span class="nf">  I want automated build and test pipelines</span>
<span class="nf">  So that I can quickly validate changes</span>

<span class="nf">  </span><span class="k">Background:</span>
<span class="k">    Given </span><span class="nf">a Jenkins instance is running at &quot;</span><span class="s">http://jenkins.fawkes-platform.svc</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the &quot;</span><span class="s">spring-boot-template</span><span class="nf">&quot; exists in &quot;</span><span class="s">/templates/java-spring-boot</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">GitHub webhooks are configured</span>

<span class="nf">  </span><span class="nt">@smoke</span><span class="nf"> </span><span class="nt">@white-belt</span>
<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> Commit triggers automatic build</span>
<span class="k">    Given </span><span class="nf">I have cloned the &quot;</span><span class="s">demo-java-app</span><span class="nf">&quot; repository</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">I commit a change to the &quot;</span><span class="s">main</span><span class="nf">&quot; branch</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">a Jenkins build starts within </span><span class="s">30</span><span class="nf"> seconds</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the build completes within </span><span class="s">5</span><span class="nf"> minutes</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the build status is reported to GitHub</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the commit shows a green checkmark</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">DORA metrics record the deployment</span>

<span class="nf">  </span><span class="nt">@yellow-belt</span>
<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> Pipeline includes security scanning</span>
<span class="k">    Given </span><span class="nf">a Jenkins pipeline for &quot;</span><span class="s">demo-python-app</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">the build stage completes successfully</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">the security scan stage executes</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">Trivy scans the container image for vulnerabilities</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">SonarQube analyzes the source code</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">no HIGH or CRITICAL vulnerabilities are found</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">a security report is archived</span>

<span class="nf">  </span><span class="nt">@green-belt</span><span class="nf"> </span><span class="nt">@dora-change-failure-rate</span>
<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> Failed builds notify team via Mattermost</span>
<span class="k">    Given </span><span class="nf">a Jenkins pipeline for &quot;</span><span class="s">demo-node-app</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">a build fails due to test failures</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">a Mattermost notification is sent within </span><span class="s">60</span><span class="nf"> seconds</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the notification includes the failure reason</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the notification links to the build logs</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the DORA metrics service records the failure</span>
</code></pre></div>
<p><strong>Step definitions with proper instrumentation:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># File: tests/e2e/step_definitions/jenkins_steps.py</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pytest_bdd</span><span class="w"> </span><span class="kn">import</span> <span class="n">given</span><span class="p">,</span> <span class="n">when</span><span class="p">,</span> <span class="n">then</span><span class="p">,</span> <span class="n">parsers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="nd">@given</span><span class="p">(</span><span class="n">parsers</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;a Jenkins instance is running at &quot;</span><span class="si">{url}</span><span class="s1">&quot;&#39;</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">jenkins_running</span><span class="p">(</span><span class="n">jenkins_client</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Verify Jenkins is accessible and healthy.</span>

<span class="sd">    @dora-capability: continuous_integration</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">jenkins_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">/api/json&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Jenkins not accessible at </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;NORMAL&#39;</span><span class="p">,</span> <span class="s2">&quot;Jenkins not in normal mode&quot;</span>
    <span class="k">assert</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;numExecutors&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;No Jenkins executors available&quot;</span>

<span class="nd">@when</span><span class="p">(</span><span class="n">parsers</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;I commit a change to the &quot;</span><span class="si">{branch}</span><span class="s1">&quot; branch&#39;</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">commit_change</span><span class="p">(</span><span class="n">git_repo</span><span class="p">,</span> <span class="n">branch</span><span class="p">,</span> <span class="n">dora_metrics</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Commit test change and record timestamp for lead time calculation.</span>

<span class="sd">    @dora-metric: lead_time</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">git_repo</span><span class="o">.</span><span class="n">checkout</span><span class="p">(</span><span class="n">branch</span><span class="p">)</span>

    <span class="c1"># Make traceable change</span>
    <span class="n">commit_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;test-</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;README.md&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&lt;!-- Test commit </span><span class="si">{</span><span class="n">commit_id</span><span class="si">}</span><span class="s1"> --&gt;&#39;</span><span class="p">)</span>

    <span class="n">git_repo</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s1">&#39;README.md&#39;</span><span class="p">])</span>
    <span class="n">commit</span> <span class="o">=</span> <span class="n">git_repo</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Test commit </span><span class="si">{</span><span class="n">commit_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">git_repo</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="s1">&#39;origin&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">branch</span><span class="p">)</span>

    <span class="c1"># Record commit time for DORA lead time metric</span>
    <span class="n">dora_metrics</span><span class="o">.</span><span class="n">record_commit</span><span class="p">(</span>
        <span class="n">commit_sha</span><span class="o">=</span><span class="n">commit</span><span class="o">.</span><span class="n">hexsha</span><span class="p">,</span>
        <span class="n">timestamp</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">(),</span>
        <span class="n">service</span><span class="o">=</span><span class="n">git_repo</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">branch</span><span class="o">=</span><span class="n">branch</span>
    <span class="p">)</span>

<span class="nd">@then</span><span class="p">(</span><span class="n">parsers</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;a Jenkins build starts within </span><span class="si">{seconds:d}</span><span class="s1"> seconds&#39;</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">build_starts</span><span class="p">(</span><span class="n">jenkins_client</span><span class="p">,</span> <span class="n">git_repo</span><span class="p">,</span> <span class="n">seconds</span><span class="p">,</span> <span class="n">dora_metrics</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Verify build triggered within SLA and update deployment frequency metric.</span>

<span class="sd">    @dora-metric: deployment_frequency</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
    <span class="n">deadline</span> <span class="o">=</span> <span class="n">start_time</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">seconds</span><span class="p">)</span>

    <span class="k">while</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">deadline</span><span class="p">:</span>
        <span class="n">builds</span> <span class="o">=</span> <span class="n">jenkins_client</span><span class="o">.</span><span class="n">get_builds</span><span class="p">(</span><span class="n">git_repo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">builds</span> <span class="ow">and</span> <span class="n">builds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&gt;</span> <span class="n">dora_metrics</span><span class="o">.</span><span class="n">get_commit_time</span><span class="p">(</span><span class="n">git_repo</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="c1"># Build started - record for metrics</span>
            <span class="n">dora_metrics</span><span class="o">.</span><span class="n">record_build_start</span><span class="p">(</span>
                <span class="n">build_id</span><span class="o">=</span><span class="n">builds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">build_number</span><span class="o">=</span><span class="n">builds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>
                <span class="n">timestamp</span><span class="o">=</span><span class="n">builds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
                <span class="n">service</span><span class="o">=</span><span class="n">git_repo</span><span class="o">.</span><span class="n">name</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;No build started within </span><span class="si">{</span><span class="n">seconds</span><span class="si">}</span><span class="s2">s of commit to </span><span class="si">{</span><span class="n">git_repo</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;This impacts deployment frequency SLA.&quot;</span>
    <span class="p">)</span>

<span class="nd">@then</span><span class="p">(</span><span class="s1">&#39;DORA metrics record the deployment&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_dora_metrics</span><span class="p">(</span><span class="n">dora_metrics</span><span class="p">,</span> <span class="n">git_repo</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Verify DORA metrics service recorded all events.</span>

<span class="sd">    @dora-capability: monitoring_and_observability</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Verify metrics were recorded</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="n">dora_metrics</span><span class="o">.</span><span class="n">get_metrics</span><span class="p">(</span><span class="n">service</span><span class="o">=</span><span class="n">git_repo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;deployment_frequency&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> \
        <span class="s2">&quot;Deployment frequency not recorded&quot;</span>
    <span class="k">assert</span> <span class="n">metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;lead_time&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> \
        <span class="s2">&quot;Lead time not recorded&quot;</span>

    <span class="c1"># Verify Prometheus metrics are accessible</span>
    <span class="n">prom_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://prometheus.fawkes-platform.svc:9090/api/v1/query&#39;</span><span class="p">,</span>
                                 <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;deployments_total</span><span class="se">{{</span><span class="s1">service=&quot;</span><span class="si">{</span><span class="n">git_repo</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot;</span><span class="se">}}</span><span class="s1">&#39;</span><span class="p">})</span>
    <span class="k">assert</span> <span class="n">prom_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;Cannot query Prometheus metrics&quot;</span>
</code></pre></div>
<h3 id="test-organization">Test Organization</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># File: tests/e2e/conftest.py</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>

<span class="k">def</span><span class="w"> </span><span class="nf">pytest_collection_modifyitems</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add belt level and DORA capability markers for tracking.</span>

<span class="sd">    @dora-capability: learning_culture</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">belt_order</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;white-belt&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow-belt&#39;</span><span class="p">,</span> <span class="s1">&#39;green-belt&#39;</span><span class="p">,</span> 
                  <span class="s1">&#39;brown-belt&#39;</span><span class="p">,</span> <span class="s1">&#39;black-belt&#39;</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="c1"># Extract belt level</span>
        <span class="n">belt_markers</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">iter_markers</span><span class="p">()</span> 
                       <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">belt_order</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">belt_markers</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">belt_level</span><span class="p">(</span><span class="n">belt_markers</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="c1"># Extract DORA metrics</span>
        <span class="n">dora_markers</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">iter_markers</span><span class="p">()</span> 
                       <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;dora-&#39;</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">marker</span> <span class="ow">in</span> <span class="n">dora_markers</span><span class="p">:</span>
            <span class="n">metric</span> <span class="o">=</span> <span class="n">marker</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;dora-&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dora_metric</span><span class="p">(</span><span class="n">metric</span><span class="p">))</span>

<span class="k">def</span><span class="w"> </span><span class="nf">pytest_terminal_summary</span><span class="p">(</span><span class="n">terminalreporter</span><span class="p">,</span> <span class="n">exitstatus</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Report results by belt level for dojo progression tracking.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">belt_results</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">report</span> <span class="ow">in</span> <span class="n">terminalreporter</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;passed&#39;</span><span class="p">,</span> <span class="p">[]):</span>
        <span class="n">belt_marker</span> <span class="o">=</span> <span class="n">report</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;belt_level&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">belt_marker</span><span class="p">:</span>
            <span class="n">belt</span> <span class="o">=</span> <span class="n">belt_marker</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">belt_results</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">belt</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">report</span><span class="o">.</span><span class="n">nodeid</span><span class="p">)</span>

    <span class="n">terminalreporter</span><span class="o">.</span><span class="n">write_sep</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="s1">&#39;Dojo Progression Summary&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">belt</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;white-belt&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow-belt&#39;</span><span class="p">,</span> <span class="s1">&#39;green-belt&#39;</span><span class="p">,</span> 
                 <span class="s1">&#39;brown-belt&#39;</span><span class="p">,</span> <span class="s1">&#39;black-belt&#39;</span><span class="p">]:</span>
        <span class="n">scenarios</span> <span class="o">=</span> <span class="n">belt_results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">belt</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;✅&#39;</span> <span class="k">if</span> <span class="n">scenarios</span> <span class="k">else</span> <span class="s1">&#39;⏸️&#39;</span>
        <span class="n">terminalreporter</span><span class="o">.</span><span class="n">write_line</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">belt</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">scenarios</span><span class="p">)</span><span class="si">}</span><span class="s1"> scenarios passed&#39;</span>
        <span class="p">)</span>

    <span class="c1"># DORA metrics summary</span>
    <span class="n">dora_results</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">report</span> <span class="ow">in</span> <span class="n">terminalreporter</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;passed&#39;</span><span class="p">,</span> <span class="p">[]):</span>
        <span class="n">dora_marker</span> <span class="o">=</span> <span class="n">report</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;dora_metric&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dora_marker</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="n">dora_marker</span><span class="p">:</span>
                <span class="n">metric_name</span> <span class="o">=</span> <span class="n">metric</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">dora_results</span><span class="p">[</span><span class="n">metric_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">dora_results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">metric_name</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">dora_results</span><span class="p">:</span>
        <span class="n">terminalreporter</span><span class="o">.</span><span class="n">write_sep</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="s1">&#39;DORA Metrics Coverage&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">metric</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">dora_results</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">terminalreporter</span><span class="o">.</span><span class="n">write_line</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  📊 </span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s1"> tests&#39;</span><span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="security-patterns">🔒 Security Patterns</h2>
<h3 id="1-container-scanning-with-trivy">1. Container Scanning with Trivy</h3>
<p><strong>Integrate Trivy in all Jenkins pipelines:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// File: templates/java-spring-boot/Jenkinsfile</span>

<span class="nd">@Library</span><span class="o">(</span><span class="s1">&#39;fawkes-shared-library&#39;</span><span class="o">)</span><span class="w"> </span><span class="n">_</span>

<span class="n">pipeline</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="n">agent</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">kubernetes</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span><span class="n">yaml</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        apiVersion: v1</span>
<span class="s1">        kind: Pod</span>
<span class="s1">        metadata:</span>
<span class="s1">          labels:</span>
<span class="s1">            jenkins: agent</span>
<span class="s1">        spec:</span>
<span class="s1">          serviceAccountName: jenkins</span>
<span class="s1">          containers:</span>
<span class="s1">          - name: maven</span>
<span class="s1">            image: maven:3.9-eclipse-temurin-17</span>
<span class="s1">            command: [&#39;cat&#39;]</span>
<span class="s1">            tty: true</span>
<span class="s1">          - name: trivy</span>
<span class="s1">            image: aquasec/trivy:latest</span>
<span class="s1">            command: [&#39;cat&#39;]</span>
<span class="s1">            tty: true</span>
<span class="s1">          - name: kaniko</span>
<span class="s1">            image: gcr.io/kaniko-project/executor:latest</span>
<span class="s1">            command: [&#39;cat&#39;]</span>
<span class="s1">            tty: true</span>
<span class="s1">      &#39;&#39;&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">}</span>

<span class="w">  </span><span class="n">environment</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">HARBOR_REGISTRY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;harbor.fawkes-platform.svc&#39;</span>
<span class="w">    </span><span class="n">HARBOR_PROJECT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;fawkes&#39;</span>
<span class="w">    </span><span class="n">IMAGE_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${HARBOR_REGISTRY}/${HARBOR_PROJECT}/${env.JOB_NAME}&quot;</span>
<span class="w">    </span><span class="n">IMAGE_TAG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${env.GIT_COMMIT.take(8)}&quot;</span>
<span class="w">    </span><span class="n">HARBOR_CREDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">credentials</span><span class="o">(</span><span class="s1">&#39;harbor-robot-account&#39;</span><span class="o">)</span>
<span class="w">  </span><span class="o">}</span>

<span class="w">  </span><span class="n">stages</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Build&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">container</span><span class="o">(</span><span class="s1">&#39;maven&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">          </span><span class="n">sh</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            mvn clean package -DskipTests=false</span>
<span class="s1">            mvn test</span>
<span class="s1">          &#39;&#39;&#39;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Code Quality&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">container</span><span class="o">(</span><span class="s1">&#39;maven&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">          </span><span class="n">withSonarQubeEnv</span><span class="o">(</span><span class="s1">&#39;SonarQube&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">sh</span><span class="w"> </span><span class="s1">&#39;mvn sonar:sonar&#39;</span>
<span class="w">          </span><span class="o">}</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Build Container&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">container</span><span class="o">(</span><span class="s1">&#39;kaniko&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">          </span><span class="n">sh</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            /kaniko/executor \</span>
<span class="s1">              --dockerfile=Dockerfile \</span>
<span class="s1">              --context=dir://$(pwd) \</span>
<span class="s1">              --destination=${IMAGE_NAME}:${IMAGE_TAG} \</span>
<span class="s1">              --destination=${IMAGE_NAME}:latest \</span>
<span class="s1">              --skip-tls-verify</span>
<span class="s1">          &#39;&#39;&#39;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Security Scan&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">container</span><span class="o">(</span><span class="s1">&#39;trivy&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">          </span><span class="n">sh</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            trivy image \</span>
<span class="s1">              --severity HIGH,CRITICAL \</span>
<span class="s1">              --exit-code 1 \</span>
<span class="s1">              --no-progress \</span>
<span class="s1">              --format json \</span>
<span class="s1">              --output trivy-report.json \</span>
<span class="s1">              --insecure \</span>
<span class="s1">              ${IMAGE_NAME}:${IMAGE_TAG}</span>
<span class="s1">          &#39;&#39;&#39;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">      </span><span class="n">post</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">always</span><span class="w"> </span><span class="o">{</span>
<span class="w">          </span><span class="n">archiveArtifacts</span><span class="w"> </span><span class="nl">artifacts:</span><span class="w"> </span><span class="s1">&#39;trivy-report.json&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">allowEmptyArchive:</span><span class="w"> </span><span class="kc">true</span>

<span class="w">          </span><span class="c1">// Send scan results to DORA metrics service</span>
<span class="w">          </span><span class="n">sh</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            curl -X POST http://dora-metrics.fawkes-platform.svc:8080/api/v1/security-scan \</span>
<span class="s1">              -H &quot;Content-Type: application/json&quot; \</span>
<span class="s1">              -d @trivy-report.json || true</span>
<span class="s1">          &#39;&#39;&#39;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">        </span><span class="n">failure</span><span class="w"> </span><span class="o">{</span>
<span class="w">          </span><span class="n">mattermostSend</span><span class="o">(</span>
<span class="w">            </span><span class="nl">endpoint:</span><span class="w"> </span><span class="s1">&#39;http://mattermost.fawkes-platform.svc:8065/hooks/...&#39;</span><span class="o">,</span>
<span class="w">            </span><span class="nl">color:</span><span class="w"> </span><span class="s1">&#39;danger&#39;</span><span class="o">,</span>
<span class="w">            </span><span class="nl">message:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">              🚨 **Security Vulnerabilities Found**</span>

<span class="s2">              **Service:** ${IMAGE_NAME}:${IMAGE_TAG}</span>
<span class="s2">              **Build:** ${env.BUILD_URL}</span>
<span class="s2">              **Action Required:** Fix HIGH/CRITICAL vulnerabilities before deployment</span>

<span class="s2">              See attached trivy-report.json for details.</span>
<span class="s2">            &quot;&quot;&quot;</span>
<span class="w">          </span><span class="o">)</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Deploy to Dev&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">branch</span><span class="w"> </span><span class="s1">&#39;main&#39;</span>
<span class="w">        </span><span class="n">expression</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">currentBuild</span><span class="o">.</span><span class="na">result</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">&#39;FAILURE&#39;</span><span class="w"> </span><span class="o">}</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">      </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">script</span><span class="w"> </span><span class="o">{</span>
<span class="w">          </span><span class="c1">// Update ArgoCD application manifest</span>
<span class="w">          </span><span class="n">sh</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            git clone https://github.com/paruff/fawkes.git fawkes-gitops</span>
<span class="s1">            cd fawkes-gitops/infra/kubernetes/${JOB_NAME}</span>

<span class="s1">            # Update image tag in deployment</span>
<span class="s1">            sed -i &quot;s|image:.*|image: ${IMAGE_NAME}:${IMAGE_TAG}|g&quot; deployment.yaml</span>

<span class="s1">            git config user.email &quot;jenkins@fawkes-platform&quot;</span>
<span class="s1">            git config user.name &quot;Fawkes Jenkins&quot;</span>
<span class="s1">            git add deployment.yaml</span>
<span class="s1">            git commit -m &quot;Update ${JOB_NAME} to ${IMAGE_TAG}&quot;</span>
<span class="s1">            git push origin main</span>
<span class="s1">          &#39;&#39;&#39;</span>

<span class="w">          </span><span class="c1">// Record deployment for DORA metrics</span>
<span class="w">          </span><span class="n">sh</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            curl -X POST http://dora-metrics.fawkes-platform.svc:8080/api/v1/deployments \</span>
<span class="s1">              -H &quot;Content-Type: application/json&quot; \</span>
<span class="s1">              -d &#39;{</span>
<span class="s1">                &quot;service&quot;: &quot;&#39;${JOB_NAME}&#39;&quot;,</span>
<span class="s1">                &quot;version&quot;: &quot;&#39;${IMAGE_TAG}&#39;&quot;,</span>
<span class="s1">                &quot;environment&quot;: &quot;dev&quot;,</span>
<span class="s1">                &quot;commit_sha&quot;: &quot;&#39;${GIT_COMMIT}&#39;&quot;,</span>
<span class="s1">                &quot;commit_timestamp&quot;: &quot;&#39;$(git show -s --format=%cI ${GIT_COMMIT})&#39;&quot;,</span>
<span class="s1">                &quot;deployment_timestamp&quot;: &quot;&#39;$(date -u +%Y-%m-%dT%H:%M:%SZ)&#39;&quot;,</span>
<span class="s1">                &quot;status&quot;: &quot;success&quot;</span>
<span class="s1">              }&#39;</span>
<span class="s1">          &#39;&#39;&#39;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">      </span><span class="n">post</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">success</span><span class="w"> </span><span class="o">{</span>
<span class="w">          </span><span class="n">mattermostSend</span><span class="o">(</span>
<span class="w">            </span><span class="nl">color:</span><span class="w"> </span><span class="s1">&#39;good&#39;</span><span class="o">,</span>
<span class="w">            </span><span class="nl">message:</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">              ✅ **Deployment Successful**</span>

<span class="s2">              **Service:** ${JOB_NAME}</span>
<span class="s2">              **Version:** ${IMAGE_TAG}</span>
<span class="s2">              **Environment:** dev</span>
<span class="s2">              **Build:** ${env.BUILD_URL}</span>
<span class="s2">            &quot;&quot;&quot;</span>
<span class="w">          </span><span class="o">)</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">}</span>

<span class="w">  </span><span class="n">post</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">always</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span><span class="c1">// Cleanup workspace</span>
<span class="w">      </span><span class="n">cleanWs</span><span class="o">()</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<h3 id="2-policy-enforcement-with-kyverno">2. Policy Enforcement with Kyverno</h3>
<p><strong>Use Kyverno for policy-as-code (simpler than OPA for MVP):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># File: infra/kubernetes/kyverno/require-resource-limits.yaml</span>

<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kyverno.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">require-resource-limits</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">policies.kyverno.io/title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Require Resource Limits</span>
<span class="w">    </span><span class="nt">policies.kyverno.io/category</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Best Practices</span>
<span class="w">    </span><span class="nt">policies.kyverno.io/severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">medium</span>
<span class="w">    </span><span class="nt">policies.kyverno.io/description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span>
<span class="w">      </span><span class="no">All containers must have CPU and memory limits to prevent resource exhaustion.</span>
<span class="w">      </span><span class="no">This is a DORA best practice for system reliability and security.</span>
<span class="w">    </span><span class="nt">dora-capability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">monitoring_and_observability</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">validationFailureAction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enforce</span>
<span class="w">  </span><span class="nt">background</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate-resources</span>
<span class="w">    </span><span class="nt">match</span><span class="p">:</span>
<span class="w">      </span><span class="nt">any</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">          </span><span class="nt">kinds</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DaemonSet</span>
<span class="w">          </span><span class="nt">namespaces</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-*</span>
<span class="w">    </span><span class="nt">validate</span><span class="p">:</span>
<span class="w">      </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span>
<span class="w">        </span><span class="no">All containers must have CPU and memory limits defined.</span>
<span class="w">        </span><span class="no">This ensures predictable resource usage and prevents noisy neighbor issues.</span>

<span class="w">        </span><span class="no">Example:</span>
<span class="w">          </span><span class="no">resources:</span>
<span class="w">            </span><span class="no">limits:</span>
<span class="w">              </span><span class="no">memory: &quot;512Mi&quot;</span>
<span class="w">              </span><span class="no">cpu: &quot;500m&quot;</span>
<span class="w">            </span><span class="no">requests:</span>
<span class="w">              </span><span class="no">memory: &quot;256Mi&quot;</span>
<span class="w">              </span><span class="no">cpu: &quot;100m&quot;</span>
<span class="w">      </span><span class="nt">pattern</span><span class="p">:</span>
<span class="w">        </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">          </span><span class="nt">template</span><span class="p">:</span>
<span class="w">            </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">              </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;?*&quot;</span>
<span class="w">                    </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;?*&quot;</span>
<span class="w">                  </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;?*&quot;</span>
<span class="w">                    </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;?*&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># File: infra/kubernetes/kyverno/disallow-latest-tag.yaml</span>

<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kyverno.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disallow-latest-tag</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">policies.kyverno.io/title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Disallow Latest Tag</span>
<span class="w">    </span><span class="nt">policies.kyverno.io/category</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Best Practices</span>
<span class="w">    </span><span class="nt">policies.kyverno.io/severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">high</span>
<span class="w">    </span><span class="nt">policies.kyverno.io/description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span>
<span class="w">      </span><span class="no">Container images must use specific version tags, not &#39;latest&#39;.</span>
<span class="w">      </span><span class="no">Using &#39;latest&#39; tag makes deployments non-deterministic and harder to rollback.</span>
<span class="w">    </span><span class="nt">dora-capability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">continuous_delivery</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">validationFailureAction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enforce</span>
<span class="w">  </span><span class="nt">background</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">require-image-tag</span>
<span class="w">    </span><span class="nt">match</span><span class="p">:</span>
<span class="w">      </span><span class="nt">any</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">          </span><span class="nt">kinds</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DaemonSet</span>
<span class="w">    </span><span class="nt">validate</span><span class="p">:</span>
<span class="w">      </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span>
<span class="w">        </span><span class="no">Container images must not use &#39;latest&#39; tag. </span>
<span class="w">        </span><span class="no">Use a specific version tag like &#39;v1.2.3&#39; or git commit SHA.</span>
<span class="w">      </span><span class="nt">pattern</span><span class="p">:</span>
<span class="w">        </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">          </span><span class="nt">template</span><span class="p">:</span>
<span class="w">            </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">              </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;!*:latest&quot;</span>
</code></pre></div>
<h3 id="3-secrets-management-with-external-secrets-operator">3. Secrets Management with External Secrets Operator</h3>
<p><strong>Never hardcode secrets - use External Secrets Operator with AWS Secrets Manager:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># File: infra/kubernetes/external-secrets/clustersecretstore-aws.yaml</span>

<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external-secrets.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterSecretStore</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-secretsmanager</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dora-capability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shift_left_on_security</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">provider</span><span class="p">:</span>
<span class="w">    </span><span class="nt">aws</span><span class="p">:</span>
<span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SecretsManager</span>
<span class="w">      </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-east-1</span>
<span class="w">      </span><span class="nt">auth</span><span class="p">:</span>
<span class="w">        </span><span class="nt">jwt</span><span class="p">:</span>
<span class="w">          </span><span class="nt">serviceAccountRef</span><span class="p">:</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external-secrets-sa</span>
<span class="w">            </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external-secrets-system</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># File: infra/kubernetes/backstage/externalsecret-postgres.yaml</span>

<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external-secrets.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExternalSecret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage-postgres-credentials</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-platform</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dora-capability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shift_left_on_security</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">refreshInterval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1h</span>
<span class="w">  </span><span class="nt">secretStoreRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-secretsmanager</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterSecretStore</span>
<span class="w">  </span><span class="nt">target</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backstage-postgres</span>
<span class="w">    </span><span class="nt">creationPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Owner</span>
<span class="w">    </span><span class="nt">template</span><span class="p">:</span>
<span class="w">      </span><span class="nt">engineVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2</span>
<span class="w">      </span><span class="nt">data</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># Template for connection string</span>
<span class="w">        </span><span class="nt">DATABASE_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;postgresql://{{</span><span class="nv"> </span><span class="s">.username</span><span class="nv"> </span><span class="s">}}:{{</span><span class="nv"> </span><span class="s">.password</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">.host</span><span class="nv"> </span><span class="s">}}:5432/backstage&quot;</span>
<span class="w">        </span><span class="nt">POSTGRES_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">.username</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">        </span><span class="nt">POSTGRES_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">.password</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">        </span><span class="nt">POSTGRES_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">.host</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">secretKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">username</span>
<span class="w">    </span><span class="nt">remoteRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes/backstage/postgres</span>
<span class="w">      </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">username</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">secretKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">    </span><span class="nt">remoteRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes/backstage/postgres</span>
<span class="w">      </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">secretKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<span class="w">    </span><span class="nt">remoteRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes/backstage/postgres</span>
<span class="w">      </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
</code></pre></div>
<hr />
<h2 id="dora-metrics-implementation">📊 DORA Metrics Implementation</h2>
<h3 id="metrics-collection-service">Metrics Collection Service</h3>
<p><strong>Create a lightweight FastAPI service for collecting DORA metrics:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># File: scripts/dora-metrics/main.py</span>
<span class="c1"># Note: This may eventually move to a dedicated service directory</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">BackgroundTasks</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">prometheus_client</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">prometheus_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">Counter</span><span class="p">,</span> <span class="n">Histogram</span><span class="p">,</span> <span class="n">Gauge</span><span class="p">,</span> <span class="n">generate_latest</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="c1"># Configure logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Fawkes DORA Metrics Collector&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Automated collection of the Four Key DORA metrics&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.0.0&quot;</span>
<span class="p">)</span>

<span class="c1"># Prometheus metrics</span>
<span class="n">deployment_counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span>
    <span class="s1">&#39;fawkes_deployments_total&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Total number of deployments&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;service&#39;</span><span class="p">,</span> <span class="s1">&#39;environment&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">lead_time_histogram</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span>
    <span class="s1">&#39;fawkes_lead_time_seconds&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Lead time from commit to deployment (seconds)&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;service&#39;</span><span class="p">,</span> <span class="s1">&#39;environment&#39;</span><span class="p">],</span>
    <span class="n">buckets</span><span class="o">=</span><span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">900</span><span class="p">,</span> <span class="mi">1800</span><span class="p">,</span> <span class="mi">3600</span><span class="p">,</span> <span class="mi">7200</span><span class="p">,</span> <span class="mi">14400</span><span class="p">,</span> <span class="mi">28800</span><span class="p">,</span> <span class="mi">86400</span><span class="p">]</span>  <span class="c1"># 1m to 1d</span>
<span class="p">)</span>

<span class="n">failure_counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span>
    <span class="s1">&#39;fawkes_change_failures_total&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Total number of failed changes&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;service&#39;</span><span class="p">,</span> <span class="s1">&#39;environment&#39;</span><span class="p">,</span> <span class="s1">&#39;failure_type&#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">mttr_histogram</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span>
    <span class="s1">&#39;fawkes_mttr_seconds&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Mean time to restore service (seconds)&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;service&#39;</span><span class="p">,</span> <span class="s1">&#39;environment&#39;</span><span class="p">,</span> <span class="s1">&#39;incident_type&#39;</span><span class="p">],</span>
    <span class="n">buckets</span><span class="o">=</span><span class="p">[</span><span class="mi">300</span><span class="p">,</span> <span class="mi">900</span><span class="p">,</span> <span class="mi">1800</span><span class="p">,</span> <span class="mi">3600</span><span class="p">,</span> <span class="mi">7200</span><span class="p">,</span> <span class="mi">14400</span><span class="p">,</span> <span class="mi">28800</span><span class="p">,</span> <span class="mi">86400</span><span class="p">]</span>  <span class="c1"># 5m to 1d</span>
<span class="p">)</span>

<span class="n">active_incidents</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
    <span class="s1">&#39;fawkes_active_incidents&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Number of currently active incidents&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;service&#39;</span><span class="p">,</span> <span class="s1">&#39;environment&#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Pydantic models</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DeploymentEvent</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">service</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Service name&quot;</span><span class="p">)</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Version or git commit SHA&quot;</span><span class="p">)</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;dev&#39;</span><span class="p">,</span> <span class="s1">&#39;staging&#39;</span><span class="p">,</span> <span class="s1">&#39;production&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Target environment&quot;</span><span class="p">)</span>
    <span class="n">commit_sha</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Git commit SHA&quot;</span><span class="p">)</span>
    <span class="n">commit_timestamp</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;When the commit was created&quot;</span><span class="p">)</span>
    <span class="n">deployment_timestamp</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;When deployment occurred&quot;</span><span class="p">)</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;failure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Deployment outcome&quot;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">json_schema_extra</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;demo-java-app&quot;</span><span class="p">,</span>
                <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;v1.2.3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="s2">&quot;production&quot;</span><span class="p">,</span>
                <span class="s2">&quot;commit_sha&quot;</span><span class="p">:</span> <span class="s2">&quot;abc123def456&quot;</span><span class="p">,</span>
                <span class="s2">&quot;commit_timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2025-10-25T10:00:00Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;deployment_timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2025-10-25T10:15:00Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">IncidentEvent</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">service</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Affected service name&quot;</span><span class="p">)</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;dev&#39;</span><span class="p">,</span> <span class="s1">&#39;staging&#39;</span><span class="p">,</span> <span class="s1">&#39;production&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Affected environment&quot;</span><span class="p">)</span>
    <span class="n">incident_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Type of incident (e.g., &#39;outage&#39;, &#39;degradation&#39;)&quot;</span><span class="p">)</span>
    <span class="n">severity</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="s1">&#39;medium&#39;</span><span class="p">,</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="s1">&#39;critical&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Incident severity&quot;</span><span class="p">)</span>
    <span class="n">started_at</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;When incident started&quot;</span><span class="p">)</span>
    <span class="n">resolved_at</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;When incident was resolved&quot;</span><span class="p">)</span>
    <span class="n">caused_by_deployment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Git commit SHA if caused by deployment&quot;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">json_schema_extra</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;demo-java-app&quot;</span><span class="p">,</span>
                <span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="s2">&quot;production&quot;</span><span class="p">,</span>
                <span class="s2">&quot;incident_type&quot;</span><span class="p">:</span> <span class="s2">&quot;outage&quot;</span><span class="p">,</span>
                <span class="s2">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
                <span class="s2">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2025-10-25T11:00:00Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;resolved_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2025-10-25T11:30:00Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;caused_by_deployment&quot;</span><span class="p">:</span> <span class="s2">&quot;abc123def456&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SecurityScanResult</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">service</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">scanner</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;trivy&#39;</span><span class="p">,</span> <span class="s1">&#39;sonarqube&#39;</span><span class="p">,</span> <span class="s1">&#39;snyk&#39;</span><span class="p">]</span>
    <span class="n">high_vulnerabilities</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">critical_vulnerabilities</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">)</span>

<span class="c1"># API Endpoints</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">root</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Health check endpoint&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;Fawkes DORA Metrics Collector&quot;</span><span class="p">,</span>
        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;healthy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span>
    <span class="p">}</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/api/v1/deployments&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">record_deployment</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">DeploymentEvent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Record a deployment event for DORA metrics calculation.</span>

<span class="sd">    Tracks:</span>
<span class="sd">    - Deployment frequency (deployments per day)</span>
<span class="sd">    - Lead time for changes (commit to deploy time)</span>
<span class="sd">    - Change failure rate (if status is failure)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Increment deployment counter</span>
        <span class="n">deployment_counter</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span>
            <span class="n">service</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
            <span class="n">environment</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">status</span>
        <span class="p">)</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>

        <span class="c1"># Calculate and record lead time</span>
        <span class="n">lead_time</span> <span class="o">=</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">deployment_timestamp</span> <span class="o">-</span> <span class="n">event</span><span class="o">.</span><span class="n">commit_timestamp</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
        <span class="n">lead_time_histogram</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span>
            <span class="n">service</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
            <span class="n">environment</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span>
        <span class="p">)</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">lead_time</span><span class="p">)</span>

        <span class="c1"># Record failure if applicable</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;failure&#39;</span><span class="p">:</span>
            <span class="n">failure_counter</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span>
                <span class="n">service</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
                <span class="n">environment</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span><span class="p">,</span>
                <span class="n">failure_type</span><span class="o">=</span><span class="s1">&#39;deployment_failure&#39;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Deployment failure recorded: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="si">}</span><span class="s2"> v</span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Deployment success recorded: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="si">}</span><span class="s2"> v</span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;recorded&quot;</span><span class="p">,</span>
            <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
            <span class="s2">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;deployment_frequency&quot;</span><span class="p">:</span> <span class="s2">&quot;updated&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lead_time_seconds&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">lead_time</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                <span class="s2">&quot;change_failure_rate&quot;</span><span class="p">:</span> <span class="s2">&quot;updated&quot;</span> <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;failure&#39;</span> <span class="k">else</span> <span class="s2">&quot;n/a&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error recording deployment: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/api/v1/incidents&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">record_incident</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">IncidentEvent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Record an incident for MTTR calculation.</span>

<span class="sd">    If caused by deployment, also increments change failure rate.</span>
<span class="sd">    If incident is ongoing (no resolved_at), updates active incidents gauge.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">resolved_at</span><span class="p">:</span>
            <span class="c1"># Calculate MTTR</span>
            <span class="n">mttr</span> <span class="o">=</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">resolved_at</span> <span class="o">-</span> <span class="n">event</span><span class="o">.</span><span class="n">started_at</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
            <span class="n">mttr_histogram</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span>
                <span class="n">service</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
                <span class="n">environment</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span><span class="p">,</span>
                <span class="n">incident_type</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">incident_type</span>
            <span class="p">)</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">mttr</span><span class="p">)</span>

            <span class="c1"># Decrement active incidents</span>
            <span class="n">active_incidents</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span>
                <span class="n">service</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
                <span class="n">environment</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span>
            <span class="p">)</span><span class="o">.</span><span class="n">dec</span><span class="p">()</span>

            <span class="c1"># If caused by deployment, count as change failure</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">caused_by_deployment</span><span class="p">:</span>
                <span class="n">failure_counter</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span>
                    <span class="n">service</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
                    <span class="n">environment</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span><span class="p">,</span>
                    <span class="n">failure_type</span><span class="o">=</span><span class="s1">&#39;incident_from_deployment&#39;</span>
                <span class="p">)</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Incident resolved: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;after </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">mttr</span><span class="o">/</span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> minutes&quot;</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;resolved&quot;</span><span class="p">,</span>
                <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
                <span class="s2">&quot;mttr_seconds&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">mttr</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                <span class="s2">&quot;mttr_minutes&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">mttr</span> <span class="o">/</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Incident started but not resolved</span>
            <span class="n">active_incidents</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span>
                <span class="n">service</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
                <span class="n">environment</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span>
            <span class="p">)</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Incident started: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">environment</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;(severity: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">severity</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;incident_started&quot;</span><span class="p">,</span>
                <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
                <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Call again with resolved_at to calculate MTTR&quot;</span>
            <span class="p">}</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error recording incident: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/api/v1/security-scan&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">record_security_scan</span><span class="p">(</span><span class="n">scan</span><span class="p">:</span> <span class="n">SecurityScanResult</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Record security scan results for tracking vulnerability trends.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Security scan recorded: </span><span class="si">{</span><span class="n">scan</span><span class="o">.</span><span class="n">service</span><span class="si">}</span><span class="s2"> v</span><span class="si">{</span><span class="n">scan</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2"> - &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;Critical: </span><span class="si">{</span><span class="n">scan</span><span class="o">.</span><span class="n">critical_vulnerabilities</span><span class="si">}</span><span class="s2">, High: </span><span class="si">{</span><span class="n">scan</span><span class="o">.</span><span class="n">high_vulnerabilities</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;recorded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="n">scan</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">scan</span><span class="o">.</span><span class="n">version</span>
    <span class="p">}</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/metrics&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">metrics</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prometheus metrics endpoint for scraping&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
        <span class="n">content</span><span class="o">=</span><span class="n">generate_latest</span><span class="p">(),</span>
        <span class="n">media_type</span><span class="o">=</span><span class="s2">&quot;text/plain&quot;</span>
    <span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/health&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">health</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Health check for Kubernetes probes&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;healthy&quot;</span><span class="p">}</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>
    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="n">app</span><span class="p">,</span>
        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span>
        <span class="n">log_level</span><span class="o">=</span><span class="s2">&quot;info&quot;</span>
    <span class="p">)</span>
</code></pre></div>
<h3 id="deployment-for-dora-metrics-service">Deployment for DORA Metrics Service</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># File: infra/kubernetes/dora-metrics/deployment-dora-metrics.yaml</span>

<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-platform</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">observability</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python:3.11-slim</span>
<span class="w">        </span><span class="nt">workingDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app</span>
<span class="w">        </span><span class="nt">command</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main.py</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">          </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;128Mi&quot;</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100m&quot;</span>
<span class="w">          </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;256Mi&quot;</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200m&quot;</span>
<span class="w">        </span><span class="nt">livenessProbe</span><span class="p">:</span>
<span class="w">          </span><span class="nt">httpGet</span><span class="p">:</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/health</span>
<span class="w">            </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">          </span><span class="nt">initialDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">          </span><span class="nt">periodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">        </span><span class="nt">readinessProbe</span><span class="p">:</span>
<span class="w">          </span><span class="nt">httpGet</span><span class="p">:</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/health</span>
<span class="w">            </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">          </span><span class="nt">initialDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">          </span><span class="nt">periodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">        </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-code</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app</span>
<span class="w">      </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-code</span>
<span class="w">        </span><span class="nt">configMap</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics-code</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-platform</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">    </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">monitoring.coreos.com/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServiceMonitor</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-platform</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dora-metrics</span>
<span class="w">  </span><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/metrics</span>
<span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</code></pre></div>
<h3 id="grafana-dashboard-for-dora-metrics">Grafana Dashboard for DORA Metrics</h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;dashboard&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Fawkes DORA Metrics&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;dora&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;platform-metrics&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;fawkes&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;timezone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;utc&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;panels&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Deployment Frequency&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;graph&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;gridPos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;w&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;h&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;datasource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Prometheus&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;targets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;expr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sum(rate(fawkes_deployments_total{status=\&quot;success\&quot;}[1d])) by (service)&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;legendFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{service}}&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;refId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;fieldConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;defaults&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;deployments/day&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;thresholds&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;green&quot;</span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yellow&quot;</span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Deployments per day. Elite: &gt;1/day, High: weekly, Medium: monthly, Low: &lt;monthly&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Lead Time for Changes&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;graph&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;gridPos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;w&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;h&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;datasource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Prometheus&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;targets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;expr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;histogram_quantile(0.5, rate(fawkes_lead_time_seconds_bucket[1h]))&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;legendFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;P50 - {{service}}&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;refId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;expr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;histogram_quantile(0.95, rate(fawkes_lead_time_seconds_bucket[1h]))&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;legendFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;P95 - {{service}}&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;refId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;B&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;fieldConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;defaults&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hours&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;thresholds&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;green&quot;</span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yellow&quot;</span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">604800</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Time from commit to production. Elite: &lt;1 hour, High: &lt;1 day, Medium: &lt;1 week, Low: &gt;1 month&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Change Failure Rate&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gauge&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;gridPos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;w&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;h&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;datasource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Prometheus&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;targets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;expr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sum(rate(fawkes_change_failures_total[7d])) / sum(rate(fawkes_deployments_total[7d])) * 100&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;refId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;fieldConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;defaults&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;percent&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;thresholds&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;absolute&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;green&quot;</span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yellow&quot;</span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="w">              </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;% of deployments causing failures. Elite: &lt;15%, High: &lt;30%, Medium: &lt;45%, Low: &gt;45%&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mean Time to Restore (MTTR)&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;graph&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;gridPos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;w&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;h&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;datasource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Prometheus&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;targets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;expr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;histogram_quantile(0.5, rate(fawkes_mttr_seconds_bucket[7d]))&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;legendFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;P50 MTTR&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;refId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;expr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;histogram_quantile(0.95, rate(fawkes_mttr_seconds_bucket[7d]))&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;legendFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;P95 MTTR&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;refId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;B&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;fieldConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;defaults&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hours&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;thresholds&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;green&quot;</span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yellow&quot;</span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">604800</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Time to restore service after incident. Elite: &lt;1 hour, High: &lt;1 day, Medium: &lt;1 week, Low: &gt;1 week&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Active Incidents&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stat&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;gridPos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;w&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;h&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;datasource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Prometheus&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;targets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;expr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sum(fawkes_active_incidents)&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;refId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;fieldConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;defaults&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;incidents&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;thresholds&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;absolute&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;green&quot;</span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yellow&quot;</span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="w">              </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Deployments Today&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stat&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;gridPos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;w&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;h&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;datasource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Prometheus&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;targets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;expr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sum(increase(fawkes_deployments_total{status=\&quot;success\&quot;}[24h]))&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;refId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;fieldConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;defaults&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;deployments&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="dojo-learning-integration">🎓 Dojo Learning Integration</h2>
<h3 id="creating-dojo-module-content">Creating Dojo Module Content</h3>
<p>When generating dojo learning modules, follow this structure:</p>
<div class="highlight"><pre><span></span><code><span class="gh"># File: docs/dojo/white-belt/module-01-what-is-idp.md</span>

<span class="gh"># Module 1: Internal Delivery Platforms - What and Why</span>

<span class="gs">**Belt Level**</span>: 🥋 White Belt  
<span class="gs">**Duration**</span>: 60 minutes  
<span class="gs">**Prerequisites**</span>: Basic understanding of software development, Git, command line  
<span class="gs">**Learning Path**</span>: Module 1 of 20 (White Belt: Modules 1-4)

---

<span class="gu">## 📋 Module Overview</span>

Welcome to the Fawkes Dojo! This is your first step toward becoming a platform engineer.

<span class="gu">### Learning Objectives</span>

By completing this module, you will be able to:

<span class="k">1.</span> <span class="gs">**Define**</span> what an Internal Delivery Platform (IDP) is
<span class="k">2.</span> <span class="gs">**Explain**</span> the difference between traditional infrastructure and platform engineering
<span class="k">3.</span> <span class="gs">**Identify**</span> key components of Fawkes platform
<span class="k">4.</span> <span class="gs">**Describe**</span> the business value and ROI of platform engineering
<span class="k">5.</span> <span class="gs">**Deploy**</span> your first application using Fawkes (hands-on lab)

<span class="gu">### Why This Matters</span>

Platform engineering is one of the fastest-growing disciplines in technology. 
Organizations with mature platforms:
<span class="k">-</span><span class="w"> </span>Deploy <span class="gs">**10x more frequently**</span>
<span class="k">-</span><span class="w"> </span>Have <span class="gs">**50% lower change failure rates**</span>
<span class="k">-</span><span class="w"> </span>Recover from incidents <span class="gs">**2x faster**</span>
<span class="k">-</span><span class="w"> </span>Save <span class="gs">**30-40% in infrastructure costs**</span>

<span class="gu">### DORA Capabilities Covered</span>

This module teaches:
<span class="k">-</span><span class="w"> </span>✅ <span class="gs">**Version control**</span> - Understanding Git-based workflows
<span class="k">-</span><span class="w"> </span>✅ <span class="gs">**Deployment automation**</span> - Self-service deployment
<span class="k">-</span><span class="w"> </span>✅ <span class="gs">**Loosely coupled architecture**</span> - Microservices patterns

---

<span class="gu">## 📚 Section 1: What is an Internal Delivery Platform?</span>

<span class="gu">### The Problem: Developer Cognitive Load</span>

Imagine a developer starting a new microservice. Without a platform, they must:

<span class="k">1.</span> Provision infrastructure (AWS console, navigation hell)
<span class="k">2.</span> Set up CI/CD (write Jenkinsfile from scratch)
<span class="k">3.</span> Configure observability (Prometheus, Grafana, dashboards)
<span class="k">4.</span> Implement security (scanning tools, secrets management)
<span class="k">5.</span> Set up deployment (Kubernetes manifests, Helm charts)
<span class="k">6.</span> Configure networking (ingress, service mesh, DNS)
<span class="k">7.</span> Manage databases (provision, backup, migrations)
<span class="k">8.</span> Document everything (runbooks, architecture diagrams)

<span class="gs">**Result**</span>: 2-4 weeks before writing application code. High error rate. Inconsistent implementations.

<span class="gu">### The Solution: Platform Engineering</span>

<span class="gs">**Platform Engineering**</span> treats infrastructure and tooling as a product for internal customers (developers).

<span class="gs">**Fawkes Platform**</span> provides:
<span class="k">-</span><span class="w"> </span><span class="gs">**Self-service capabilities**</span> - Deploy via Backstage portal
<span class="k">-</span><span class="w"> </span><span class="gs">**Golden paths**</span> - Pre-configured, opinionated workflows
<span class="k">-</span><span class="w"> </span><span class="gs">**Automation**</span> - CI/CD, deployment, monitoring automated
<span class="k">-</span><span class="w"> </span><span class="gs">**Standards**</span> - Consistent security, observability, best practices
<span class="k">-</span><span class="w"> </span><span class="gs">**Developer experience**</span> - Simple, fast, delightful interface

<span class="gs">**Result**</span>: Deploy new service in &lt;1 hour. Consistent quality. Developers focus on business logic.

---

<span class="gu">## 🛠️ Hands-On Lab: Deploy Your First Application</span>

<span class="gu">### Lab Objectives</span>

<span class="k">-</span><span class="w"> </span>Use Backstage to create a new service from a template
<span class="k">-</span><span class="w"> </span>Trigger an automated build in Jenkins
<span class="k">-</span><span class="w"> </span>Deploy to development environment via ArgoCD
<span class="k">-</span><span class="w"> </span>View DORA metrics for your deployment

<span class="gu">### Prerequisites</span>

<span class="k">-</span><span class="w"> </span>Access to Fawkes platform (provided by instructor)
<span class="k">-</span><span class="w"> </span>GitHub account
<span class="k">-</span><span class="w"> </span>Basic familiarity with command line

<span class="gu">### Step 1: Access Backstage</span>

<span class="k">1.</span> Navigate to <span class="sb">`https://backstage.fawkes-platform.local`</span>
<span class="k">2.</span> Log in with your GitHub account
<span class="k">3.</span> You should see the Fawkes developer portal home page

<span class="gu">### Step 2: Create Service from Template</span>

<span class="k">1.</span> Click &quot;Create&quot; in the left sidebar
<span class="k">2.</span> Select &quot;Java Spring Boot Microservice&quot; template
<span class="k">3.</span> Fill in the form:
<span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="gs">**Service Name**</span>: <span class="sb">`my-first-service`</span>
<span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="gs">**Description**</span>: &quot;Learning platform engineering with Fawkes&quot;
<span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="gs">**Owner**</span>: (your name/team)
<span class="k">4.</span> Click &quot;Create&quot;
<span class="k">5.</span> Backstage will:
<span class="w">   </span><span class="k">-</span><span class="w"> </span>Create GitHub repository
<span class="w">   </span><span class="k">-</span><span class="w"> </span>Scaffold application code
<span class="w">   </span><span class="k">-</span><span class="w"> </span>Configure Jenkins pipeline
<span class="w">   </span><span class="k">-</span><span class="w"> </span>Set up ArgoCD application

<span class="gu">### Step 3: Observe the Build</span>

<span class="k">1.</span> Click on &quot;View in Jenkins&quot; link
<span class="k">2.</span> Watch the pipeline execute:
<span class="w">   </span><span class="k">-</span><span class="w"> </span>✅ Checkout code
<span class="w">   </span><span class="k">-</span><span class="w"> </span>✅ Build with Maven
<span class="w">   </span><span class="k">-</span><span class="w"> </span>✅ Run tests
<span class="w">   </span><span class="k">-</span><span class="w"> </span>✅ Security scan (SonarQube, Trivy)
<span class="w">   </span><span class="k">-</span><span class="w"> </span>✅ Build container image
<span class="w">   </span><span class="k">-</span><span class="w"> </span>✅ Push to Harbor registry

<span class="gu">### Step 4: Monitor Deployment</span>

<span class="k">1.</span> Click on &quot;View in ArgoCD&quot; link
<span class="k">2.</span> Watch ArgoCD sync your application:
<span class="w">   </span><span class="k">-</span><span class="w"> </span>✅ Detects new image in registry
<span class="w">   </span><span class="k">-</span><span class="w"> </span>✅ Updates Kubernetes manifests
<span class="w">   </span><span class="k">-</span><span class="w"> </span>✅ Deploys to <span class="sb">`dev`</span> namespace
<span class="w">   </span><span class="k">-</span><span class="w"> </span>✅ Runs health checks

<span class="gu">### Step 5: View DORA Metrics</span>

<span class="k">1.</span> Navigate to Grafana dashboard: <span class="sb">`https://grafana.fawkes-platform.local`</span>
<span class="k">2.</span> Open &quot;DORA Metrics&quot; dashboard
<span class="k">3.</span> Find your service in the metrics:
<span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="gs">**Deployment Frequency**</span>: 1 deployment recorded
<span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="gs">**Lead Time**</span>: Time from template creation to deployment
<span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="gs">**Change Failure Rate**</span>: 0% (successful deployment)

<span class="gu">### Step 6: Access Your Application</span>

<span class="k">1.</span> Get the application URL from ArgoCD
<span class="k">2.</span> Visit <span class="sb">`https://my-first-service.dev.fawkes-platform.local`</span>
<span class="k">3.</span> You should see the Spring Boot welcome page!

<span class="gu">### Lab Complete! 🎉</span>

Congratulations! You&#39;ve:
<span class="k">-</span><span class="w"> </span>✅ Created a service using a golden path template
<span class="k">-</span><span class="w"> </span>✅ Triggered an automated CI/CD pipeline
<span class="k">-</span><span class="w"> </span>✅ Deployed to Kubernetes via GitOps
<span class="k">-</span><span class="w"> </span>✅ Generated DORA metrics automatically

<span class="gs">**Time to deployment:**</span> ~10 minutes (vs. 2-4 weeks manually)

---

<span class="gu">## 📊 Assessment</span>

Test your knowledge:

<span class="k">1.</span> What is an Internal Delivery Platform?
<span class="k">2.</span> Name three components of the Fawkes platform
<span class="k">3.</span> What are the Four Key DORA metrics?
<span class="k">4.</span> How does a platform reduce cognitive load for developers?

[<span class="nt">Take the Module 1 Quiz →</span>](<span class="na">/docs/dojo/white-belt/quiz-01.md</span>)

---

<span class="gu">## 🎯 Next Steps</span>

<span class="gs">**Continue Learning:**</span>
<span class="k">-</span><span class="w"> </span>[<span class="nt">Module 2: CI/CD Fundamentals</span>](<span class="na">/docs/dojo/white-belt/module-02-cicd-fundamentals.md</span>)
<span class="k">-</span><span class="w"> </span>[<span class="nt">Module 3: GitOps with ArgoCD</span>](<span class="na">/docs/dojo/white-belt/module-03-gitops.md</span>)

<span class="gs">**Practice More:**</span>
<span class="k">-</span><span class="w"> </span>Create a Python service using the FastAPI template
<span class="k">-</span><span class="w"> </span>Explore the Backstage service catalog
<span class="k">-</span><span class="w"> </span>Review the generated Jenkins pipeline code

<span class="gs">**Get Help:**</span>
<span class="k">-</span><span class="w"> </span>Join <span class="sb">`#dojo-white-belt`</span> channel in Mattermost
<span class="k">-</span><span class="w"> </span>Ask questions in office hours (Wednesdays 2pm ET)
<span class="k">-</span><span class="w"> </span>Review the troubleshooting guide

---

<span class="gu">## 📚 Additional Resources</span>

<span class="k">-</span><span class="w"> </span>[<span class="nt">Team Topologies Book</span>](<span class="na">https://teamtopologies.com/</span>) - Platform team patterns
<span class="k">-</span><span class="w"> </span>[<span class="nt">Backstage Documentation</span>](<span class="na">https://backstage.io/docs</span>) - Developer portal
<span class="k">-</span><span class="w"> </span>[<span class="nt">DORA Research</span>](<span class="na">https://dora.dev/</span>) - Four Key Metrics research
<span class="k">-</span><span class="w"> </span>[<span class="nt">Fawkes Architecture</span>](<span class="na">/docs/architecture.md</span>) - Platform design
</code></pre></div>
<hr />
<h2 id="code-review-guidelines">🔍 Code Review Guidelines</h2>
<p>When reviewing generated code or suggesting improvements, check for:</p>
<h3 id="platform-engineering-principles">Platform Engineering Principles</h3>
<ul>
<li>[ ] <strong>Self-service enabled</strong> - Can developers use without platform team help?</li>
<li>[ ] <strong>Opinionated defaults</strong> - Does it follow the golden path?</li>
<li>[ ] <strong>Fail-fast validation</strong> - Are errors caught early with clear messages?</li>
<li>[ ] <strong>Observable by default</strong> - Are metrics, logs, traces included?</li>
<li>[ ] <strong>Secure by default</strong> - Are security best practices enforced?</li>
</ul>
<h3 id="dora-capabilities-checklist">DORA Capabilities Checklist</h3>
<ul>
<li>[ ] <strong>Continuous Integration</strong> - Automated build/test on every commit?</li>
<li>[ ] <strong>Deployment Automation</strong> - One-click or automated deployment?</li>
<li>[ ] <strong>Trunk-Based Development</strong> - Short-lived branches (&lt;1 day)?</li>
<li>[ ] <strong>Shift Left Security</strong> - Scanning in CI pipeline?</li>
<li>[ ] <strong>Monitoring &amp; Observability</strong> - Metrics/logs/traces exported?</li>
</ul>
<h3 id="code-quality-standards">Code Quality Standards</h3>
<ul>
<li>[ ] <strong>DRY (Don't Repeat Yourself)</strong> - Use templates/modules</li>
<li>[ ] <strong>SOLID Principles</strong> - Single responsibility, open/closed, etc.</li>
<li>[ ] <strong>12-Factor App</strong> - Configuration via environment, stateless, etc.</li>
<li>[ ] <strong>Error Handling</strong> - Graceful degradation, clear error messages</li>
<li>[ ] <strong>Documentation</strong> - Inline comments for complex logic, README updates</li>
</ul>
<h3 id="fawkes-specific-checks">Fawkes-Specific Checks</h3>
<ul>
<li>[ ] <strong>Correct file location</strong> - Follows repository structure?</li>
<li>[ ] <strong>Naming conventions</strong> - Matches existing patterns?</li>
<li>[ ] <strong>No Spinnaker references</strong> - Uses ArgoCD/Argo Rollouts instead</li>
<li>[ ] <strong>No fawkes.io domain</strong> - Project is open source, not commercial</li>
<li>[ ] <strong>AWS first</strong> - Multi-cloud is future, AWS is MVP focus</li>
<li>[ ] <strong>Mattermost integration</strong> - Notifications go to Mattermost, not Slack</li>
</ul>
<hr />
<h2 id="things-to-avoid">🚫 Things to AVOID</h2>
<h3 id="removed-from-mvp-do-not-generate">Removed from MVP (Do NOT Generate)</h3>
<ul>
<li>❌ <strong>Spinnaker</strong> - Use ArgoCD + Argo Rollouts for progressive delivery</li>
<li>❌ <strong>Eclipse Che</strong> - Use local workspace automation (infra/workspace/)</li>
<li>❌ <strong>fawkes.io domain</strong> - No commercial domain, use fawkes-platform.local</li>
<li>❌ <strong>Crossplane</strong> (yet) - Use Terraform for AWS, Crossplane post-MVP</li>
<li>❌ <strong>Service Mesh</strong> (yet) - Basic Kubernetes networking for MVP</li>
<li>❌ <strong>Multi-cloud</strong> (yet) - AWS first, Azure/GCP later</li>
</ul>
<h3 id="anti-patterns-to-avoid">Anti-Patterns to Avoid</h3>
<ul>
<li>❌ Hardcoded secrets in manifests</li>
<li>❌ Using <code>:latest</code> image tags</li>
<li>❌ No resource limits on containers</li>
<li>❌ Imperative infrastructure commands</li>
<li>❌ Long-lived feature branches</li>
<li>❌ Manual deployment steps</li>
<li>❌ No observability instrumentation</li>
<li>❌ Copying code instead of using shared libraries</li>
</ul>
<hr />
<h2 id="pro-tips-for-using-copilot">💡 Pro Tips for Using Copilot</h2>
<h3 id="when-planning">When Planning</h3>
<ol>
<li><strong>Start with the why</strong> - "I need X because of DORA capability Y"</li>
<li><strong>Reference ADRs</strong> - "As decided in ADR-003, we use ArgoCD"</li>
<li><strong>Check existing code</strong> - "Look at templates/java-spring-boot for patterns"</li>
<li><strong>Ask for alternatives</strong> - "What are 3 ways to implement this?"</li>
</ol>
<h3 id="when-implementing">When Implementing</h3>
<ol>
<li><strong>Be specific about location</strong> - "Create in infra/kubernetes/jenkins/"</li>
<li><strong>Request complete solutions</strong> - "Include manifest, service, and ingress"</li>
<li><strong>Ask for tests</strong> - "Also create BDD test in tests/e2e/features/"</li>
<li><strong>Think about docs</strong> - "Update docs/components/jenkins.md too"</li>
</ol>
<h3 id="when-debugging">When Debugging</h3>
<ol>
<li><strong>Provide context</strong> - "Jenkins build fails at security scan stage"</li>
<li><strong>Share error messages</strong> - Paste the actual error</li>
<li><strong>Describe expected vs actual</strong> - "Should create Harbor repository but gets 404"</li>
<li><strong>Ask about DORA impact</strong> - "How does this affect lead time metric?"</li>
</ol>
<h3 id="example-prompts">Example Prompts</h3>
<p><strong>Good Prompt:</strong>
<div class="highlight"><pre><span></span><code>Create a Kubernetes Deployment for the Jenkins service in infra/kubernetes/jenkins/.
Requirements:
- Use jenkins/jenkins:lts-jdk17 image
- 2 replicas with PersistentVolumeClaim for /var/jenkins_home
- Resource limits: 2Gi memory, 1 CPU
- Liveness/readiness probes on port 8080
- ServiceAccount with RBAC for Kubernetes plugin
- Follow existing patterns from infra/kubernetes/backstage/

Also create:
- Service (NodePort on 8080, 50000)
- Ingress (jenkins.fawkes-platform.local)
- PersistentVolumeClaim (10Gi, ReadWriteOnce)

Include all in separate YAML files following naming convention.
</code></pre></div></p>
<p><strong>Bad Prompt:</strong>
<div class="highlight"><pre><span></span><code>make jenkins work in kubernetes
</code></pre></div></p>
<hr />
<h2 id="reference-key-technologies">📖 Reference: Key Technologies</h2>
<h3 id="technology-stack-summary">Technology Stack Summary</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Technology</th>
<th>Version</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Container Orchestration</strong></td>
<td>Kubernetes</td>
<td>1.28+</td>
<td>Run all platform services</td>
</tr>
<tr>
<td><strong>Developer Portal</strong></td>
<td>Backstage</td>
<td>1.20+</td>
<td>Self-service + dojo hub</td>
</tr>
<tr>
<td><strong>CI/CD</strong></td>
<td>Jenkins</td>
<td>LTS</td>
<td>Build and test automation</td>
</tr>
<tr>
<td><strong>GitOps</strong></td>
<td>ArgoCD</td>
<td>2.9+</td>
<td>Continuous delivery</td>
</tr>
<tr>
<td><strong>Progressive Delivery</strong></td>
<td>Argo Rollouts</td>
<td>1.6+</td>
<td>Canary/blue-green deployments</td>
</tr>
<tr>
<td><strong>Container Registry</strong></td>
<td>Harbor</td>
<td>2.10+</td>
<td>Image storage + scanning</td>
</tr>
<tr>
<td><strong>Collaboration</strong></td>
<td>Mattermost</td>
<td>9.0+</td>
<td>Team chat + ChatOps</td>
</tr>
<tr>
<td><strong>Project Management</strong></td>
<td>Focalboard</td>
<td>7.0+</td>
<td>Sprint planning (in Mattermost)</td>
</tr>
<tr>
<td><strong>Metrics</strong></td>
<td>Prometheus</td>
<td>2.48+</td>
<td>Time-series metrics</td>
</tr>
<tr>
<td><strong>Dashboards</strong></td>
<td>Grafana</td>
<td>10.0+</td>
<td>Visualization</td>
</tr>
<tr>
<td><strong>Logging</strong></td>
<td>OpenSearch</td>
<td>2.11+</td>
<td>Log aggregation</td>
</tr>
<tr>
<td><strong>Log Collection</strong></td>
<td>Fluent Bit</td>
<td>2.2+</td>
<td>Log forwarding</td>
</tr>
<tr>
<td><strong>Code Quality</strong></td>
<td>SonarQube</td>
<td>10.0+</td>
<td>SAST scanning</td>
</tr>
<tr>
<td><strong>Container Scanning</strong></td>
<td>Trivy</td>
<td>0.48+</td>
<td>Vulnerability scanning</td>
</tr>
<tr>
<td><strong>Policy Enforcement</strong></td>
<td>Kyverno</td>
<td>1.11+</td>
<td>Kubernetes policies</td>
</tr>
<tr>
<td><strong>Secrets</strong></td>
<td>External Secrets</td>
<td>0.9+</td>
<td>AWS Secrets Manager integration</td>
</tr>
<tr>
<td><strong>Infrastructure</strong></td>
<td>Terraform</td>
<td>1.6+</td>
<td>AWS provisioning</td>
</tr>
<tr>
<td><strong>Database</strong></td>
<td>PostgreSQL</td>
<td>15+</td>
<td>Platform data persistence</td>
</tr>
</tbody>
</table>
<h3 id="important-endpoints">Important Endpoints</h3>
<table>
<thead>
<tr>
<th>Service</th>
<th>URL</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Backstage</td>
<td><code>https://backstage.fawkes-platform.local</code></td>
<td>Developer portal</td>
</tr>
<tr>
<td>Jenkins</td>
<td><code>https://jenkins.fawkes-platform.local</code></td>
<td>CI/CD pipelines</td>
</tr>
<tr>
<td>ArgoCD</td>
<td><code>https://argocd.fawkes-platform.local</code></td>
<td>GitOps deployments</td>
</tr>
<tr>
<td>Harbor</td>
<td><code>https://harbor.fawkes-platform.local</code></td>
<td>Container registry</td>
</tr>
<tr>
<td>Grafana</td>
<td><code>https://grafana.fawkes-platform.local</code></td>
<td>Dashboards</td>
</tr>
<tr>
<td>Prometheus</td>
<td><code>https://prometheus.fawkes-platform.local</code></td>
<td>Metrics</td>
</tr>
<tr>
<td>Mattermost</td>
<td><code>https://mattermost.fawkes-platform.local</code></td>
<td>Team collaboration</td>
</tr>
<tr>
<td>SonarQube</td>
<td><code>https://sonarqube.fawkes-platform.local</code></td>
<td>Code quality</td>
</tr>
</tbody>
</table>
<h3 id="default-namespaces">Default Namespaces</h3>
<table>
<thead>
<tr>
<th>Namespace</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fawkes-platform</code></td>
<td>Core platform services</td>
</tr>
<tr>
<td><code>fawkes-dojo</code></td>
<td>Dojo learning labs</td>
</tr>
<tr>
<td><code>argocd</code></td>
<td>ArgoCD controller</td>
</tr>
<tr>
<td><code>monitoring</code></td>
<td>Prometheus, Grafana</td>
</tr>
<tr>
<td><code>logging</code></td>
<td>OpenSearch, Fluent Bit</td>
</tr>
<tr>
<td><code>external-secrets-system</code></td>
<td>External Secrets Operator</td>
</tr>
<tr>
<td><code>kyverno</code></td>
<td>Policy enforcement</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="quick-start-commands">🎯 Quick Start Commands</h2>
<h3 id="common-development-tasks">Common Development Tasks</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Provision AWS infrastructure</span>
<span class="nb">cd</span><span class="w"> </span>infra
./buildinfra.sh<span class="w"> </span>-p<span class="w"> </span>aws<span class="w"> </span>-e<span class="w"> </span>dev

<span class="c1"># Deploy platform components</span>
./buildplatform.sh

<span class="c1"># Run tests</span>
<span class="nb">cd</span><span class="w"> </span>tests/e2e
pytest<span class="w"> </span>-v<span class="w"> </span>--tb<span class="o">=</span>short

<span class="c1"># Access Backstage locally (port-forward)</span>
kubectl<span class="w"> </span>port-forward<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>svc/backstage<span class="w"> </span><span class="m">7007</span>:7007

<span class="c1"># View logs for a service</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>jenkins<span class="w"> </span>-f

<span class="c1"># Restart a deployment</span>
kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment/backstage<span class="w"> </span>-n<span class="w"> </span>fawkes-platform

<span class="c1"># Sync ArgoCD application</span>
argocd<span class="w"> </span>app<span class="w"> </span>sync<span class="w"> </span>backstage

<span class="c1"># Get DORA metrics</span>
curl<span class="w"> </span>http://dora-metrics.fawkes-platform.svc:8080/api/v1/metrics

<span class="c1"># Access Grafana DORA dashboard</span>
kubectl<span class="w"> </span>port-forward<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>svc/grafana<span class="w"> </span><span class="m">3000</span>:3000
<span class="c1"># Open http://localhost:3000/d/dora-metrics</span>
</code></pre></div>
<h3 id="useful-kubectl-commands">Useful Kubectl Commands</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Get all platform services</span>
kubectl<span class="w"> </span>get<span class="w"> </span>all<span class="w"> </span>-n<span class="w"> </span>fawkes-platform

<span class="c1"># Check pod status</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>-o<span class="w"> </span>wide

<span class="c1"># Describe a failing pod</span>
kubectl<span class="w"> </span>describe<span class="w"> </span>pod<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>-n<span class="w"> </span>fawkes-platform

<span class="c1"># Check resource usage</span>
kubectl<span class="w"> </span>top<span class="w"> </span>nodes
kubectl<span class="w"> </span>top<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>fawkes-platform

<span class="c1"># View events</span>
kubectl<span class="w"> </span>get<span class="w"> </span>events<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>--sort-by<span class="o">=</span><span class="s1">&#39;.lastTimestamp&#39;</span>

<span class="c1"># Execute command in pod</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>--<span class="w"> </span>/bin/bash

<span class="c1"># View logs with context</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>--previous
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>&lt;pod-name&gt;<span class="w"> </span>--tail<span class="o">=</span><span class="m">100</span><span class="w"> </span>-f
</code></pre></div>
<hr />
<h2 id="troubleshooting-guide">🆘 Troubleshooting Guide</h2>
<h3 id="common-issues-and-solutions">Common Issues and Solutions</h3>
<h4 id="issue-jenkins-build-fails-at-security-scan-stage">Issue: Jenkins build fails at security scan stage</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Check Trivy is installed in agent</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;jenkins-agent-pod&gt;<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>--<span class="w"> </span>trivy<span class="w"> </span>--version

<span class="c1"># Verify Harbor registry is accessible</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;jenkins-agent-pod&gt;<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>--<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>curl<span class="w"> </span>-k<span class="w"> </span>https://harbor.fawkes-platform.svc

<span class="c1"># Check if image was pushed successfully</span>
curl<span class="w"> </span>-u<span class="w"> </span>robot-account:password<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>https://harbor.fawkes-platform.local/api/v2.0/projects/fawkes/repositories
</code></pre></div>
<h4 id="issue-argocd-not-syncing-application">Issue: ArgoCD not syncing application</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Check ArgoCD application status</span>
kubectl<span class="w"> </span>get<span class="w"> </span>application<span class="w"> </span>-n<span class="w"> </span>argocd<span class="w"> </span>backstage<span class="w"> </span>-o<span class="w"> </span>yaml

<span class="c1"># View sync operation logs</span>
argocd<span class="w"> </span>app<span class="w"> </span>logs<span class="w"> </span>backstage

<span class="c1"># Force sync</span>
argocd<span class="w"> </span>app<span class="w"> </span>sync<span class="w"> </span>backstage<span class="w"> </span>--force

<span class="c1"># Check if repository is accessible</span>
argocd<span class="w"> </span>repo<span class="w"> </span>list
</code></pre></div>
<h4 id="issue-dora-metrics-not-appearing-in-grafana">Issue: DORA metrics not appearing in Grafana</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Verify metrics service is running</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>dora-metrics

<span class="c1"># Check if Prometheus is scraping metrics</span>
kubectl<span class="w"> </span>port-forward<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>svc/prometheus<span class="w"> </span><span class="m">9090</span>:9090
<span class="c1"># Visit http://localhost:9090/targets</span>

<span class="c1"># Test metrics endpoint directly</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;prometheus-pod&gt;<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>--<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>curl<span class="w"> </span>http://dora-metrics.fawkes-platform.svc:8080/metrics

<span class="c1"># Check Grafana datasource configuration</span>
kubectl<span class="w"> </span>get<span class="w"> </span>configmap<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>grafana-datasources<span class="w"> </span>-o<span class="w"> </span>yaml
</code></pre></div>
<h4 id="issue-cannot-access-backstage-portal">Issue: Cannot access Backstage portal</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Check ingress configuration</span>
kubectl<span class="w"> </span>get<span class="w"> </span>ingress<span class="w"> </span>-n<span class="w"> </span>fawkes-platform

<span class="c1"># Verify DNS resolution</span>
nslookup<span class="w"> </span>backstage.fawkes-platform.local

<span class="c1"># Check certificate (if using TLS)</span>
kubectl<span class="w"> </span>get<span class="w"> </span>certificate<span class="w"> </span>-n<span class="w"> </span>fawkes-platform

<span class="c1"># View Backstage logs</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>fawkes-platform<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>backstage<span class="w"> </span>--tail<span class="o">=</span><span class="m">50</span>
</code></pre></div>
<hr />
<h2 id="documentation-standards">📝 Documentation Standards</h2>
<p>When creating or updating documentation:</p>
<h3 id="structure">Structure</h3>
<div class="highlight"><pre><span></span><code><span class="gh"># Title (H1 - One per document)</span>

<span class="gs">**Metadata**</span>: Version, Last Updated, Status, Audience

<span class="gu">## Overview (H2)</span>
<span class="k">-</span><span class="w"> </span>Brief description
<span class="k">-</span><span class="w"> </span>Purpose and scope
<span class="k">-</span><span class="w"> </span>Prerequisites

<span class="gu">## Table of Contents (if &gt;3 sections)</span>

<span class="gu">## Main Content (H2 sections)</span>
<span class="k">-</span><span class="w"> </span>Clear headings
<span class="k">-</span><span class="w"> </span>Code examples with language tags
<span class="k">-</span><span class="w"> </span>Screenshots where helpful
<span class="k">-</span><span class="w"> </span>Links to related docs

<span class="gu">## Troubleshooting (H2)</span>
<span class="k">-</span><span class="w"> </span>Common issues
<span class="k">-</span><span class="w"> </span>Error messages and solutions

<span class="gu">## Additional Resources (H2)</span>
<span class="k">-</span><span class="w"> </span>External links
<span class="k">-</span><span class="w"> </span>Related documentation
<span class="k">-</span><span class="w"> </span>Contact information
</code></pre></div>
<h3 id="code-examples">Code Examples</h3>
<ul>
<li>Always include file path: <code># File: path/to/file.yaml</code></li>
<li>Use proper syntax highlighting: <code>yaml,</code>bash, ```python</li>
<li>Add comments explaining non-obvious parts</li>
<li>Include DORA capability annotations</li>
<li>Show complete, runnable examples</li>
</ul>
<h3 id="linking">Linking</h3>
<ul>
<li>Use relative links for internal docs: <code>[Architecture](../architecture.md)</code></li>
<li>Use absolute URLs for external resources</li>
<li>Check links don't break when docs move</li>
</ul>
<hr />
<h2 id="belt-specific-guidelines">🎓 Belt-Specific Guidelines</h2>
<h3 id="white-belt-beginner">White Belt (Beginner)</h3>
<ul>
<li>Focus on concepts, not complexity</li>
<li>Provide step-by-step instructions</li>
<li>Include lots of screenshots</li>
<li>Explain every command</li>
<li>Use simple, working examples</li>
</ul>
<h3 id="yellow-belt-intermediate">Yellow Belt (Intermediate)</h3>
<ul>
<li>Introduce complexity gradually</li>
<li>Explain trade-offs and alternatives</li>
<li>Encourage exploration</li>
<li>Provide troubleshooting guidance</li>
<li>Include performance considerations</li>
</ul>
<h3 id="green-belt-advanced">Green Belt (Advanced)</h3>
<ul>
<li>Assume foundational knowledge</li>
<li>Focus on advanced patterns</li>
<li>Discuss architectural decisions</li>
<li>Include optimization techniques</li>
<li>Reference ADRs and best practices</li>
</ul>
<h3 id="brown-belt-expert">Brown Belt (Expert)</h3>
<ul>
<li>Multi-component integration</li>
<li>Production considerations</li>
<li>Disaster recovery scenarios</li>
<li>Performance tuning</li>
<li>Custom implementations</li>
</ul>
<h3 id="black-belt-master">Black Belt (Master)</h3>
<ul>
<li>Platform architecture design</li>
<li>Multi-tenancy patterns</li>
<li>Cost optimization strategies</li>
<li>Mentoring and teaching</li>
<li>Contributing to Fawkes core</li>
</ul>
<hr />
<h2 id="continuous-improvement">🔄 Continuous Improvement</h2>
<h3 id="contributing-to-copilot-instructions">Contributing to Copilot Instructions</h3>
<p>Found a pattern that works well? Submit a PR to improve these instructions!</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Fork the repository</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/paruff/fawkes.git
<span class="nb">cd</span><span class="w"> </span>fawkes

<span class="c1"># Create a branch</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>improve-copilot-instructions

<span class="c1"># Edit the file</span>
<span class="c1"># (This file should be at .github/copilot-instructions.md or similar)</span>

<span class="c1"># Commit with clear message</span>
git<span class="w"> </span>commit<span class="w"> </span>-am<span class="w"> </span><span class="s2">&quot;Add pattern for X to Copilot instructions&quot;</span>

<span class="c1"># Push and create PR</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>improve-copilot-instructions
</code></pre></div>
<h3 id="feedback-loop">Feedback Loop</h3>
<p>After using these instructions:
1. <strong>What worked well?</strong> - Share successful patterns
2. <strong>What was confusing?</strong> - Help clarify ambiguous sections
3. <strong>What's missing?</strong> - Suggest new sections or examples
4. <strong>What's outdated?</strong> - Update deprecated practices</p>
<p>Post feedback in:
- GitHub Discussion: https://github.com/paruff/fawkes/discussions
- Mattermost: <code>#platform-engineering</code> channel
- Weekly office hours: Wednesdays 2pm ET</p>
<hr />
<h2 id="success-metrics">📊 Success Metrics</h2>
<p>Track how well Copilot is helping:</p>
<ul>
<li><strong>Time to first PR</strong> - How quickly can new contributors submit code?</li>
<li><strong>Code review cycles</strong> - Fewer cycles = better adherence to patterns</li>
<li><strong>Test coverage</strong> - Are tests being generated automatically?</li>
<li><strong>Documentation freshness</strong> - Are docs updated with code changes?</li>
<li><strong>DORA metrics</strong> - Is generated code improving platform performance?</li>
</ul>
<hr />
<h2 id="summary">🏁 Summary</h2>
<p><strong>Key Takeaways:</strong>
1. ✅ Fawkes uses an established structure - respect it
2. ✅ AWS first, multi-cloud later - don't over-abstract
3. ✅ ArgoCD replaces Spinnaker - use Argo Rollouts for progressive delivery
4. ✅ Mattermost, not Slack - all notifications go to Mattermost
5. ✅ DORA metrics are first-class - instrument everything
6. ✅ Security from the start - scanning, policies, secrets management
7. ✅ Dojo learning is core - create educational content
8. ✅ GitOps workflow - all changes through Git</p>
<p><strong>Remember:</strong>
- Check existing patterns before creating new ones
- Follow the repository structure exactly
- Tag code with DORA capabilities and belt levels
- Include tests with all new features
- Update documentation when code changes
- Ask when uncertain about placement or approach</p>
<p><strong>Your Goal:</strong>
Help build Fawkes into the world's best open-source Internal Product Delivery Platform, 
where developers learn platform engineering while deploying production-grade infrastructure.</p>
<hr />
<p><strong>Version:</strong> 1.0.0<br />
<strong>Last Updated:</strong> October 26, 2025<br />
<strong>Maintained By:</strong> Fawkes Platform Team<br />
<strong>Questions?</strong> Open a <a href="https://github.com/paruff/fawkes/discussions">GitHub Discussion</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>
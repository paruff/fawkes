{
  "data_asset_type": "Dataset",
  "expectation_suite_name": "sonarqube_db_suite",
  "expectations": [
    {
      "expectation_type": "expect_table_row_count_to_be_between",
      "kwargs": {
        "min_value": 0,
        "max_value": 10000000
      },
      "meta": {
        "notes": "SonarQube projects table should be within reasonable limits"
      }
    },
    {
      "expectation_type": "expect_table_columns_to_match_set",
      "kwargs": {
        "column_set": ["uuid", "kee", "name", "description", "tags", "created_at", "updated_at"],
        "exact_match": false
      },
      "meta": {
        "notes": "Core SonarQube projects table columns"
      }
    },
    {
      "expectation_type": "expect_column_values_to_not_be_null",
      "kwargs": {
        "column": "uuid"
      },
      "meta": {
        "notes": "uuid is the primary key and should never be null"
      }
    },
    {
      "expectation_type": "expect_column_values_to_be_unique",
      "kwargs": {
        "column": "uuid"
      },
      "meta": {
        "notes": "uuid should be unique across all projects"
      }
    },
    {
      "expectation_type": "expect_column_values_to_not_be_null",
      "kwargs": {
        "column": "kee"
      },
      "meta": {
        "notes": "kee (project key) is required for all projects"
      }
    },
    {
      "expectation_type": "expect_column_values_to_be_unique",
      "kwargs": {
        "column": "kee"
      },
      "meta": {
        "notes": "kee (project key) should be unique"
      }
    },
    {
      "expectation_type": "expect_column_values_to_not_be_null",
      "kwargs": {
        "column": "name"
      },
      "meta": {
        "notes": "name is required for all projects"
      }
    },
    {
      "expectation_type": "expect_column_values_to_match_regex",
      "kwargs": {
        "column": "uuid",
        "regex": "^[A-Z0-9_-]+$"
      },
      "meta": {
        "notes": "uuid should follow SonarQube UUID format (alphanumeric with dashes/underscores)"
      }
    },
    {
      "expectation_type": "expect_column_values_to_not_be_null",
      "kwargs": {
        "column": "created_at"
      },
      "meta": {
        "notes": "created_at timestamp is required"
      }
    },
    {
      "expectation_type": "expect_column_values_to_be_dateutil_parseable",
      "kwargs": {
        "column": "created_at"
      },
      "meta": {
        "notes": "created_at should be a valid timestamp"
      }
    },
    {
      "expectation_type": "expect_column_values_to_be_dateutil_parseable",
      "kwargs": {
        "column": "updated_at"
      },
      "meta": {
        "notes": "updated_at should be a valid timestamp when present"
      }
    },
    {
      "expectation_type": "expect_column_max_to_be_between",
      "kwargs": {
        "column": "updated_at",
        "min_value": "2024-01-01",
        "max_value": "2030-12-31",
        "parse_strings_as_datetimes": true
      },
      "meta": {
        "notes": "Data freshness check - latest updates should be recent"
      }
    }
  ],
  "ge_cloud_id": null,
  "meta": {
    "great_expectations_version": "0.18.12",
    "description": "Expectation suite for SonarQube database validation",
    "database": "sonarqube",
    "schema": "public",
    "table": "projects",
    "validations": [
      "Column presence and types",
      "Null value constraints on primary/required fields",
      "Uniqueness constraints on uuid and kee",
      "UUID format validation",
      "Timestamp validity",
      "Data freshness (updated_at)",
      "Row count sanity checks"
    ]
  }
}

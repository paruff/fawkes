{
  "data_asset_type": "Dataset",
  "expectation_suite_name": "datahub_db_suite",
  "expectations": [
    {
      "expectation_type": "expect_table_row_count_to_be_between",
      "kwargs": {
        "min_value": 0,
        "max_value": 10000000
      },
      "meta": {
        "notes": "DataHub metadata should be within reasonable limits"
      }
    },
    {
      "expectation_type": "expect_table_columns_to_match_set",
      "kwargs": {
        "column_set": [
          "urn",
          "aspect",
          "version",
          "metadata",
          "systemmetadata",
          "createdon",
          "createdby"
        ],
        "exact_match": false
      },
      "meta": {
        "notes": "Core DataHub metadata aspect columns"
      }
    },
    {
      "expectation_type": "expect_column_values_to_not_be_null",
      "kwargs": {
        "column": "urn"
      },
      "meta": {
        "notes": "URN is required for all metadata"
      }
    },
    {
      "expectation_type": "expect_column_values_to_not_be_null",
      "kwargs": {
        "column": "aspect"
      },
      "meta": {
        "notes": "Aspect name is required"
      }
    },
    {
      "expectation_type": "expect_column_values_to_match_regex",
      "kwargs": {
        "column": "urn",
        "regex": "^urn:li:[a-zA-Z]+:.*"
      },
      "meta": {
        "notes": "URN should follow DataHub format"
      }
    },
    {
      "expectation_type": "expect_column_values_to_not_be_null",
      "kwargs": {
        "column": "version"
      },
      "meta": {
        "notes": "version is required for aspect versioning"
      }
    },
    {
      "expectation_type": "expect_column_values_to_be_of_type",
      "kwargs": {
        "column": "version",
        "type_": "BIGINT"
      },
      "meta": {
        "notes": "version should be BIGINT/INTEGER type"
      }
    },
    {
      "expectation_type": "expect_column_values_to_be_between",
      "kwargs": {
        "column": "version",
        "min_value": 0,
        "max_value": 999999999
      },
      "meta": {
        "notes": "version should be non-negative and within reasonable range"
      }
    },
    {
      "expectation_type": "expect_column_values_to_be_in_type_list",
      "kwargs": {
        "column": "metadata",
        "type_list": ["TEXT", "VARCHAR", "JSON", "JSONB"]
      },
      "meta": {
        "notes": "metadata should be text or JSON type"
      }
    },
    {
      "expectation_type": "expect_column_values_to_be_dateutil_parseable",
      "kwargs": {
        "column": "createdon"
      },
      "meta": {
        "notes": "createdon should be valid timestamp"
      }
    },
    {
      "expectation_type": "expect_column_max_to_be_between",
      "kwargs": {
        "column": "createdon",
        "min_value": "2024-01-01",
        "max_value": "2030-12-31",
        "parse_strings_as_datetimes": true
      },
      "meta": {
        "notes": "Data freshness - recent metadata should exist"
      }
    },
    {
      "expectation_type": "expect_compound_columns_to_be_unique",
      "kwargs": {
        "column_list": ["urn", "aspect", "version"]
      },
      "meta": {
        "notes": "Composite uniqueness constraint for URN + aspect + version"
      }
    }
  ],
  "ge_cloud_id": null,
  "meta": {
    "great_expectations_version": "0.18.12",
    "description": "Comprehensive expectation suite for DataHub database validation",
    "database": "datahub",
    "schema": "public",
    "table": "metadata_aspect_v2",
    "validations": [
      "Column presence and types",
      "Null value constraints on required fields",
      "URN format validation (DataHub standard)",
      "Version range and type validation",
      "Composite uniqueness constraint",
      "Metadata type validation",
      "Timestamp validity",
      "Data freshness check",
      "Row count sanity checks"
    ]
  }
}


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Internal Developer Platform for Elite Performance">
      
      
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>ADR-013: Distributed Tracing for Platform and Applications - Fawkes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adr-013-distributed-tracing-for-platform-and-applications" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Fawkes" class="md-header__button md-logo" aria-label="Fawkes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Fawkes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ADR-013: Distributed Tracing for Platform and Applications
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/" class="md-tabs__link">
          
  
  
    
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../how-to/" class="md-tabs__link">
          
  
  
    
  
  How-To Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../explanation/" class="md-tabs__link">
          
  
  
    
  
  Explanation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../playbooks/" class="md-tabs__link">
          
  
  
    
  
  Playbooks

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Fawkes" class="md-nav__button md-logo" aria-label="Fawkes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Fawkes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tutorials/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/1-deploy-first-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Deploy Your First Service
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/2-add-tracing-tempo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Add Distributed Tracing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/3-consume-vault-secret/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. Consume Vault Secrets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/4-buildpack-migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Migrate to Buildpacks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/5-create-golden-path-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. Create a Golden Path Template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/6-measure-dora-metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6. Measure DORA Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Dojo Learning
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Dojo Learning
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dojo/modules/white-belt/module-01-what-is-idp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    White Belt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dojo/modules/yellow-belt/module-05-ci-fundamentals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Yellow Belt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dojo/modules/green-belt/module-09-gitops-argocd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Green Belt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dojo/modules/brown-belt/module-13-observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Brown Belt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dojo/modules/black-belt/module-17-platform-product/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Black Belt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../how-to/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    How-To Guides
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    How-To Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    GitOps
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    GitOps
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/gitops/onboard-service-argocd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Onboard Service to ArgoCD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/gitops/sync-argocd-app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sync ArgoCD Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Observability
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/observability/trace-request-tempo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trace Requests with Tempo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/observability/view-dora-metrics-devlake/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    View DORA Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/security/rotate-vault-secrets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rotate Vault Secrets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/development/debug-buildpack-failure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debug Buildpack Failures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/techdocs-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using TechDocs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Networking
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Networking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/networking/configure-ingress-tls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configure Ingress with TLS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Policy
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Policy
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/policy/troubleshoot-kyverno-violation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshoot Kyverno Violations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../patterns/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Patterns
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Patterns
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/continuous-delivery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Continuous Delivery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/infrastructure-as-code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Infrastructure as Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/test-automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Automation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../explanation/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Explanation
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Explanation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/architecture/gitops-strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitOps Strategy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Containers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Containers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/containers/buildpacks-philosophy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Buildpacks Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/security/zero-trust-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zero Trust Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Observability
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/observability/unified-telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unified Telemetry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IDP
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    IDP
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/idp/product-discovery-delivery-flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Product Discovery & Delivery Flow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Governance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Governance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/governance/policy-as-code-tiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policy as Code Tiers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Platform Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../business_case/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Business Case
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../capabilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Capabilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/api/backstage-plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backstage Plugins API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/api/jenkins-webhook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Jenkins Webhook API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CRDs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    CRDs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/crds/golden-path-crd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Golden Path Devfile
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configuration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/config/jenkins-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Jenkins Helm Values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/config/prometheus-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prometheus Helm Values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Platform Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_5" >
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Policies
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Policies
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/policies/kyverno-policy-list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kyverno Policy List
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Catalog
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Catalog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/catalogue/service-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tools/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/spinnaker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spinnaker (Deprecated)
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--deprecated"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/jenkins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Jenkins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/prometheus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prometheus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/focalboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Focalboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../playbooks/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Playbooks
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Playbooks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../playbooks/TEMPLATE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../playbooks/dora-metrics-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DORA Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    <span class="md-ellipsis">
      
        Status
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decision
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Decision">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#technology-stack" class="md-nav__link">
    <span class="md-ellipsis">
      
        Technology Stack
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opentelemetry-instrumentation-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenTelemetry Instrumentation Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opentelemetry-collector-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenTelemetry Collector Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-tempo-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Grafana Tempo Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-correlation-with-logs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Trace Correlation with Logs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-dashboard-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Grafana Dashboard Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sampling-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sampling Strategies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dora-metrics-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        DORA Metrics Integration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-privacy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security &amp; Privacy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-impact" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance Impact
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consequences" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consequences
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consequences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#positive" class="md-nav__link">
    <span class="md-ellipsis">
      
        Positive
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#negative" class="md-nav__link">
    <span class="md-ellipsis">
      
        Negative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neutral" class="md-nav__link">
    <span class="md-ellipsis">
      
        Neutral
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternatives-considered" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternatives Considered
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Alternatives Considered">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternative-1-jaeger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 1: Jaeger
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-2-zipkin" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 2: Zipkin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-3-aws-x-ray" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 3: AWS X-Ray
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-4-elastic-apm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 4: Elastic APM
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-5-lightstep-honeycomb-datadog-apm-commercial-saas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 5: Lightstep / Honeycomb / Datadog APM (Commercial SaaS)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-6-no-distributed-tracing-logs-metrics-only" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 6: No Distributed Tracing (Logs + Metrics Only)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-plan" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Plan
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Plan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-foundation-week-6-days-1-2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 1: Foundation (Week 6, Days 1-2)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-platform-service-instrumentation-week-6-days-3-5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 2: Platform Service Instrumentation (Week 6, Days 3-5)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-application-instrumentation-templates-week-7-days-1-2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 3: Application Instrumentation Templates (Week 7, Days 1-2)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4-observability-integration-week-7-days-3-5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 4: Observability Integration (Week 7, Days 3-5)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-5-performance-optimization-week-8-days-1-2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 5: Performance &amp; Optimization (Week 8, Days 1-2)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-6-documentation-training-week-8-days-3-5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 6: Documentation &amp; Training (Week 8, Days 3-5)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dojo-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dojo Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dojo Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#brown-belt-module-6-distributed-tracing-request-flow-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Brown Belt - Module 6: "Distributed Tracing &amp; Request Flow Analysis"
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-observability" class="md-nav__link">
    <span class="md-ellipsis">
      
        Monitoring &amp; Observability
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Monitoring &amp; Observability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tempo-health-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tempo Health Metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opentelemetry-collector-health" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenTelemetry Collector Health
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Considerations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-privacy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Privacy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compliance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Compliance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cost-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cost Analysis
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cost Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#storage-costs-production" class="md-nav__link">
    <span class="md-ellipsis">
      
        Storage Costs (Production)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infrastructure-costs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Infrastructure Costs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Documentation Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Documentation Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-platform-teams" class="md-nav__link">
    <span class="md-ellipsis">
      
        For Platform Teams
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-application-teams" class="md-nav__link">
    <span class="md-ellipsis">
      
        For Application Teams
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-dojo-learners" class="md-nav__link">
    <span class="md-ellipsis">
      
        For Dojo Learners
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-decisions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related Decisions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      
        References
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Notes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#last-updated" class="md-nav__link">
    <span class="md-ellipsis">
      
        Last Updated
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="adr-013-distributed-tracing-for-platform-and-applications">ADR-013: Distributed Tracing for Platform and Applications</h1>
<h2 id="status">Status</h2>
<p>Accepted</p>
<h2 id="context">Context</h2>
<p>The Fawkes platform consists of multiple interconnected services where a single user request may traverse numerous components:</p>
<p><strong>Platform Request Flows</strong>:
- <strong>Developer Portal Access</strong>: User  NGINX Ingress  Backstage  PostgreSQL  GitHub API  ArgoCD API
- <strong>CI/CD Pipeline</strong>: Git Push  Jenkins Webhook  Jenkins Build  Harbor Push  ArgoCD Sync  Kubernetes Deployment
- <strong>Dojo Learning</strong>: User  Backstage  Lab Provisioning Service  Terraform  AWS API  Kubernetes API
- <strong>Collaboration</strong>: User  Mattermost  PostgreSQL  S3 (file storage)  Elasticsearch (search)
- <strong>Deployment</strong>: Developer  ArgoCD UI  Kubernetes API  Application Pods  Database</p>
<p><strong>Application Request Flows</strong>:
- Microservice architectures with service-to-service calls
- Database queries across multiple services
- External API integrations
- Message queue processing
- Asynchronous job execution</p>
<p><strong>Troubleshooting Challenges Without Tracing</strong>:
- <strong>Latency Attribution</strong>: "Why is this request slow?" - Which service is the bottleneck?
- <strong>Error Root Cause</strong>: "Where did this error originate?" - Which service in the chain failed?
- <strong>Dependency Mapping</strong>: "What services does this request touch?" - Understanding call paths
- <strong>Performance Optimization</strong>: "Which database queries are slow?" - Query-level visibility
- <strong>Cascading Failures</strong>: "Why are all services degraded?" - Tracing failure propagation
- <strong>Cross-Team Debugging</strong>: Multiple teams own services in a request path</p>
<p><strong>DORA Metrics Requirements</strong>:
- <strong>Lead Time for Changes</strong>: Trace deployment pipeline from commit to production
- <strong>Change Failure Rate</strong>: Correlate failed deployments with application errors
- <strong>Mean Time to Recovery</strong>: Quickly identify root cause of incidents
- <strong>Deployment Frequency</strong>: Understand deployment pipeline performance</p>
<p><strong>Technical Requirements</strong>:
- Support for multiple programming languages (Java, Python, Node.js, Go)
- Low overhead (&lt;5% CPU, &lt;100MB memory per service)
- Sampling strategies to control data volume
- Integration with existing observability (metrics, logs)
- Correlation IDs linking traces to logs
- Support for synchronous and asynchronous operations
- Trace context propagation across HTTP, gRPC, message queues
- Long-term trace storage for trend analysis
- Real-time trace querying for active troubleshooting</p>
<p><strong>Operational Requirements</strong>:
- Automatic instrumentation where possible (minimal code changes)
- Manual instrumentation for custom spans
- Scalable backend (handle 100K+ spans/second)
- Data retention policy (7 days detailed, 30 days sampled, 90 days aggregated)
- Multi-tenancy (namespace/team isolation)
- Integration with Grafana for visualization
- Alert on trace-based SLIs (P95 latency, error rates)</p>
<p><strong>Security Requirements</strong>:
- Sensitive data scrubbing (PII, credentials)
- Access control for trace data
- Encryption in transit and at rest
- Compliance with data retention policies</p>
<p><strong>Learning &amp; Dojo Requirements</strong>:
- Learners should understand distributed tracing concepts
- Hands-on labs demonstrating tracing implementation
- Troubleshooting exercises using traces
- Integration with Brown Belt (Observability &amp; SRE) curriculum</p>
<h2 id="decision">Decision</h2>
<p>We will use <strong>Grafana Tempo</strong> as the distributed tracing backend, integrated with <strong>OpenTelemetry</strong> for instrumentation and trace collection.</p>
<h3 id="architecture">Architecture</h3>
<div class="highlight"><pre><span></span><code>
  Applications &amp; Platform Services                                
          
   Backstage     Jenkins       ArgoCD        Custom     
   (Node.js)     (Java)        (Go)          Apps       
          
                                                             
         OpenTelemetry SDK instrumentation                    
                 
                                                                 

                                OTLP (gRPC/HTTP)
                               

  Kubernetes Cluster                                             
                                                                 
               
   OpenTelemetry Collector (DaemonSet/Deployment)              
   - Receives traces via OTLP                                  
   - Batching and buffering                                    
   - Sampling strategies                                       
   - Tail-based sampling (intelligent)                         
   - Attribute processing and enrichment                       
   - Sensitive data scrubbing                                  
               
                                                                 
                                                                 
                         
   Grafana Tempo (Trace Storage)                               
   - Object storage backend (S3/MinIO)                         
   - Block-based columnar storage                              
   - TraceQL query language                                    
   - Multi-tenancy support                                     
                         
                                                                 
                                                                 
                         
   Grafana (Visualization)                                     
   - Trace search and visualization                            
   - Trace-to-logs correlation                                 
   - Trace-to-metrics correlation                              
   - Service dependency graphs                                 
   - RED metrics from traces                                   
                         



  Integration with Observability Stack                            
                                                                   
  Tempo  Prometheus (Exemplars link metrics to traces)         
  Tempo  Loki (Trace IDs in logs for correlation)              
  Tempo  Grafana (Unified visualization)                        

</code></pre></div>
<h3 id="technology-stack">Technology Stack</h3>
<p><strong>Instrumentation</strong>: OpenTelemetry SDKs
- <strong>Java</strong>: <code>opentelemetry-java-instrumentation</code> (auto-instrumentation agent)
- <strong>Python</strong>: <code>opentelemetry-distro</code> with <code>opentelemetry-instrumentation</code>
- <strong>Node.js</strong>: <code>@opentelemetry/sdk-node</code> with auto-instrumentation
- <strong>Go</strong>: <code>go.opentelemetry.io/otel</code> with manual instrumentation</p>
<p><strong>Collection</strong>: OpenTelemetry Collector
- Deployed as DaemonSet (node-level collection)
- Deployed as Deployment (centralized processing)
- OTLP receivers (gRPC and HTTP)
- Tail-based sampling processor
- Batch processor for efficiency</p>
<p><strong>Storage</strong>: Grafana Tempo
- Backend: S3-compatible object storage (AWS S3, MinIO)
- Retention: 7 days full detail, 30 days sampled
- Compression: Snappy/LZ4 for cost efficiency
- Ingestion rate: 100K+ spans/second</p>
<p><strong>Visualization</strong>: Grafana
- Tempo data source integration
- TraceQL query builder
- Node graph visualization
- Trace comparison tools</p>
<h3 id="opentelemetry-instrumentation-strategy">OpenTelemetry Instrumentation Strategy</h3>
<p><strong>Automatic Instrumentation</strong> (Preferred for rapid adoption):</p>
<p><strong>Java Applications (Jenkins plugins, Spring Boot apps)</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Download OpenTelemetry Java agent</span>
wget<span class="w"> </span>https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/latest/download/opentelemetry-javaagent.jar

<span class="c1"># Add to JVM arguments</span>
java<span class="w"> </span>-javaagent:opentelemetry-javaagent.jar<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-Dotel.service.name<span class="o">=</span>jenkins<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-Dotel.exporter.otlp.endpoint<span class="o">=</span>http://otel-collector:4317<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-jar<span class="w"> </span>jenkins.war
</code></pre></div></p>
<p><strong>Python Applications (FastAPI, Django)</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Install OpenTelemetry distro</span>
pip<span class="w"> </span>install<span class="w"> </span>opentelemetry-distro<span class="w"> </span>opentelemetry-exporter-otlp

<span class="c1"># Auto-instrument</span>
opentelemetry-bootstrap<span class="w"> </span>-a<span class="w"> </span>install
opentelemetry-instrument<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--service_name<span class="w"> </span>my-python-app<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--exporter_otlp_endpoint<span class="w"> </span>http://otel-collector:4317<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>python<span class="w"> </span>app.py
</code></pre></div></p>
<p><strong>Node.js Applications (Backstage, Express)</strong>:
<div class="highlight"><pre><span></span><code><span class="c1">// app.js - Add at the very top</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NodeSDK</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@opentelemetry/sdk-node&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">OTLPTraceExporter</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@opentelemetry/exporter-trace-otlp-http&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getNodeAutoInstrumentations</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@opentelemetry/auto-instrumentations-node&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">sdk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">NodeSDK</span><span class="p">({</span>
<span class="w">  </span><span class="nx">serviceName</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;backstage&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">traceExporter</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">OTLPTraceExporter</span><span class="p">({</span>
<span class="w">    </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;http://otel-collector:4318/v1/traces&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="nx">instrumentations</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">getNodeAutoInstrumentations</span><span class="p">()],</span>
<span class="p">});</span>

<span class="nx">sdk</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
</code></pre></div></p>
<p><strong>Manual Instrumentation</strong> (For custom spans):</p>
<p><strong>Go Example (ArgoCD, custom controllers)</strong>:
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;go.opentelemetry.io/otel&quot;</span>
<span class="w">    </span><span class="s">&quot;go.opentelemetry.io/otel/trace&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">processDeployment</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">tracer</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">otel</span><span class="p">.</span><span class="nx">Tracer</span><span class="p">(</span><span class="s">&quot;argocd&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">span</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">tracer</span><span class="p">.</span><span class="nx">Start</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;process-deployment&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">trace</span><span class="p">.</span><span class="nx">WithAttributes</span><span class="p">(</span>
<span class="w">            </span><span class="nx">attribute</span><span class="p">.</span><span class="nx">String</span><span class="p">(</span><span class="s">&quot;app.name&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">app</span><span class="p">),</span>
<span class="w">            </span><span class="nx">attribute</span><span class="p">.</span><span class="nx">String</span><span class="p">(</span><span class="s">&quot;namespace&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="p">),</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">span</span><span class="p">.</span><span class="nx">End</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// Business logic here</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">syncApplication</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">app</span><span class="p">);</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">span</span><span class="p">.</span><span class="nx">RecordError</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">        </span><span class="nx">span</span><span class="p">.</span><span class="nx">SetStatus</span><span class="p">(</span><span class="nx">codes</span><span class="p">.</span><span class="nx">Error</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">.</span><span class="nx">Error</span><span class="p">())</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">err</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="opentelemetry-collector-configuration">OpenTelemetry Collector Configuration</h3>
<p><strong>DaemonSet Deployment</strong> (for application traces):
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otel-collector-config</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-observability</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">config.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">receivers:</span>
<span class="w">      </span><span class="no">otlp:</span>
<span class="w">        </span><span class="no">protocols:</span>
<span class="w">          </span><span class="no">grpc:</span>
<span class="w">            </span><span class="no">endpoint: 0.0.0.0:4317</span>
<span class="w">          </span><span class="no">http:</span>
<span class="w">            </span><span class="no">endpoint: 0.0.0.0:4318</span>

<span class="w">    </span><span class="no">processors:</span>
<span class="w">      </span><span class="no">batch:</span>
<span class="w">        </span><span class="no">timeout: 10s</span>
<span class="w">        </span><span class="no">send_batch_size: 1024</span>

<span class="w">      </span><span class="no"># Tail-based sampling - keep all errors, sample successes</span>
<span class="w">      </span><span class="no">tail_sampling:</span>
<span class="w">        </span><span class="no">decision_wait: 10s</span>
<span class="w">        </span><span class="no">num_traces: 100</span>
<span class="w">        </span><span class="no">expected_new_traces_per_sec: 10</span>
<span class="w">        </span><span class="no">policies:</span>
<span class="w">          </span><span class="no">- name: errors</span>
<span class="w">            </span><span class="no">type: status_code</span>
<span class="w">            </span><span class="no">status_code: {status_codes: [ERROR]}</span>
<span class="w">          </span><span class="no">- name: slow-requests</span>
<span class="w">            </span><span class="no">type: latency</span>
<span class="w">            </span><span class="no">latency: {threshold_ms: 1000}</span>
<span class="w">          </span><span class="no">- name: probabilistic-sampling</span>
<span class="w">            </span><span class="no">type: probabilistic</span>
<span class="w">            </span><span class="no">probabilistic: {sampling_percentage: 10}</span>

<span class="w">      </span><span class="no"># Add Kubernetes metadata</span>
<span class="w">      </span><span class="no">k8sattributes:</span>
<span class="w">        </span><span class="no">auth_type: &quot;serviceAccount&quot;</span>
<span class="w">        </span><span class="no">passthrough: false</span>
<span class="w">        </span><span class="no">extract:</span>
<span class="w">          </span><span class="no">metadata:</span>
<span class="w">            </span><span class="no">- k8s.pod.name</span>
<span class="w">            </span><span class="no">- k8s.pod.uid</span>
<span class="w">            </span><span class="no">- k8s.deployment.name</span>
<span class="w">            </span><span class="no">- k8s.namespace.name</span>
<span class="w">            </span><span class="no">- k8s.node.name</span>

<span class="w">      </span><span class="no"># Scrub sensitive data</span>
<span class="w">      </span><span class="no">attributes:</span>
<span class="w">        </span><span class="no">actions:</span>
<span class="w">          </span><span class="no">- key: http.request.header.authorization</span>
<span class="w">            </span><span class="no">action: delete</span>
<span class="w">          </span><span class="no">- key: http.request.header.cookie</span>
<span class="w">            </span><span class="no">action: delete</span>
<span class="w">          </span><span class="no">- key: db.statement</span>
<span class="w">            </span><span class="no">action: hash</span>

<span class="w">    </span><span class="no">exporters:</span>
<span class="w">      </span><span class="no">otlp:</span>
<span class="w">        </span><span class="no">endpoint: tempo:4317</span>
<span class="w">        </span><span class="no">tls:</span>
<span class="w">          </span><span class="no">insecure: true</span>

<span class="w">      </span><span class="no"># Also export to Prometheus for exemplars</span>
<span class="w">      </span><span class="no">prometheus:</span>
<span class="w">        </span><span class="no">endpoint: 0.0.0.0:8889</span>

<span class="w">    </span><span class="no">service:</span>
<span class="w">      </span><span class="no">pipelines:</span>
<span class="w">        </span><span class="no">traces:</span>
<span class="w">          </span><span class="no">receivers: [otlp]</span>
<span class="w">          </span><span class="no">processors: [k8sattributes, tail_sampling, attributes, batch]</span>
<span class="w">          </span><span class="no">exporters: [otlp]</span>

<span class="w">        </span><span class="no">metrics:</span>
<span class="w">          </span><span class="no">receivers: [otlp]</span>
<span class="w">          </span><span class="no">processors: [batch]</span>
<span class="w">          </span><span class="no">exporters: [prometheus]</span>
</code></pre></div></p>
<h3 id="grafana-tempo-configuration">Grafana Tempo Configuration</h3>
<p><strong>Deployment Manifest</strong>:
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tempo-config</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-observability</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">tempo.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">server:</span>
<span class="w">      </span><span class="no">http_listen_port: 3200</span>

<span class="w">    </span><span class="no">distributor:</span>
<span class="w">      </span><span class="no">receivers:</span>
<span class="w">        </span><span class="no">otlp:</span>
<span class="w">          </span><span class="no">protocols:</span>
<span class="w">            </span><span class="no">grpc:</span>
<span class="w">              </span><span class="no">endpoint: 0.0.0.0:4317</span>
<span class="w">            </span><span class="no">http:</span>
<span class="w">              </span><span class="no">endpoint: 0.0.0.0:4318</span>

<span class="w">    </span><span class="no">ingester:</span>
<span class="w">      </span><span class="no">trace_idle_period: 10s</span>
<span class="w">      </span><span class="no">max_block_bytes: 1_000_000</span>
<span class="w">      </span><span class="no">max_block_duration: 5m</span>

<span class="w">    </span><span class="no">compactor:</span>
<span class="w">      </span><span class="no">compaction:</span>
<span class="w">        </span><span class="no">block_retention: 168h  # 7 days</span>

<span class="w">    </span><span class="no">storage:</span>
<span class="w">      </span><span class="no">trace:</span>
<span class="w">        </span><span class="no">backend: s3</span>
<span class="w">        </span><span class="no">s3:</span>
<span class="w">          </span><span class="no">bucket: fawkes-tempo-traces</span>
<span class="w">          </span><span class="no">endpoint: s3.amazonaws.com</span>
<span class="w">          </span><span class="no">region: us-east-1</span>
<span class="w">        </span><span class="no">wal:</span>
<span class="w">          </span><span class="no">path: /var/tempo/wal</span>
<span class="w">        </span><span class="no">pool:</span>
<span class="w">          </span><span class="no">max_workers: 100</span>
<span class="w">          </span><span class="no">queue_depth: 10000</span>

<span class="w">    </span><span class="no">overrides:</span>
<span class="w">      </span><span class="no">defaults:</span>
<span class="w">        </span><span class="no">metrics_generator:</span>
<span class="w">          </span><span class="no">processors: [service-graphs, span-metrics]</span>
<span class="w">          </span><span class="no">storage:</span>
<span class="w">            </span><span class="no">path: /var/tempo/generator/wal</span>
<span class="w">            </span><span class="no">remote_write:</span>
<span class="w">              </span><span class="no">- url: http://prometheus:9090/api/v1/write</span>
<span class="w">                </span><span class="no">send_exemplars: true</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tempo</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fawkes-observability</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">serviceName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tempo</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tempo</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tempo</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tempo</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">grafana/tempo:latest</span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-config.file=/etc/tempo/tempo.yaml</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3200</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4317</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otlp-grpc</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4318</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otlp-http</span>
<span class="w">        </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">config</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/tempo</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">storage</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/tempo</span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">          </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500m</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1Gi</span>
<span class="w">          </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2000m</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4Gi</span>
<span class="w">      </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">config</span>
<span class="w">        </span><span class="nt">configMap</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tempo-config</span>
<span class="w">  </span><span class="nt">volumeClaimTemplates</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">storage</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">accessModes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;ReadWriteOnce&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">          </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100Gi</span>
</code></pre></div></p>
<h3 id="trace-correlation-with-logs">Trace Correlation with Logs</h3>
<p><strong>Log Entry with Trace Context</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-07T10:30:45Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ERROR&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Failed to sync application&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;argocd&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;trace_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4bf92f3577b34da6a3ce929d0e0e4736&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;span_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;00f067aa0ba902b7&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;trace_flags&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;production&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;app_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;payment-service&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Loki Configuration for Trace Correlation</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Grafana data source configuration</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">datasources</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Loki</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">loki</span>
<span class="w">    </span><span class="nt">uid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">loki</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://loki:3100</span>
<span class="w">    </span><span class="nt">jsonData</span><span class="p">:</span>
<span class="w">      </span><span class="nt">derivedFields</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">datasourceUid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tempo</span>
<span class="w">          </span><span class="nt">matcherRegex</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;trace_id=(\\w+)&quot;</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TraceID</span>
<span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$${__value.raw}&quot;</span>
</code></pre></div></p>
<h3 id="grafana-dashboard-configuration">Grafana Dashboard Configuration</h3>
<p><strong>Service Dependency Graph</strong>:
- Automatically generated from trace data
- Shows request flow between services
- Color-coded by error rate
- Size proportional to request volume</p>
<p><strong>TraceQL Queries</strong>:</p>
<p><strong>Find slow database queries</strong>:
<div class="highlight"><pre><span></span><code>{span.db.system=&quot;postgresql&quot; &amp;&amp; duration &gt; 1s}
</code></pre></div></p>
<p><strong>Find all traces with errors in production</strong>:
<div class="highlight"><pre><span></span><code>{status=error &amp;&amp; resource.namespace=&quot;production&quot;}
</code></pre></div></p>
<p><strong>Find traces for specific user</strong>:
<div class="highlight"><pre><span></span><code>{resource.service.name=&quot;backstage&quot; &amp;&amp; span.http.route=&quot;/api/catalog/*&quot; &amp;&amp; trace.user.id=&quot;alice@example.com&quot;}
</code></pre></div></p>
<p><strong>Deployment trace (commit to production)</strong>:
<div class="highlight"><pre><span></span><code>{resource.service.name=&quot;jenkins&quot; || resource.service.name=&quot;argocd&quot;} 
  | {span.git.commit.sha=&quot;abc123def&quot;}
</code></pre></div></p>
<h3 id="sampling-strategies">Sampling Strategies</h3>
<p><strong>Head-Based Sampling</strong> (at application):
- 100% of errors
- 100% of requests &gt; 1 second
- 10% of successful requests &lt; 1 second</p>
<p><strong>Tail-Based Sampling</strong> (at collector):
- Keep all traces with errors
- Keep all traces with latency &gt; P95
- Keep traces matching specific criteria (user ID, request path)
- Sample remaining traces at 10%</p>
<p><strong>Cost Optimization</strong>:
- Production: 10% sampling  ~50GB/day traces
- Staging: 50% sampling  ~20GB/day traces
- Development: 100% sampling  ~5GB/day traces</p>
<h3 id="dora-metrics-integration">DORA Metrics Integration</h3>
<p><strong>Lead Time for Changes Tracing</strong>:
1. Git commit event  creates trace context
2. Jenkins build  child span with commit SHA
3. Docker build  child span with image tag
4. Harbor push  child span with artifact metadata
5. ArgoCD sync  child span with deployment details
6. Application start  final span with health check</p>
<p><strong>Query to calculate lead time</strong>:
<div class="highlight"><pre><span></span><code>{span.git.commit.sha=&quot;abc123&quot;} 
  | {span.name=&quot;deploy-to-production&quot;}
</code></pre></div></p>
<p><strong>Change Failure Rate</strong>:
- Trace deployments with <code>deployment.status=failed</code>
- Correlate with application error traces
- Generate failure rate dashboard</p>
<p><strong>Mean Time to Recovery</strong>:
- Incident start  trace ID in alert
- Trace investigation  linked troubleshooting actions
- Incident resolution  final span
- Calculate MTTR from trace duration</p>
<h3 id="security-privacy">Security &amp; Privacy</h3>
<p><strong>Sensitive Data Scrubbing</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># OpenTelemetry Collector processor</span>
<span class="nt">processors</span><span class="p">:</span>
<span class="w">  </span><span class="nt">attributes</span><span class="p">:</span>
<span class="w">    </span><span class="nt">actions</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Remove authorization headers</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http.request.header.authorization</span>
<span class="w">        </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delete</span>

<span class="w">      </span><span class="c1"># Hash SQL statements (preserve structure, hide values)</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db.statement</span>
<span class="w">        </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hash</span>

<span class="w">      </span><span class="c1"># Redact email addresses</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user.email</span>
<span class="w">        </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">update</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;REDACTED&quot;</span>

<span class="w">      </span><span class="c1"># Remove credit card numbers from URLs</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http.url</span>
<span class="w">        </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">update</span>
<span class="w">        </span><span class="nt">from_attribute</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http.url</span>
<span class="w">        </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;\d{4}-\d{4}-\d{4}-\d{4}&#39;</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;XXXX-XXXX-XXXX-XXXX&#39;</span>
</code></pre></div></p>
<p><strong>Access Control</strong>:
- Grafana RBAC for trace viewing
- Namespace-based trace isolation
- Tempo multi-tenancy (tenant ID from namespace)</p>
<h3 id="performance-impact">Performance Impact</h3>
<p><strong>Benchmarks</strong> (per-service overhead):
- <strong>CPU</strong>: 2-5% increase
- <strong>Memory</strong>: 50-100MB increase
- <strong>Network</strong>: ~1KB per span (compressed)
- <strong>Latency</strong>: &lt;1ms per instrumented operation</p>
<p><strong>Production Optimizations</strong>:
- Use tail-based sampling
- Batch span exports (10s intervals)
- Compress spans before export
- Use gRPC for OTLP (more efficient than HTTP)</p>
<h2 id="consequences">Consequences</h2>
<h3 id="positive">Positive</h3>
<ol>
<li><strong>Root Cause Analysis</strong>: Quickly identify bottlenecks across distributed services</li>
<li><strong>Performance Optimization</strong>: Data-driven latency improvements</li>
<li><strong>Dependency Visualization</strong>: Automatic service dependency mapping</li>
<li><strong>Error Attribution</strong>: Precise identification of failing services</li>
<li><strong>DORA Metrics</strong>: End-to-end deployment pipeline visibility</li>
<li><strong>Cross-Team Collaboration</strong>: Shared visibility into request flows</li>
<li><strong>Unified Observability</strong>: Traces linked to metrics and logs</li>
<li><strong>Cost-Effective</strong>: Tempo uses object storage (~$10/TB/month vs. $100+ for commercial solutions)</li>
<li><strong>Vendor-Neutral</strong>: OpenTelemetry standard, not locked to Tempo</li>
<li><strong>Learning-Friendly</strong>: Clear visualization helps dojo learners understand distributed systems</li>
</ol>
<h3 id="negative">Negative</h3>
<ol>
<li><strong>Learning Curve</strong>: Teams must understand tracing concepts and instrumentation</li>
<li><strong>Storage Costs</strong>: Trace data requires significant storage (~50GB/day for production)</li>
<li><strong>Instrumentation Effort</strong>: Applications require SDK integration</li>
<li><strong>Sampling Complexity</strong>: Tail-based sampling configuration requires tuning</li>
<li><strong>Performance Overhead</strong>: 2-5% CPU overhead per service</li>
<li><strong>Cardinality Challenges</strong>: High-cardinality attributes can degrade performance</li>
</ol>
<h3 id="neutral">Neutral</h3>
<ol>
<li><strong>Tempo Maturity</strong>: Tempo is newer than Jaeger/Zipkin but rapidly maturing</li>
<li><strong>TraceQL Learning</strong>: New query language to learn (though similar to LogQL/PromQL)</li>
<li><strong>Object Storage Dependency</strong>: Requires S3-compatible storage</li>
</ol>
<h2 id="alternatives-considered">Alternatives Considered</h2>
<h3 id="alternative-1-jaeger">Alternative 1: Jaeger</h3>
<p><strong>Pros</strong>:
- CNCF graduated project, very mature
- Excellent UI with service dependency graphs
- Strong community and documentation
- Battle-tested in production
- Built-in sampling strategies
- Supports multiple storage backends (Cassandra, Elasticsearch, Badger)</p>
<p><strong>Cons</strong>:
- Higher operational complexity (requires Elasticsearch or Cassandra for scale)
- Higher storage costs (~5x more than Tempo for equivalent data)
- Less integration with Grafana (requires separate UI)
- No native metrics generation from traces
- Elasticsearch/Cassandra adds infrastructure overhead</p>
<p><strong>Reason for Rejection</strong>: Operational complexity and storage costs. Tempo's integration with Grafana provides unified observability, and object storage backend is significantly cheaper than Elasticsearch. Jaeger's maturity is valuable, but Tempo's simplicity better suits Fawkes' goals.</p>
<h3 id="alternative-2-zipkin">Alternative 2: Zipkin</h3>
<p><strong>Pros</strong>:
- Original distributed tracing system, very mature
- Simple architecture, easy to deploy
- Low resource requirements
- Multiple language SDK support
- Compatible with OpenTelemetry</p>
<p><strong>Cons</strong>:
- Less feature-rich than modern alternatives
- No native Grafana integration
- Limited query capabilities
- In-memory storage default (poor retention)
- Requires Elasticsearch for production (added complexity)
- Smaller active community compared to CNCF projects</p>
<p><strong>Reason for Rejection</strong>: While simple, Zipkin lacks modern features like TraceQL queries, Grafana integration, and metrics generation. Tempo provides better long-term value with similar deployment simplicity.</p>
<h3 id="alternative-3-aws-x-ray">Alternative 3: AWS X-Ray</h3>
<p><strong>Pros</strong>:
- Fully managed service (no infrastructure to maintain)
- Native AWS integration (Lambda, ECS, EC2)
- Automatic instrumentation for AWS services
- Low operational overhead
- Pay-per-use pricing</p>
<p><strong>Cons</strong>:
- <strong>Cloud vendor lock-in</strong> (AWS only)
- No multi-cloud support
- Limited customization
- Higher costs at scale (~$5/million traces)
- Cannot run on-premises or in dojo labs
- Separate UI from other observability tools</p>
<p><strong>Reason for Rejection</strong>: Violates Fawkes' cloud-agnostic principle. Learners need portable skills, not cloud-specific tools. X-Ray's managed benefits don't outweigh lock-in costs.</p>
<h3 id="alternative-4-elastic-apm">Alternative 4: Elastic APM</h3>
<p><strong>Pros</strong>:
- Integrated with Elastic Stack (logs, metrics, traces in one UI)
- Excellent UI and visualization
- Strong Java and Node.js support
- Machine learning for anomaly detection
- Good documentation</p>
<p><strong>Cons</strong>:
- Requires Elasticsearch cluster (high resource usage)
- Complex scaling and tuning
- Higher costs (compute + storage)
- OpenTelemetry support is secondary (Elastic APM agents preferred)
- Not CNCF/vendor-neutral</p>
<p><strong>Reason for Rejection</strong>: Elasticsearch operational complexity and costs. Fawkes already uses Grafana for visualization, so Elastic APM adds redundancy. Tempo + Grafana provides equivalent value with lower operational burden.</p>
<h3 id="alternative-5-lightstep-honeycomb-datadog-apm-commercial-saas">Alternative 5: Lightstep / Honeycomb / Datadog APM (Commercial SaaS)</h3>
<p><strong>Pros</strong>:
- Best-in-class UX and query capabilities
- Advanced sampling and trace analysis
- Fully managed (zero operational burden)
- Superior support and documentation
- Advanced features (BubbleUp, trace comparison, service catalog)</p>
<p><strong>Cons</strong>:
- <strong>Very high costs</strong> ($100-500/month per host)
- SaaS-only (not self-hosted)
- Data sent to third-party
- Cannot use in air-gapped or on-premises environments
- Not suitable for learner environments (cost prohibitive)</p>
<p><strong>Reason for Rejection</strong>: Cost prohibitive for open-source platform. Learners cannot use these tools without organization sponsorship. Self-hosted Tempo provides 90% of functionality at 5% of cost.</p>
<h3 id="alternative-6-no-distributed-tracing-logs-metrics-only">Alternative 6: No Distributed Tracing (Logs + Metrics Only)</h3>
<p><strong>Pros</strong>:
- Lower complexity
- Smaller operational footprint
- Existing tools (Loki, Prometheus) sufficient
- No additional instrumentation required</p>
<p><strong>Cons</strong>:
- <strong>Cannot trace requests across services</strong> (critical gap)
- Debugging distributed systems is extremely difficult
- No service dependency visualization
- Cannot calculate accurate DORA lead time metrics
- Poor learner experience (can't see end-to-end flows)</p>
<p><strong>Reason for Rejection</strong>: Distributed tracing is essential for modern microservices platforms. DORA State of DevOps research shows observability (including tracing) strongly correlates with elite performance. Omitting tracing would cripple platform effectiveness.</p>
<h2 id="implementation-plan">Implementation Plan</h2>
<h3 id="phase-1-foundation-week-6-days-1-2">Phase 1: Foundation (Week 6, Days 1-2)</h3>
<p><strong>Day 1: OpenTelemetry Collector Deployment</strong> [4 hours]
1. Deploy OpenTelemetry Collector as DaemonSet
2. Configure OTLP receivers (gRPC + HTTP)
3. Set up batch and tail-sampling processors
4. Test with sample trace data
5. Verify Prometheus metrics export</p>
<p><strong>Day 2: Grafana Tempo Deployment</strong> [4 hours]
1. Deploy Tempo StatefulSet (3 replicas)
2. Configure S3/MinIO backend storage
3. Set up retention policies
4. Configure Grafana data source
5. Test trace ingestion and querying</p>
<h3 id="phase-2-platform-service-instrumentation-week-6-days-3-5">Phase 2: Platform Service Instrumentation (Week 6, Days 3-5)</h3>
<p><strong>Day 3: Backstage Tracing</strong> [3 hours]
1. Add OpenTelemetry Node.js SDK to Backstage
2. Configure auto-instrumentation
3. Test trace collection for catalog API calls
4. Add custom spans for plugin operations
5. Verify Grafana visualization</p>
<p><strong>Day 4: Jenkins &amp; ArgoCD Tracing</strong> [4 hours]
1. Jenkins: Add OpenTelemetry Java agent to JVM
2. Configure trace export for pipeline execution
3. ArgoCD: Manual Go instrumentation for sync operations
4. Test deployment trace (Jenkins  ArgoCD)
5. Create Grafana dashboard for CI/CD traces</p>
<p><strong>Day 5: Ingress &amp; Database Tracing</strong> [3 hours]
1. NGINX Ingress: Configure trace propagation headers
2. PostgreSQL: Add pg_stat_statements for query tracing
3. Test end-to-end trace (User  NGINX  Backstage  PostgreSQL)
4. Validate trace-to-log correlation</p>
<h3 id="phase-3-application-instrumentation-templates-week-7-days-1-2">Phase 3: Application Instrumentation Templates (Week 7, Days 1-2)</h3>
<p><strong>Day 1: Create Language-Specific Templates</strong> [4 hours]
1. Java Spring Boot template with OTel auto-instrumentation
2. Python FastAPI template with OTel SDK
3. Node.js Express template with OTel SDK
4. Go template with manual instrumentation
5. Document instrumentation patterns</p>
<p><strong>Day 2: Golden Path Integration</strong> [4 hours]
1. Update Backstage templates with OTel dependencies
2. Add Dockerfile entries for OTel agents
3. Update Helm charts with OTel environment variables
4. Create CI/CD pipeline checks for instrumentation
5. Test end-to-end application deployment with tracing</p>
<h3 id="phase-4-observability-integration-week-7-days-3-5">Phase 4: Observability Integration (Week 7, Days 3-5)</h3>
<p><strong>Day 3: Trace-to-Metrics Integration</strong> [3 hours]
1. Configure Tempo metrics generator
2. Send exemplars to Prometheus
3. Create Grafana dashboard linking metrics to traces
4. Add "View Trace" links from Prometheus alerts</p>
<p><strong>Day 4: Trace-to-Logs Integration</strong> [3 hours]
1. Configure Loki derived fields for trace IDs
2. Update application logging to include trace context
3. Test correlation (click trace ID in logs  opens trace in Tempo)
4. Create unified dashboard with logs + traces</p>
<p><strong>Day 5: DORA Metrics Tracing</strong> [4 hours]
1. Instrument deployment pipeline with trace context
2. Track commit SHA through build  deploy  release
3. Calculate lead time from traces
4. Create DORA dashboard with trace links</p>
<h3 id="phase-5-performance-optimization-week-8-days-1-2">Phase 5: Performance &amp; Optimization (Week 8, Days 1-2)</h3>
<p><strong>Day 1: Sampling Optimization</strong> [3 hours]
1. Analyze trace volumes and costs
2. Tune tail-based sampling policies
3. Implement adaptive sampling based on load
4. Verify sample representativeness
5. Document sampling strategies</p>
<p><strong>Day 2: Performance Testing</strong> [3 hours]
1. Load test with tracing enabled (measure overhead)
2. Benchmark trace ingestion rates
3. Test Tempo query performance
4. Optimize collector configurations
5. Document performance baseline</p>
<h3 id="phase-6-documentation-training-week-8-days-3-5">Phase 6: Documentation &amp; Training (Week 8, Days 3-5)</h3>
<p><strong>Day 3: Platform Documentation</strong> [4 hours]
1. Architecture overview with data flow diagrams
2. Instrumentation guide for each language
3. TraceQL query examples and cookbook
4. Troubleshooting guide
5. Runbook for Tempo operations</p>
<p><strong>Day 4: Dojo Module - Brown Belt</strong> [4 hours]
1. Module: "Distributed Tracing for Microservices"
2. Theory: Trace context, spans, sampling
3. Hands-on lab: Instrument sample app, query traces
4. Troubleshooting exercise: Debug slow request
5. Assessment quiz on tracing concepts</p>
<p><strong>Day 5: Dashboard &amp; Playbooks</strong> [4 hours]
1. Create standard Grafana dashboards:
   - Service dependency graph
   - Request latency heatmap
   - Error rate by service
   - Deployment trace timeline
2. Create troubleshooting playbooks
3. Document common trace patterns
4. Create video walkthrough (15 minutes)</p>
<h2 id="dojo-integration">Dojo Integration</h2>
<h3 id="brown-belt-module-6-distributed-tracing-request-flow-analysis">Brown Belt - Module 6: "Distributed Tracing &amp; Request Flow Analysis"</h3>
<p><strong>Learning Objectives</strong>:
- Understand distributed tracing concepts (spans, traces, context propagation)
- Implement OpenTelemetry instrumentation in applications
- Query traces using TraceQL
- Correlate traces with metrics and logs
- Debug performance issues using distributed tracing
- Calculate DORA lead time metrics from traces</p>
<p><strong>Hands-On Lab</strong> (90 minutes):</p>
<p><strong>Part 1: Instrument a Microservice</strong> (30 min)
1. Deploy sample 3-tier app (frontend  API  database)
2. Add OpenTelemetry SDK to each service
3. Configure trace export to Tempo
4. Generate traffic and view traces in Grafana
5. Observe request flow across services</p>
<p><strong>Part 2: Advanced Querying</strong> (30 min)
1. Write TraceQL queries to find:
   - Slow database queries
   - Requests with errors
   - Specific user journeys
   - Deployment traces
2. Create custom Grafana dashboard
3. Set up trace-based alerts</p>
<p><strong>Part 3: Troubleshooting Exercise</strong> (30 min)
- <strong>Scenario</strong>: Application experiencing intermittent slowness
- <strong>Task</strong>: Use traces to identify:
  - Which service is the bottleneck
  - Slow database queries
  - External API latency
  - Network issues
- <strong>Deliverable</strong>: Root cause analysis report with trace evidence</p>
<p><strong>Assessment</strong>:
- Quiz: 10 questions on tracing concepts
- Practical: Instrument new service and create dashboard
- Troubleshooting: Debug broken trace (missing context propagation)</p>
<p><strong>Time</strong>: 2 hours (30 min theory + 90 min hands-on + assessment)</p>
<h2 id="monitoring-observability">Monitoring &amp; Observability</h2>
<h3 id="tempo-health-metrics">Tempo Health Metrics</h3>
<p><strong>Key Metrics to Monitor</strong>:
- <code>tempo_ingester_bytes_received_total</code> - Trace ingestion rate
- <code>tempo_ingester_blocks_flushed_total</code> - Block flush rate
- <code>tempo_query_frontend_result_metrics_inspected_bytes</code> - Query performance
- <code>tempo_distributor_spans_received_total</code> - Span reception rate
- <code>tempo_compactor_blocks_compacted_total</code> - Compaction health</p>
<p><strong>Grafana Dashboard</strong>: "Tempo Operations"
- Ingestion rate by tenant
- Query latency (P50, P95, P99)
- Storage usage and growth
- Compaction lag
- Error rates</p>
<p><strong>Alerting Rules</strong>:
<div class="highlight"><pre><span></span><code><span class="nt">groups</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tempo_alerts</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TempoHighIngestionErrors</span>
<span class="w">    </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rate(tempo_distributor_spans_received_total{status=&quot;error&quot;}[5m]) &gt; 100</span>
<span class="w">    </span><span class="nt">for</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10m</span>
<span class="w">    </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">      </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;High</span><span class="nv"> </span><span class="s">trace</span><span class="nv"> </span><span class="s">ingestion</span><span class="nv"> </span><span class="s">error</span><span class="nv"> </span><span class="s">rate&quot;</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TempoHighQueryLatency</span>
<span class="w">    </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">histogram_quantile(0.95, tempo_query_frontend_duration_seconds_bucket) &gt; 10</span>
<span class="w">    </span><span class="nt">for</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5m</span>
<span class="w">    </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">      </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Tempo</span><span class="nv"> </span><span class="s">query</span><span class="nv"> </span><span class="s">latency</span><span class="nv"> </span><span class="s">P95</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">10s&quot;</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TempoStorageUsageHigh</span>
<span class="w">    </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tempo_ingester_bytes_metric_total &gt; 100e9</span><span class="w">  </span><span class="c1"># 100GB</span>
<span class="w">    </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">      </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Tempo</span><span class="nv"> </span><span class="s">ingester</span><span class="nv"> </span><span class="s">storage</span><span class="nv"> </span><span class="s">usage</span><span class="nv"> </span><span class="s">high&quot;</span>
</code></pre></div></p>
<h3 id="opentelemetry-collector-health">OpenTelemetry Collector Health</h3>
<p><strong>Key Metrics</strong>:
- <code>otelcol_receiver_accepted_spans</code> - Spans received
- <code>otelcol_receiver_refused_spans</code> - Spans refused (backpressure)
- <code>otelcol_processor_batch_batch_send_size</code> - Batch sizes
- <code>otelcol_exporter_sent_spans</code> - Spans successfully exported
- <code>otelcol_exporter_send_failed_spans</code> - Export failures</p>
<p><strong>Dashboard</strong>: "OpenTelemetry Collector Health"
- Span throughput (in/out)
- Processor queue depth
- Export success/failure rates
- Memory usage by component</p>
<h2 id="security-considerations">Security Considerations</h2>
<h3 id="data-privacy">Data Privacy</h3>
<p><strong>Sensitive Data Scrubbing</strong>:
- Remove authorization headers
- Hash SQL statements
- Redact PII from URLs and headers
- Obfuscate API keys in trace attributes</p>
<p><strong>Access Control</strong>:
- Grafana RBAC for trace viewing
- Namespace-based trace isolation (teams only see their traces)
- Audit logging for trace access</p>
<h3 id="compliance">Compliance</h3>
<p><strong>Data Retention</strong>:
- 7 days detailed traces (compliance with GDPR "right to be forgotten")
- 30 days sampled traces
- Automated deletion after retention period</p>
<p><strong>Encryption</strong>:
- TLS for all trace transmission (OTLP over gRPC/HTTPS)
- S3 server-side encryption for stored traces
- No plaintext credentials in trace attributes</p>
<h2 id="cost-analysis">Cost Analysis</h2>
<h3 id="storage-costs-production">Storage Costs (Production)</h3>
<p><strong>Assumptions</strong>:
- 100 services generating traces
- 1,000 requests/second average
- 10 spans per trace average
- 10% sampling rate (tail-based)
- ~1KB per span (compressed)</p>
<p><strong>Daily Trace Volume</strong>:
- Raw spans: 100 services  1,000 req/s  10 spans  86,400 s = 86.4 billion spans/day
- After sampling: 8.64 billion spans/day
- Storage: 8.64B spans  1KB = 8.64 TB/day (before compression)
- After compression (10:1): ~864 GB/day</p>
<p><strong>Monthly Storage (7-day retention)</strong>:
- 864 GB/day  7 days = 6 TB active storage
- S3 Standard: $0.023/GB = $138/month
- S3 Intelligent-Tiering (after 7 days): $0.0125/GB = $75/month</p>
<p><strong>Total Monthly Cost</strong>: ~$213/month (vs. $5,000+/month for commercial APM at 100 services)</p>
<p><strong>Cost Optimization</strong>:
- Increase sampling rate in non-production (less cost-sensitive)
- Use S3 Lifecycle policies to move old traces to Glacier
- Tune tail-based sampling to focus on valuable traces
- Compress spans aggressively (Snappy  LZ4)</p>
<h3 id="infrastructure-costs">Infrastructure Costs</h3>
<p><strong>Tempo Pods</strong>:
- 3 replicas  2 CPU  $0.04/CPU/hour = $5.76/day = $173/month
- 3 replicas  4GB RAM  $0.005/GB/hour = $1.44/day = $43/month</p>
<p><strong>OpenTelemetry Collector</strong>:
- DaemonSet (1 per node, 10 nodes): 10  0.1 CPU  $0.04 = $0.96/day = $29/month
- DaemonSet memory: 10  128MB  $0.005/GB/hour = negligible</p>
<p><strong>Total Infrastructure</strong>: ~$245/month</p>
<p><strong>Grand Total</strong>: ~$458/month for distributed tracing (100 services, production scale)</p>
<h2 id="documentation-structure">Documentation Structure</h2>
<h3 id="for-platform-teams">For Platform Teams</h3>
<ol>
<li><strong>Architecture &amp; Design</strong></li>
<li>Trace collection flow</li>
<li>Sampling strategies explained</li>
<li>Storage architecture (S3 layout)</li>
<li>
<p>Query performance optimization</p>
</li>
<li>
<p><strong>Deployment Guide</strong></p>
</li>
<li>Helm chart installation (Tempo, OTel Collector)</li>
<li>Cloud-specific configurations (AWS, Azure, GCP)</li>
<li>Scaling guidelines</li>
<li>
<p>Backup and disaster recovery</p>
</li>
<li>
<p><strong>Operations Runbook</strong></p>
</li>
<li>Common troubleshooting scenarios</li>
<li>Tempo upgrade procedures</li>
<li>Storage management (compaction, cleanup)</li>
<li>Performance tuning guide</li>
</ol>
<h3 id="for-application-teams">For Application Teams</h3>
<ol>
<li><strong>Instrumentation Guide</strong></li>
<li>Language-specific SDKs (Java, Python, Node.js, Go)</li>
<li>Auto vs. manual instrumentation</li>
<li>Custom span creation</li>
<li>
<p>Best practices (span naming, attributes)</p>
</li>
<li>
<p><strong>Querying &amp; Troubleshooting</strong></p>
</li>
<li>TraceQL query cookbook</li>
<li>Common debugging patterns</li>
<li>Grafana dashboard usage</li>
<li>
<p>Trace-to-logs/metrics correlation</p>
</li>
<li>
<p><strong>Performance Impact</strong></p>
</li>
<li>Overhead benchmarks</li>
<li>Sampling recommendations</li>
<li>Optimization techniques</li>
</ol>
<h3 id="for-dojo-learners">For Dojo Learners</h3>
<ol>
<li><strong>Concepts Tutorial</strong></li>
<li>What is distributed tracing?</li>
<li>Spans, traces, and context propagation</li>
<li>When to use tracing vs. logs/metrics</li>
<li>
<p>Real-world use cases</p>
</li>
<li>
<p><strong>Hands-On Labs</strong></p>
</li>
<li>Lab 1: Instrument a simple app</li>
<li>Lab 2: Query traces with TraceQL</li>
<li>Lab 3: Debug performance issue</li>
<li>
<p>Lab 4: Trace a deployment pipeline</p>
</li>
<li>
<p><strong>Reference Materials</strong></p>
</li>
<li>OpenTelemetry SDK quick reference</li>
<li>TraceQL cheat sheet</li>
<li>Common trace patterns</li>
<li>Troubleshooting decision tree</li>
</ol>
<h2 id="related-decisions">Related Decisions</h2>
<ul>
<li><strong>ADR-011</strong>: Centralized Log Management (Loki) - Trace-to-log correlation via trace IDs</li>
<li><strong>ADR-012</strong>: Metrics Monitoring (Prometheus/Grafana) - Exemplars link metrics to traces</li>
<li><strong>ADR-002</strong>: Backstage for Developer Portal - Primary UI instrumentation</li>
<li><strong>ADR-004</strong>: Jenkins for CI/CD - Pipeline trace instrumentation</li>
<li><strong>ADR-003</strong>: ArgoCD for GitOps - Deployment trace instrumentation</li>
<li><strong>Future ADR</strong>: Service Mesh (Istio) - Alternative instrumentation via sidecar proxies</li>
</ul>
<h2 id="references">References</h2>
<ul>
<li>OpenTelemetry Documentation: https://opentelemetry.io/docs/</li>
<li>Grafana Tempo Documentation: https://grafana.com/docs/tempo/</li>
<li>TraceQL Language Reference: https://grafana.com/docs/tempo/latest/traceql/</li>
<li>CNCF Distributed Tracing Best Practices: https://github.com/cncf/tag-observability</li>
<li>Distributed Tracing Patterns (book) by Austin Parker</li>
<li>OpenTelemetry Best Practices: https://opentelemetry.io/docs/concepts/instrumentation/</li>
</ul>
<h2 id="notes">Notes</h2>
<p><strong>Production Readiness Checklist</strong>:
- [ ] Tempo deployed with 3+ replicas for HA
- [ ] S3/MinIO backend configured with proper retention
- [ ] OpenTelemetry Collector deployed (DaemonSet + Deployment)
- [ ] Tail-based sampling configured and tested
- [ ] Grafana data source configured with Tempo
- [ ] Trace-to-logs correlation working (Loki derived fields)
- [ ] Trace-to-metrics correlation working (Prometheus exemplars)
- [ ] Sensitive data scrubbing verified
- [ ] Performance benchmarks completed (overhead &lt; 5%)
- [ ] Monitoring dashboards created
- [ ] Alerting rules configured
- [ ] Documentation complete
- [ ] Team trained on querying and troubleshooting</p>
<p><strong>Learner Environment Considerations</strong>:
- Use in-memory Tempo backend for short-lived labs
- Pre-instrument sample applications
- Provide TraceQL query examples
- Include broken traces for troubleshooting practice
- Show real-world debugging scenarios
- Integrate with DORA metrics curriculum</p>
<p><strong>Future Enhancements</strong> (Post-MVP):
- Service mesh integration (Istio sidecar auto-instrumentation)
- Trace-based SLO monitoring
- Anomaly detection from trace patterns
- Cost attribution per service from trace data
- Automated performance recommendations
- Trace replay for testing</p>
<h2 id="last-updated">Last Updated</h2>
<p>December 7, 2024 - Initial version documenting Grafana Tempo + OpenTelemetry for distributed tracing</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>
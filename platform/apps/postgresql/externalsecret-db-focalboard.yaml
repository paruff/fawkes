# ============================================================================
# FILE: platform/apps/postgresql/externalsecret-db-focalboard.yaml
# PURPOSE: ExternalSecret to pull database credentials from secret manager
#          Use this template for production deployments with AWS Secrets Manager
#          or Azure Key Vault integration via External Secrets Operator.
# USAGE: Uncomment and configure for production environments.
# ============================================================================
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: db-focalboard-credentials
#   namespace: fawkes
#   labels:
#     app: focalboard
#     component: database
#     environment: prod
#     team: platform
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secrets-manager  # or azure-keyvault
#     kind: ClusterSecretStore
#   target:
#     name: db-focalboard-credentials
#     creationPolicy: Owner
#     template:
#       type: kubernetes.io/basic-auth
#   data:
#     - secretKey: username
#       remoteRef:
#         key: fawkes/db/focalboard
#         property: username
#     - secretKey: password
#       remoteRef:
#         key: fawkes/db/focalboard
#         property: password
# ---
# # Read-only user external secret
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: db-focalboard-readonly-credentials
#   namespace: fawkes
#   labels:
#     app: focalboard
#     component: database
#     environment: prod
#     team: platform
#     access: readonly
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secrets-manager
#     kind: ClusterSecretStore
#   target:
#     name: db-focalboard-readonly-credentials
#     creationPolicy: Owner
#     template:
#       type: kubernetes.io/basic-auth
#   data:
#     - secretKey: username
#       remoteRef:
#         key: fawkes/db/focalboard-readonly
#         property: username
#     - secretKey: password
#       remoteRef:
#         key: fawkes/db/focalboard-readonly
#         property: password

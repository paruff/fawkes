# ============================================================================
# FILE: platform/apps/postgresql/kustomization.yaml
# PURPOSE: Kustomize configuration for PostgreSQL resources
# ============================================================================
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: fawkes

resources:
  # CloudNativePG Operator (deploys to cloudnativepg-system namespace)
  - cloudnativepg-operator-application.yaml
  # Focalboard database credentials (dev/local)
  - db-focalboard-credentials.yaml
  # Focalboard PostgreSQL cluster
  - db-focalboard-cluster.yaml
  # Note: For production, uncomment externalsecret-db-focalboard.yaml
  # and comment out db-focalboard-credentials.yaml
  # - externalsecret-db-focalboard.yaml
  # SonarQube database credentials (dev/local)
  - db-sonarqube-credentials.yaml
  # SonarQube PostgreSQL cluster
  - db-sonarqube-cluster.yaml
  # Note: For production, uncomment externalsecret-db-sonarqube.yaml
  # and comment out db-sonarqube-credentials.yaml
  # - externalsecret-db-sonarqube.yaml
  # Backstage database credentials (dev/local)
  - db-backstage-credentials.yaml
  # Backstage PostgreSQL cluster
  - db-backstage-cluster.yaml
  # Note: For production, uncomment externalsecret-db-backstage.yaml
  # and comment out db-backstage-credentials.yaml
  # - externalsecret-db-backstage.yaml
  # Harbor database credentials (dev/local)
  - db-harbor-credentials.yaml
  # Harbor PostgreSQL cluster
  - db-harbor-cluster.yaml
  # Note: For production, uncomment externalsecret-db-harbor.yaml
  # and comment out db-harbor-credentials.yaml
  # - externalsecret-db-harbor.yaml
  # DataHub database credentials (dev/local)
  - db-datahub-credentials.yaml
  # DataHub PostgreSQL cluster
  - db-datahub-cluster.yaml
  # Note: For production, uncomment externalsecret-db-datahub.yaml
  # and comment out db-datahub-credentials.yaml
  # - externalsecret-db-datahub.yaml
  # Plausible database credentials (dev/local)
  - db-plausible-credentials.yaml
  # Plausible PostgreSQL cluster
  - db-plausible-cluster.yaml
  # Note: For production, uncomment externalsecret-db-plausible.yaml
  # and comment out db-plausible-credentials.yaml
  # - externalsecret-db-plausible.yaml
  # Penpot database credentials (dev/local)
  - db-penpot-credentials.yaml
  # Penpot PostgreSQL cluster
  - db-penpot-cluster.yaml
  # Note: For production, uncomment externalsecret-db-penpot.yaml
  # and comment out db-penpot-credentials.yaml
  # - externalsecret-db-penpot.yaml
  # VSM database credentials (dev/local)
  - db-vsm-credentials.yaml
  # VSM PostgreSQL cluster
  - db-vsm-cluster.yaml
  # Note: For production, uncomment externalsecret-db-vsm.yaml
  # and comment out db-vsm-credentials.yaml
  # - externalsecret-db-vsm.yaml
  # Unleash database credentials (dev/local)
  - db-unleash-credentials.yaml
  # Unleash PostgreSQL cluster
  - db-unleash-cluster.yaml
  # Note: For production, uncomment externalsecret-db-unleash.yaml
  # and comment out db-unleash-credentials.yaml
  # - externalsecret-db-unleash.yaml

labels:
  - pairs:
      app.kubernetes.io/managed-by: argocd
      app.kubernetes.io/part-of: fawkes-platform

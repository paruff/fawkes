# ============================================================================
# FILE: platform/apps/postgresql/kustomization.yaml
# PURPOSE: Kustomize configuration for PostgreSQL resources
# ============================================================================
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: fawkes

resources:
  # CloudNativePG Operator (deploys to cloudnativepg-system namespace)
  - cloudnativepg-operator-application.yaml
  # Focalboard database credentials (dev/local)
  - db-focalboard-credentials.yaml
  # Focalboard PostgreSQL cluster
  - db-focalboard-cluster.yaml
  # Note: For production, uncomment externalsecret-db-focalboard.yaml
  # and comment out db-focalboard-credentials.yaml
  # - externalsecret-db-focalboard.yaml
  # SonarQube database credentials (dev/local)
  - db-sonarqube-credentials.yaml
  # SonarQube PostgreSQL cluster
  - db-sonarqube-cluster.yaml
  # Note: For production, uncomment externalsecret-db-sonarqube.yaml
  # and comment out db-sonarqube-credentials.yaml
  # - externalsecret-db-sonarqube.yaml
  # Backstage database credentials (dev/local)
  - db-backstage-credentials.yaml
  # Backstage PostgreSQL cluster
  - db-backstage-cluster.yaml
  # Note: For production, uncomment externalsecret-db-backstage.yaml
  # and comment out db-backstage-credentials.yaml
  # - externalsecret-db-backstage.yaml

labels:
  - pairs:
      app.kubernetes.io/managed-by: argocd
      app.kubernetes.io/part-of: fawkes-platform

# Default values for Jenkins Helm chart
# Updated to simplify configuration and ensure compatibility with modern Kubernetes and Helm practices.

clusterZone: "cluster.local" # Update this to match your cluster's DNS zone.

renderHelmLabels: true

controller:
  componentName: "jenkins-controller"
  image:
    registry: docker.io
    repository: jenkins/jenkins
    tag: "lts-jdk11" # Use the latest LTS tag for stability
  imagePullPolicy: "IfNotPresent"

  admin:
    user: "admin"
    password: "" # Leave empty to auto-generate

  resources:
    requests:
      cpu: "100m"
      memory: "512Mi"
    limits:
      cpu: "2000m"
      memory: "4096Mi"

  serviceType: LoadBalancer
  servicePort: 8080
  agentListenerPort: 50000

  installPlugins:
    - kubernetes
    - workflow-aggregator
    - git
    - configuration-as-code

agent:
  enabled: true
  image:
    repository: jenkins/inbound-agent
    tag: "latest"
  resources:
    requests:
      cpu: "512m"
      memory: "512Mi"
    limits:
      cpu: "1000m"
      memory: "1024Mi"
  podRetention: "Never"

persistence:
  enabled: true
  accessMode: "ReadWriteOnce"
  size: "10Gi"

rbac:
  create: true

serviceAccount:
  create: true

sidecars:
  configAutoReload:
    enabled: true
    image:
      repository: kiwigrid/k8s-sidecar
      tag: "latest"
    imagePullPolicy: IfNotPresent

ingress:
  enabled: false

prometheus:
  enabled: false

networkPolicy:
  enabled: false

awsSecurityGroupPolicies:
  enabled: false
  policies: []

source:
  chart: jenkins
  repoURL: https://charts.jenkins.io
  targetRevision: 5.1.7
  helm:
    valueFiles:
      - values.yaml
